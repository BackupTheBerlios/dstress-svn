<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>dsource.org - tutorials</title>
        
		<link rel="shortcut icon" href="http://www.dsource.org/favicon.ico">
<!--        <link rel="stylesheet" type="text/css" href="index.php_files/main.css">
        <link rel="stylesheet" type="text/css" href="index.php_files/tabs1.css">
        <link rel="stylesheet" type="text/css" href="index.php_files/tabs2.css">
        <link rel="stylesheet" type="text/css" href="index.php_files/subSilver_all.css">-->
    <style>
/* css backup */
A           {color: #003399; text-decoration: underline;}
A:link      {color: #003399; }
A:visited   {color: #003399; }
A:active    {color: #003399; }
A:hover     {color: #FF0000; }


/* These are used for the links on the help page */
A.href:link, A.href:visited, A.href:active, A.href:hover {color: #FF9500;}

BODY
{
   color             : #115E94;
   font-family       : Verdana, Helvetica, Tahoma, Serif;
   font-size         : small;
   margin            : 0px 0px 0px 0px;
   padding           : 0px;
}

PRE, CODE
{
   font-size        : small;
}

div.logo {
   float: right;
   text-align: right;
   padding-top: 0.5em;
   padding-right: 1em;
   font-size: 80%;
}

div.logo span {
	font-size: 125%;
	font-weight: bold;
	padding-bottom: 0.2em;
}

table.home {
	width: 100%;
	float: left;
	padding-top: 5px;
}

td.home_left {
	padding-top: 10px;
	vertical-align: top;
}

td.home_right {
	padding-top: 10px;
	vertical-align: top;
	width: 20em;
}

table.news td {
	padding-bottom: 0.5em;
	font-size: 80%;
}


div.app {
	color: black;
}

h3 {
	font-size: 100%;
	background-image: url(/images/ul_corner_white.gif);
	background-repeat: no-repeat;
	background-color: #006699;
	color: white;
	padding-left: 1em;
	padding-bottom: 2px;
}

/*
 override h3 (above) with this on certain styles:
 .app h3, .news h3, .resources h3, .project_cats h3 .project_nav h3
*/


.app li {
	padding-bottom: 0.5em;   /* this doesn't work.  home page lists are scrunched together. */
}


.news td {
	padding-left: 1em;
}


/* SITE */
td.site_left {
	padding-top: 10px;
	vertical-align: top;
	width: 20em;
}
	
td.site_right {
	padding-top: 10px;
	vertical-align: top;
}


    
/* PROJECTS */
div.topnav ul {
   margin: 0px;
   padding-left: 1em;
   padding-top: 0.2em;
   list-style: none;
}

div.topnav li {
   display          : inline;
   margin           : 0px;
   padding          : 0px;
}

td.plinks ul {
   margin: 0px;
   padding-left: 0.1em;
   padding-top: 0.2em;
   list-style: none;
}

td.plinks li {
   display          : inline;
   margin           : 0px;
   padding-right    : 0.5em;
}

td.projects_left {
	padding-top: 0.5em;
	vertical-align: top;
	width: 1px;
}
	
td.projects_right {
	padding-top: 0.5em;
	padding-left: 1em;
	vertical-align: top;
}

div.project_cats ul {
 list-style: none;
 display: block;
 padding: .25em .25em;
 padding-left: 1em;
 padding-right: 1em;
}

div.project_cats li {
	list-style-type: none;
	padding-bottom: 0.5em;
	white-space: nowrap;
}

table.project_cat {
	width: 100%;
	border: 1px solid #115E94;
	margin-bottom: 1em;
}

table.project_cat td.pcat {
	color: white;
	background-color: #115E94;
}

table.project {
	width: 100%;
}

table.project td.ptitle {
	padding-top: 0.3em;
	text-align: left;
	width: 1px;
	white-space: nowrap;
	font-weight: bold;
}
table.project td.pshortdesc {
	padding-top: 0.3em;
	width: 100%;
	text-align: left;
	padding-left: 2em;
	font-size: 90%;
}

table.project span.ptitle {
	font-weight: bold;
	font-size: 150%;
}


table.project td.plinks {
	font-size: 80%;
	width: 20%;
	padding: 0.3em;
	white-space: nowrap;
}

table.project td.projinfotitle {
	padding-top: 1em;
	font-weight: bold;
	font-size: 80%;
	white-space: nowrap;
}

table.project td.projinfo {
	font-size: 80%;
	white-space: nowrap;
}

div.project_nav ul {
 list-style: none;
 display: block;
 padding: .25em .25em;
 padding-left: 1em;
 padding-right: 1em;
}

div.project_nav li {
	list-style-type: none;
	padding-bottom: 0.5em;
	white-space: nowrap;
}



/* SITE */
.resourceList li {
	padding-bottom: 0.25em;
}





/* Tutorial styles */

form {
	margin-left: 1em;

}


div.ex_disp 
{ 
    padding-left: 1em; 
    padding-top: 3em; 
}

/* table.home div.app div.axial table.gray tr th */
table.gray tr th
{ 
    margin-top: 0em; 
    color: #000000; 
    background-color: #EFEFEF; 
}


div.axial pre
{ 
    margin-left: 1em;
    margin-right: 1em;
    padding-left: 1em;
    padding-right: 1em;
    color: #000000;
    background-color: #EFEFEF; 
    border: dotted medium #006699;
}


table.exampleList
{
    border: solid thin #115E94;
    background-color: white;
    margin: 0em;
    padding: 0em;
}


table.exampleList td.extop
{
    border-bottom: 0em;
    margin: 0em;
    padding: 0em;
}


table.exampleList td.exbot
{
    color: black;
    background-color: white;
    margin: 0em;
    padding-bottom: 1em;
}



/* D2HTML Styles */

span.keyword 
{ 
    font-family: 'Courier New', 'Andale Mono', Courier, monospace; 
    color: #0000FF; 
}

span.number  
{ 
    font-family: 'Courier New', 'Andale Mono', Courier, monospace; 
    color: #008000; 
}

span.string  
{ 
    font-family: 'Courier New', 'Andale Mono', Courier, monospace; 
    color: #000080;
    background: #FFFF00; 
}

span.comment 
{ 
    font-family: 'Courier New', 'Andale Mono', Courier, monospace; 
    color: #000000;
    background: #CCCCFF;
}


div.admin_nav ul {
   margin: 0px;
   padding-left: 1em;
   padding-top: 0.2em;
   list-style: none;
}

div.admin_nav li {
   display          : inline;
   margin           : 0px;
   padding          : 1em;
}

div.project_news {
	font-size: 90%;
}

p.news_date {
	font-style: italic;
}
p.news_short {
	font-weight: bold;
}

table.downloads th {
	background-image: none;
	background-color: white;
	color: black;
}

table.downloads td.yesno {
	text-align: center;
}

div.callout {
	display: block;
	border: 1px solid #333;
	background-color: #ffc;
	padding: 0.25em;
	margin: 0.25em;
}

/*
The original subSilver Theme for phpBB version 2+
Created by subBlue design
http://www.subBlue.com

NOTE: These CSS definitions are stored within the main page body so that you can use the phpBB2
theme administration centre. When you have finalised your style you could cut the final CSS code
and place it in an external file, deleting this section to save bandwidth.
*/

/* General font families for common tags */
font,th,td,p,span { font-family: Verdana, Arial, Helvetica, sans-serif }
a:link,a:active,a:visited { color : #006699; }
a:hover		{ text-decoration: underline; color : #DD6900; }
hr	{ height: 0px; border: solid #D1D7DC 0px; border-top-width: 1px;}

/* This is the border line & background colour round the entire page */
<!--.bodyline	{ background-color: #FFFFFF; border: 1px #98AAB1 solid; } -->

/* This is the outline round the main forum tables */
<!--.forumline	{ background-color: #FFFFFF; border: 2px #006699 solid; } -->

td.forumline { text-align: left; }

/* Main table cell colours and backgrounds */
td.row1	{ background-color: #EFEFEF; text-align: left; }
td.row2	{ background-color: #DEE3E7; text-align: left; }
td.row3	{ background-color: #D1D7DC; }

/*
This is for the table cell above the Topics, Post & Last posts on the index.php page
By default this is the fading out gradiated silver background.
However, you could replace this with a bitmap specific for each forum
*/
td.rowpic {
	background-color: #FFFFFF;
	background-image: url(/forums/templates/subSilver/images/cellpic2.jpg);
	background-repeat: repeat-y;
}

.main_phpBB_table {
	float: left;
}

/* Header cells - the blue and silver gradient backgrounds */
th	{
color: #FFA34F; font-size: 11px; font-weight : bold;
background-color: #006699; height: 25px;
background-image: url(/forums/templates/subSilver/images/cellpic3.gif);
}

td.cat,td.catHead,td.catSides,td.catLeft,td.catRight,td.catBottom {
		background-image: url(/forums/templates/subSilver/images/cellpic1.gif);
		background-color:#D1D7DC; border: #FFFFFF; border-style: solid; height: 28px;
}

/*
Setting additional nice inner borders for the main table cells.
The names indicate which sides the border will be on.
Don't worry if you don't understand this, just ignore it :-)
*/
td.cat,td.catHead,td.catBottom {
height: 29px;
border-width: 0px 0px 0px 0px;
}
th.thHead,th.thSides,th.thTop,th.thLeft,th.thRight,th.thBottom,th.thCornerL,th.thCornerR {
font-weight: bold; border: #FFFFFF; border-style: solid; height: 28px;
}
td.row3Right,td.spaceRow {
background-color: #D1D7DC; border: #FFFFFF; border-style: solid;
}

th.thHead,td.catHead { font-size: 12px; border-width: 1px 1px 0px 1px; }
th.thSides,td.catSides,td.spaceRow	 { border-width: 0px 1px 0px 1px; }
th.thRight,td.catRight,td.row3Right	 { border-width: 0px 1px 0px 0px; }
th.thLeft,td.catLeft	  { border-width: 0px 0px 0px 1px; }
th.thBottom,td.catBottom  { border-width: 0px 1px 1px 1px; }
th.thTop	 { border-width: 1px 0px 0px 0px; }
th.thCornerL { border-width: 1px 0px 0px 1px; }
th.thCornerR { border-width: 1px 1px 0px 0px; }

/* The largest text used in the index page title and toptic title etc. */
.maintitle	{
font-weight: bold; font-size: 22px; font-family: "Trebuchet MS",Verdana, Arial, Helvetica, sans-serif;
text-decoration: none; line-height : 120%; color : #000000;
}

/* General text */
.gen { font-size : 12px; }
.genmed { font-size : 11px; }
.gensmall { font-size : 10px; }
.gen,.genmed,.gensmall { color : #000000; }
a.gen,a.genmed,a.gensmall { color: #006699; text-decoration: none; }
a.gen:hover,a.genmed:hover,a.gensmall:hover	{ color: #DD6900; text-decoration: underline; }

/* The register, login, search etc links at the top of the page */
.mainmenu		{ font-size : 11px; color : #000000 }
a.mainmenu		{ text-decoration: none; color : #006699;  }
a.mainmenu:hover{ text-decoration: underline; color : #DD6900; }

/* Forum category titles */
.cattitle		{ font-weight: bold; font-size: 12px ; letter-spacing: 1px; color : #006699}
a.cattitle		{ text-decoration: none; color : #006699; }
a.cattitle:hover{ text-decoration: underline; }

/* Forum title: Text and link to the forums used in: index.php */
.forumlink		{ font-weight: bold; font-size: 12px; color : #006699; }
a.forumlink 	{ text-decoration: none; color : #006699; }
a.forumlink:hover{ text-decoration: underline; color : #DD6900; }

/* Used for the navigation text, (Page 1,2,3 etc) and the navigation bar when in a forum */
.nav			{ font-weight: bold; font-size: 11px; color : #000000;}
a.nav			{ text-decoration: none; color : #006699; }
a.nav:hover		{ text-decoration: underline; }

/* titles for the topics: could specify viewed link colour too */
.topictitle,h1,h2	{ font-weight: bold; font-size: 11px; color : #000000; }
a.topictitle:link   { text-decoration: none; color : #006699; }
a.topictitle:visited { text-decoration: none; color : #5493B4; }
a.topictitle:hover	{ text-decoration: underline; color : #DD6900; }

/* Name of poster in viewmsg.php and viewtopic.php and other places */
.name			{ font-size : 11px; color : #000000;}

/* Location, number of posts, post date etc */
.postdetails		{ font-size : 10px; color : #000000; }

/* The content of the posts (body of text) */
.postbody { font-size : 12px; line-height: 18px}
a.postlink:link	{ text-decoration: none; color : #006699 }
a.postlink:visited { text-decoration: none; color : #5493B4; }
a.postlink:hover { text-decoration: underline; color : #DD6900}

/* Quote & Code blocks */
.code {
font-family: Courier, 'Courier New', sans-serif; font-size: 11px; color: #006600;
background-color: #FAFAFA; border: #D1D7DC; border-style: solid;
border-left-width: 1px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px
}

.quote {
font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 11px; color: #444444; line-height: 125%;
background-color: #FAFAFA; border: #D1D7DC; border-style: solid;
border-left-width: 1px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px
}

/* Copyright and bottom info */
.copyright		{ font-size: 10px; font-family: Verdana, Arial, Helvetica, sans-serif; color: #444444; letter-spacing: -1px;}
a.copyright		{ color: #444444; text-decoration: none;}
a.copyright:hover { color: #000000; text-decoration: underline;}

/* Form elements */
input,textarea, select {
color : #000000;
font: normal 11px Verdana, Arial, Helvetica, sans-serif;
border-color : #000000;
}

/* The text input fields background colour */
input.post, textarea.post, select {
background-color : #FFFFFF;
}

input { text-indent : 2px; }

/* The buttons used for bbCode styling in message post */
input.button {
background-color : #EFEFEF;
color : #000000;
font-size: 11px; font-family: Verdana, Arial, Helvetica, sans-serif;
}

/* The main submit button option */
input.mainoption {
background-color : #FAFAFA;
font-weight : bold;
}

/* None-bold submit button */
input.liteoption {
background-color : #FAFAFA;
font-weight : normal;
}

/* This is the line in the posting page which shows the rollover
help line. This is actually a text box, but if set to be the same
colour as the background no one will know ;)
*/
.helpline { background-color: #DEE3E7; border-style: none; }

/* Import the fancy styles for IE only (NS4.x doesn't use the @import function) */
@import url("templates/subSilver/formIE.css");





/* tabs1 styles */

DIV.tabs1
{
   float            : left;
   width            : 100%;
   background       : url("/images/tabs1Border.gif") repeat-x bottom;
}

DIV.tabs1 UL
{
   margin           : 0px;
   padding-left     : 10px;
   list-style       : none;
}

DIV.tabs1 LI
{
   display          : inline;
   margin           : 0px;
   padding          : 0px;
}

DIV.tabs1 A
{
   float            : left;
   background       : url("/images/tabs1Right.gif") no-repeat right top;
   border-bottom    : 1px solid #84B0C7;
   font-size        : x-small;
   font-weight      : bold;
   text-decoration  : none;
}

DIV.tabs1 A:hover
{
   background-position: 100% -150px;
}

DIV.tabs1 A:link, DIV.tabs1 A:visited,
DIV.tabs1 A:active, DIV.tabs1 A:hover
{
   color            : #115E94;
}

DIV.tabs1 SPAN
{
   float            : left;
   display          : block;
   background       : url("/images/tabs1Left.gif") no-repeat left top;
   padding          : 5px 9px;
   white-space      : nowrap;
}

/* Commented Backslash Hack hides rule from IE5-Mac \*/
DIV.tabs1 SPAN {float : none;}
/* End IE5-Mac hack */

DIV.tabs1 A:hover SPAN
{
   background-position: 0% -150px;
}

DIV.tabs1 LI#current A
{
   background-position: 100% -150px;
   border-width     : 0px;
}

DIV.tabs1 LI#current SPAN
{
   background-position: 0% -150px;
   padding-bottom   : 6px;
}





/* tabs2 styles */

DIV.tabs2
{
   float            : left;
   width            : 100%;
   background       : url("/images/tabs1Border.gif") repeat-x bottom;
}

DIV.tabs2 UL
{
   margin           : 0px;
   padding-left     : 10px;
   list-style       : none;
   white-space      : nowrap;
}

DIV.tabs2 LI
{
   display          : inline;
   margin           : 0px;
   padding          : 0px;
   white-space      : nowrap;
}

DIV.tabs2 A
{
   float            : left;
   font-size        : x-small;
   font-weight      : bold;
   text-decoration  : none;
}

DIV.tabs2 A:hover SPAN:hover
{
	color: #FF9500;
}

DIV.tabs2 A:link, DIV.tabs2 A:visited,
DIV.tabs2 A:active
{
   color            : #115E94;
}

DIV.tabs2 SPAN
{
   float            : left;
   display          : block;
   padding          : 5px 9px;
   white-space      : nowrap;
}

/* Commented Backslash Hack hides rule from IE5-Mac \*/
DIV.tabs2 SPAN {float : none;}
/* End IE5-Mac hack */



table.numbers th {
    background: gray;
    color: white;
    border: solid thin gray;
}


table.numbers {   
    text-align: center;
    padding: 0;
    border-color: gray;
    border-style: solid;
    border-width: medium;
    margin: 0.05in;
}

table.numbers td {
    font-family: Times New Roman, Times, serif;
    font-size: medium;
    color: black;
    background: none;
    border-color: gray; 
    border-style: ridge;
    border-width: thin;
    margin: 0.05in;
    padding: 0.05in;
    text-align: right;
}
</style><style>
tt { background: #AAFFAA }
h3 { margin-top: 1.0em; }
</style></head>


    <body>

		<div class="logo">
			<span>dsource.org</span><br>
			Open Source Development for D
		</div>

        <div class="tabs1">
          <ul>
            <li><a href="http://www.dsource.org/"><span>Home</span></a></li>
            <li><a href="http://www.dsource.org/projects/"><span>Projects</span></a></li>
            <li><a href="http://www.dsource.org/forums/"><span>Forums</span></a></li>
            <li id="current"><a href="http://www.dsource.org/tutorials/"><span>Tutorials</span></a></li>
            <li><a href="http://www.dsource.org/site/"><span>Site</span></a></li>
          </ul>
        </div>


<table class="home" border="0" cellpadding="5" cellspacing="0">

    <tbody><tr>
<!--        <td class="home_left"> -->
        <td class="projects_left">


<p><b>Warning:</b> This is a <i>long</i> page. Please be patient
waiting for it to load. If page fails to load due to a time-out error,
please try again later (when the server may be less busy).</p><div class="app" style="margin-left: 0.5em;"><h3 class="ex_disp_h3">Categories</h3><ul>		<li><a href="#topic0">Fundamentals (22)</a></li>
		<li><a href="#topic1">Intermediate (14)</a></li>
		<li><a href="#topic2">Advanced (9)</a></li>
</ul><hr><ul>		<li><a href="#topic3">Keywords (8)</a></li>
</ul><hr><ul>		<li><a href="#topic4">Arrays (8)</a></li>
		<li><a href="#topic5">Common Errors (3)</a></li>
		<li><a href="#topic6">Delegates (8)</a></li>
		<li><a href="#topic7">Foreach (6)</a></li>
		<li><a href="#topic8">Function Literals (2)</a></li>
		<li><a href="#topic9">Handling errors (1)</a></li>
		<li><a href="#topic10">Operator Overloading (4)</a></li>
		<li><a href="#topic11">switch / case ()</a></li>
		<li><a href="#topic12">Templates (10)</a></li>
		<li><a href="#topic13">Versioning (3)</a></li>
</ul><hr><ul>		<li><a href="#topic14">DFL (7)</a></li>
		<li><a href="#topic15">Mango (1)</a></li>
		<li><a href="#topic16">Standard Library (23)</a></li>
		<li><a href="#topic17">Windows GUI (3)</a></li>
		<li><a href="#topic18">Handling Errors (1)</a></li>
		<li><a href="#topic19">Switch / Case (3)</a></li>
</ul><hr><h3 class="ex_disp_h3">Examples</h3><ul><li id="topic0">Fundamentals</li><ul><li><a href="#ex14">It Compiles</a></li><li><a href="#ex26">Do Something</a></li><li><a href="#ex68">Initializing Variables</a></li><li><a href="#ex59">Data Types</a></li><li><a href="#ex46">If/Else</a></li><li><a href="#ex47">The "for" Loop</a></li><li><a href="#ex73">Variables</a></li><li><a href="#ex64">Expressions</a></li><li><a href="#ex15">Comments</a></li><li><a href="#ex50">String Comparison Operators</a></li><li><a href="#ex37">Wait</a></li><li><a href="#ex152">Get a number from the user (uses scanf)</a></li><li><a href="#ex153">Quadratic Equation (getting input and doing calculations)</a></li><li><a href="#ex38">Function</a></li><li><a href="#ex39">Nested Functions</a></li><li><a href="#ex41">Struct</a></li><li><a href="#ex66">Struct Initialization</a></li><li><a href="#ex40">Class</a></li><li><a href="#ex82">Appending</a></li><li><a href="#ex35">Assertions</a></li><li><a href="#ex72">Unittests</a></li><li><a href="#ex42">Getch/Getchar</a></li></ul><li id="topic1">Intermediate</li><ul><li><a href="#ex143">Using more than one function</a></li><li><a href="#ex103">Character Initial Values</a></li><li><a href="#ex126">Module usage</a></li><li><a href="#ex127">Asm code for splitting ubyte into low and high nibbles</a></li><li><a href="#ex128">Asm code for finding first occurrence of letter in string</a></li><li><a href="#ex132">Towers of Hanoi</a></li><li><a href="#ex63">Factorial</a></li><li><a href="#ex48">Escape Sequences</a></li><li><a href="#ex85">Comments (Reprise)</a></li><li><a href="#ex21">Nested Comments</a></li><li><a href="#ex98">String Literals</a></li><li><a href="#ex36">String and Number Literals</a></li><li><a href="#ex34">Runtime Type Information (RTTI)</a></li><li><a href="#ex32">Statistics</a></li></ul><li id="topic2">Advanced</li><ul><li><a href="#ex147">Printing international characters on Windows</a></li><li><a href="#ex30">Date Localization using version</a></li><li><a href="#ex70">Struct "constructors"</a></li><li><a href="#ex91">Application path</a></li><li><a href="#ex24">Locales</a></li><li><a href="#ex31">CreateLink using COM</a></li><li><a href="#ex141">Endless For Loop</a></li><li><a href="#ex145">Meta tags (__FILE__, __LINE__, etc.)</a></li><li><a href="#ex146">uudecode</a></li></ul><li id="topic3">Keywords</li><ul><li><a href="#ex78">asm</a></li><li><a href="#ex75">auto</a></li><li><a href="#ex57">alias</a></li><li><a href="#ex45">interface</a></li><li><a href="#ex49">dchar</a></li><li><a href="#ex74">final</a></li><li><a href="#ex89">goto</a></li><li><a href="#ex92">return</a></li></ul><li id="topic4">Arrays</li><ul><li><a href="#ex104">Delete All Keys From Associative Array</a></li><li><a href="#ex149">Static vs dynamic arrays</a></li><li><a href="#ex150">Dealing with strings copy</a></li><li><a href="#ex151">Arrays of classes</a></li><li><a href="#ex67">Various char arrays</a></li><li><a href="#ex65">Dimensioning Static Arrays</a></li><li><a href="#ex86">Returning Arrays from Functions</a></li><li><a href="#ex100">Using char[][] args</a></li></ul><li id="topic5">Common Errors</li><ul><li><a href="#ex79">Increasing the Size of a Dynamic Array</a></li><li><a href="#ex80">Using Objects</a></li><li><a href="#ex83">Printing a Slice from a String</a></li></ul><li id="topic6">Delegates</li><ul><li><a href="#ex102">DelegateTest.d</a></li><li><a href="#ex107">Delegates</a></li><li><a href="#ex108">Proper creation &amp; use of stack delegates</a></li><li><a href="#ex109">Don't Return a Stack Delegate</a></li><li><a href="#ex110">Copyable stack delegates, implemented with structs and classes</a></li><li><a href="#ex112">Copyable stack delegates (with writefln)</a></li><li><a href="#ex60">Delegate 1</a></li><li><a href="#ex61">Delegate 2</a></li></ul><li id="topic7">Foreach</li><ul><li><a href="#ex51">Foreach on a class</a></li><li><a href="#ex52">Foreach with an inout</a></li><li><a href="#ex53">Foreach with a string literal</a></li><li><a href="#ex62">Foreach with a char[]</a></li><li><a href="#ex69">Foreach with key and value pairs</a></li><li><a href="#ex71">Associative array of strings</a></li></ul><li id="topic8">Function Literals</li><ul><li><a href="#ex77">Function Literal Assignment</a></li><li><a href="#ex76">Function Literal / Anonymous Function</a></li></ul><li id="topic9">Handling errors</li><ul><li><a href="#ex129">DBC: basic design by contract</a></li></ul><li id="topic10">Operator Overloading</li><ul><li><a href="#ex43">Currency</a></li><li><a href="#ex44">Currency (Using with)</a></li><li><a href="#ex88">opCall</a></li><li><a href="#ex96">Byte.d</a></li></ul><li id="topic11">switch / case</li><ul></ul><li id="topic12">Templates</li><ul><li><a href="#ex97">Struct Template</a></li><li><a href="#ex99">Interface Template</a></li><li><a href="#ex111">Iterator</a></li><li><a href="#ex116">Internal templates</a></li><li><a href="#ex29">Simple Template</a></li><li><a href="#ex12">Template Constructors</a></li><li><a href="#ex4">Template Functions</a></li><li><a href="#ex55">Multiple Inheritance with template 'bolt-ins'</a></li><li><a href="#ex13">Variable Arguments</a></li><li><a href="#ex93">Template RTTI</a></li></ul><li id="topic13">Versioning</li><ul><li><a href="#ex22">Built-in Versions</a></li><li><a href="#ex106">Using versions to store multiple programs in one file</a></li><li><a href="#ex117">Compile time versioning</a></li></ul><li id="topic14">DFL</li><ul><li><a href="#ex135">DflMiniCalc</a></li><li><a href="#ex136">Resizable Dialog</a></li><li><a href="#ex137">MiniCalcWithRmb</a></li><li><a href="#ex138">DflTextBox with Selection reverse video</a></li><li><a href="#ex139">ToolTips and ListBox having Object entries</a></li><li><a href="#ex134">Checkboxes</a></li><li><a href="#ex122">Controls</a></li></ul><li id="topic15">Mango</li><ul><li><a href="#ex113">I/O with Mango</a></li></ul><li id="topic16">Standard Library</li><ul><li><a href="#ex120">String usage: split and splitlines</a></li><li><a href="#ex87">I/O on stdin and stdout streams</a></li><li><a href="#ex95">httpHEAD</a></li><li><a href="#ex119">OutBuffer</a></li><li><a href="#ex125">Win32 Registry api</a></li><li><a href="#ex144">Using the File's "FileMode" attribute</a></li><li><a href="#ex115">Elapsed Time (uses std.date and std.c.time)</a></li><li><a href="#ex81">Base64 Decoding</a></li><li><a href="#ex133">Compile all files into a .lib</a></li><li><a href="#ex105">writef</a></li><li><a href="#ex118">std.perf</a></li><li><a href="#ex131">Make all.html</a></li><li><a href="#ex28">File Input</a></li><li><a href="#ex27">recls</a></li><li><a href="#ex58">Regular Expressions</a></li><li><a href="#ex90">std.stream readLine</a></li><li><a href="#ex56">Threads</a></li><li><a href="#ex148">Variable Arguments using std.stdarg (and std.stdio)</a></li><li><a href="#ex101">Variadic Functions</a></li><li><a href="#ex94">Variable Arguments</a></li><li><a href="#ex25">zip</a></li><li><a href="#ex114">Zlib</a></li><li><a href="#ex121">Unzip using std.zip</a></li></ul><li id="topic17">Windows GUI</li><ul><li><a href="#ex123">MiniCalc</a></li><li><a href="#ex124">TreeView</a></li><li><a href="#ex130">MiniCalc - RestorePosition</a></li></ul><li id="topic18">Handling Errors</li><ul><li><a href="#ex33">Try/Catch/Finally</a></li></ul><li id="topic19">Switch / Case</li><ul><li><a href="#ex23">Switch-Case Construct</a></li><li><a href="#ex20">The Twelve Days of Christmas</a></li><li><a href="#ex84">The Twelve Days of Christmas (Reprise)</a></li></ul></ul><div class="app" style="margin-left: 0.5em;"><h3 class="ex_disp_h3">Fundamentals</h3><h4 id="ex14">It Compiles</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>It doesn't actually do anything, but it compiles and runs.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{
}</code></pre> For an explanation of what this means, visit <a href="http://www.wikiservice.at/d/wiki.cgi?D__Tutorial/StartingWithD">Wiki4D.</a></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex26">Do Something</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>It's an abbreviated "hello world" without the world.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{ 
    printf(<span class="string">"Hi"</span>);
}</code></pre>  <p><em>
Prints "Hi" at the command line.
</em></p>  

<p>
The <tt>printf</tt> function is an easy way to send text to the console window.  
In this example, the quoted phrase is simply printed in the console window. 
</p>

<p>
See more examples on using printf are at 
<a href="http://www.wikiservice.at/d/wiki.cgi?HowTo/printf">Wiki4D.</a>
</p>
</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex68">Initializing Variables</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to initialize an integer and a string.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">int</span> magicNumber = <span class="number">42</span>;

<span class="keyword">char</span>[] password = <span class="string">"sesame"</span>;

<span class="keyword">void</span> main()
{
    printf(<span class="string">"Magic number: %d\n"</span>, magicNumber);
    printf(<span class="string">"Password: %.*s\n"</span>, password);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex59">Data Types</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how sizeof and max can reveal the size and possible maximum value of data types.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">int</span> main() 
{
    <span class="comment">// Show information about integer types...</span>
    printf(<span class="string">"bit\tmin: %d\tmax: %d (%u)\n"</span>, <span class="keyword">bit</span>.min, <span class="keyword">bit</span>.max, <span class="keyword">bit</span>.sizeof);  
    printf(<span class="string">"ubyte\tmin: %u\tmax: %u (%u)\n"</span>, <span class="keyword">ubyte</span>.min, <span class="keyword">ubyte</span>.max, <span class="keyword">ubyte</span>.sizeof);  
    printf(<span class="string">"ushort\tmin: %u\tmax: %u (%u)\n"</span>, <span class="keyword">ushort</span>.min, <span class="keyword">ushort</span>.max, <span class="keyword">ushort</span>.sizeof);  
    printf(<span class="string">"uint\tmin: %u\tmax: %u (%u)\n"</span>, <span class="keyword">uint</span>.min, <span class="keyword">uint</span>.max, <span class="keyword">uint</span>.sizeof);  
    printf(<span class="string">"ulong\tmin: %llu\tmax: %llu (%u)\n"</span>, <span class="keyword">ulong</span>.min, <span class="keyword">ulong</span>.max, <span class="keyword">ulong</span>.sizeof);    
    printf(<span class="string">"byte\tmin: %d\tmax: %d (%u)\n"</span>, <span class="keyword">byte</span>.min, <span class="keyword">byte</span>.max, <span class="keyword">byte</span>.sizeof);  
    printf(<span class="string">"short\tmin: %d\tmax: %d (%u)\n"</span>, <span class="keyword">short</span>.min, <span class="keyword">short</span>.max, <span class="keyword">short</span>.sizeof);    
    printf(<span class="string">"int\tmin: %d\tmax: %d (%u)\n"</span>, <span class="keyword">int</span>.min, <span class="keyword">int</span>.max, <span class="keyword">int</span>.sizeof);    
    printf(<span class="string">"long\tmin: %lld\tmax: %lld (%u)\n"</span>, <span class="keyword">long</span>.min, <span class="keyword">long</span>.max, <span class="keyword">long</span>.sizeof);    

    <span class="comment">// Show information about floating-point types...</span>
    printf(<span class="string">"float (%u)\tdouble (%u)\treal (%u)\t"</span>, <span class="keyword">float</span>.sizeof, <span class="keyword">double</span>.sizeof, <span class="keyword">real</span>.sizeof);
    printf(<span class="string">"ifloat (%u)\tidouble (%u)\tireal (%u)\t"</span>, <span class="keyword">ifloat</span>.sizeof, <span class="keyword">idouble</span>.sizeof, <span class="keyword">ireal</span>.sizeof);
    printf(<span class="string">"cfloat (%u)\tcdouble (%u)\tcreal (%u)\t"</span>, <span class="keyword">cfloat</span>.sizeof, <span class="keyword">cdouble</span>.sizeof, <span class="keyword">creal</span>.sizeof);
    printf(<span class="string">"cfloat (%u)\tcdouble (%u)\tcreal (%u)\t"</span>, <span class="keyword">cfloat</span>.sizeof, <span class="keyword">cdouble</span>.sizeof, <span class="keyword">creal</span>.sizeof);

    <span class="comment">// Show information about character types...</span>
    printf(<span class="string">"char (%u)\twchar (%u)\tdchar (%u)\t"</span>, <span class="keyword">char</span>.sizeof, <span class="keyword">wchar</span>.sizeof, <span class="keyword">dchar</span>.sizeof);


    <span class="comment">/* 

    *** sizeof vs. size ***

    Currently the sizeof and size attributes act the same way (and carry the same role). 
    Since this is extremely redundant, it's safe to assume that only one of these will 
    remain in D. Walter has indicated that he prefers sizeof since it's already a keyword 
    in C that is used in a similar fashion. I'd recommended using sizeof rather than size.

    */</span>

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre>

<p>
I'm trying to start with the basics:  whole numbers.  The above code will show the 
upper and lower limits for the integer data types in D and sizes for other data types.  
It's pretty fancy, so hopefully I'm doing this right.  I make use of the <tt>min</tt> 
and <tt>max</tt> attributes.
</p>

<h2>Output</h2>

<tt>bit     min: 0  max: 1 (1)<br>
ubyte   min: 0  max: 255 (1)<br>
ushort  min: 0  max: 65535 (2)<br>
uint    min: 0  max: 4294967295 (4)<br>
ulong   min: 0  max: 18446744073709551615 (8)<br>
byte    min: -128       max: 127 (1)<br>
short   min: -32768     max: 32767 (2)<br>
int     min: -2147483648        max: 2147483647 (4)<br>
long    min: -9223372036854775808       max: 9223372036854775807 (8)<br>
float (4)       double (8)      real (10)       ifloat (4)      idouble (8)<br>
ireal (10)      cfloat (8)      cdouble (16)    creal (20)      cfloat (8)<br>
cdouble (16)    creal (20)      char (1)        wchar (2)       dchar (4)</tt>


<h2>Integer Types</h2>



<table class="numbers">
<tbody><tr><th>Type</th><th>Min</th><th>Max</th><th>Size (bytes)</th></tr>

<tr><td>bit    </td><td>0 </td><td>1</td><td>1</td></tr>
<tr><td>ubyte  </td><td>0 </td><td>255</td><td>1</td></tr>
<tr><td>ushort </td><td>0 </td><td>65,535</td><td>2</td></tr>
<tr><td>uint   </td><td>0 </td><td>4,294,967,295</td><td>4</td></tr>

<tr><td>ulong  </td><td>0 </td><td>18,446,744,073,709,551,615</td><td>8</td></tr>
<tr><td>byte   </td><td>-128      </td><td>127</td><td>1</td></tr>
<tr><td>short  </td><td>-32,768    </td><td>32,767</td><td>2</td></tr>
<tr><td>int    </td><td>-2,147,483,648       </td><td>2,147,483,647</td><td>4</td></tr>

<tr><td>long   </td><td>-9,223,372,036,854,775,808      </td><td>9,223,372,036,854,775,807</td><td>8</td></tr>
<!--
<li>float</li><li>double</li><li>real</li>
<li>cfloat</li><li>cdouble</li><li>creal</li><li>ifloat</li><li>idouble</li><li>ireal</li>
-->
</tbody></table>


<h2>Floating-Point Types</h2>

<ul>
<li>Floating point: 
<ul>
<li>float</li><li>double</li><li>real</li>

</ul>
</li><li>Complex and Imaginary: 
<ul>
<li>cfloat</li><li>cdouble</li><li>creal</li>
</ul>
</li>
<li>Complex and Imaginary: 
<ul>
<li>ifloat</li><li>idouble</li><li>ireal</li>

</ul>

</li></ul>


<h2>Character Types</h2>
<ul>
<li>char: unsigned 8 bit (UTF-8)</li>
<li>wchar: unsigned 16 bit (UTF-16)</li>
<li>dchar: unsigned 32 bit (UTF-32)</li>
</ul>


<p>
The official list is in the 
<a href="http://www.digitalmars.com/d/type.html">D Specification,</a> 
of course.
</p>

</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex46">If/Else</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Simple (yet effective) flow control.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{
    <span class="keyword">int</span> i;
    <span class="keyword">if</span>(i==<span class="number">0) </span>printf(<span class="string">"It's one!"</span>); <span class="keyword">else</span> printf(<span class="string">"It's not one!"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex47">The "for" Loop</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>How to do the same thing over and over again.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">int</span> main()

{   
   <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">10</span>; i++)
   {
      printf(<span class="string">"%d\n"</span>, i);
   }
   <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex73">Variables</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Creating "slots" to store data.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{
    <span class="keyword">int</span> myInt;
    <span class="keyword">int</span> myint;
    <span class="keyword">int</span> MYINT;
}</code></pre> 
<p><em>Declare three separate integer variable called myInt, myint, and MYINT.</em></p>
<p>Like many things in D, variable declarations are a lot like C, C++, and Java.</p> 

<p>In D, all variables have to be declared before they are used..</p>

Some Facts About Identifiers 
<ol>
<li>Identifiers must begin with a letter.</li>
<li>Subsequent characters can be numbers or underscores 
        as well as additional letters.</li>
<li>Identifiers can be as long as you want.</li>
<li>Note that variable identifiers in D are <em>case-sensitive</em>.
(In the above example, "myInt", "myint", and "MYINT" are separate identifiers.)</li>
</ol></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex64">Expressions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates using mathematical expressions.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio; <span class="comment">/* for using printf */</span>


<span class="keyword">void</span> main()
{
    <span class="keyword">int</span> i, j;


    i = <span class="number">12</span> * <span class="number">12</span>; <span class="comment">/* multiplication */</span>
    printf(<span class="string">"12 x 12 = %d\n"</span>, i); <span class="comment">/* i should be 144 */</span>

    j = i / <span class="number">8</span>; <span class="comment">/* division */</span>
    printf(<span class="string">"144 / 8 = %d\n"</span>, j); <span class="comment">/* j should be 18 */</span>

    i -= <span class="number">44</span>; <span class="comment">/* same as saying "i = i - 44;" */</span>
    printf(<span class="string">"144 - 44 = %d\n"</span>, i); <span class="comment">/* i should be 100 */</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex15">Comments</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Good documentation is a good idea.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">



<p>

There are three types of comments in D:
</p><ol>
<li>Line comments: <tt>//</tt></li>
<li>Block comments: <tt>/* */</tt></li>
<li>Nested comments: <tt>/+ +/</tt></li>
</ol>


<h4 id="line-comments">Line Comments</h4>
<p>

Line comments begin with <tt>//</tt> and continue until the end of the line.
The comment automatically ends at the end of the line, so make sure the 
next line is valid code.  If you want a multiple-line comment, then use
a <a href="#block-comments">block comment</a> or a <a href="#nested-comments">nested comment</a>.

(If your code gets word-wrapped, your code would break, but you probably
should try avoiding editors that word-wrap your code anyways.)
</p><p>

</p><p>
If you're familiar with modern flavors of BASIC, <tt>//</tt> is equivalent to a <tt>'</tt>.

</p>

<h4 id="block-comments">Block Comments</h4>
<p>
Block comments can exist entirely a line or contain multiple lines of commentary.
Block comments begin with a <tt>/*</tt> and end with a <tt>*/</tt>.
If you forget a matching closing symbol, your code will either do 
something you didn't expect, or it won't compile at all.
Block comments don't nest.  If you want nesting comments, then use 
<a href="#nested-comments">nested comments</a>.
</p>


<h4 id="nested-comments">Nested Comments</h4>

<p>
Nested comments can exist entirely a line or contain multiple lines of commentary.
Nested comments begin with a <tt>/+</tt> and end with a <tt>+/</tt>.
Just like block comments, openning comment markers must be matched
with closing marks.
</p>

<p>
These comments do nest so that you can put one inside another.
The most obvious use for this feature is to "comment out" code
that you don't want to compile right now (because you're not sure
if it's any good) but might be valuable code.  Of course,
once you decide it's garbage, you'd want to delete the whole
passage.  Nested comments are a little more complicated
than single-line or block comments, so they aren't used in the
in this fairly simple example included below.
</p>
<pre><code class="example"><span class="comment">/* 
comments.html 
Author: J C Calvarese
License: public domain

This program demonstrates using comments in D.
(Such as the multi-line comment this sentence resides in.)
*/</span>

<span class="keyword">import</span> std.c.stdio; <span class="comment">// This is the module that allows us to use printf later...</span>

<span class="comment">/*   
    This is another block (or multiline) comment.  
*/</span>

<span class="keyword">int</span> main()  
{ 
     <span class="comment">/* The main function is where the action starts in D. */</span>
    
    printf(<span class="string">"This program is documented.\n"</span>); <span class="comment">// This command prints some text...</span>
    
    <span class="comment">// "printf"" is actually a C command. </span>
        
    <span class="comment">// This is a single line comment.  It automatically ends at the end of the line.</span>

    <span class="keyword">return</span> <span class="comment">/* 0 is an int */</span> <span class="number">0;
</span>
    
    <span class="comment">/* 
        since main is supposed to return an int ("integer"), 
        the above command is required... 
    */</span> 
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex50">String Comparison Operators</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how strings are compared.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

Title:      String Operations
File:       string_ops.d
Author:     J C Calvarese, http://jcc_7.tripod.com/d/
Date:       2003/10/07
License:    Public Domain

*/</span>


<span class="keyword">int</span> main()
{
    <span class="keyword">char</span>[] str1 = <span class="string">"Aardvark"</span>;
    <span class="keyword">char</span>[] str2 = <span class="string">"Zebra"</span>;
    <span class="keyword">char</span>[] str3 = <span class="string">"1"</span>;
    
    
    <span class="comment">/* "less than" operator */</span>
    
    <span class="keyword">if</span> ( str1 &lt; str2 ) 
      printf(<span class="string">"Aardvark comes before Zebra.\n"</span>);
    <span class="keyword">else</span>
      printf(<span class="string">"Aardvark comes after Zebra.\n"</span>);
    
    
    <span class="comment">/* "greater" than operator */</span>
    
    <span class="keyword">if</span> ( str1 &gt; str2 ) 
      printf(<span class="string">"Aardvark comes after Zebra.\n"</span>);
    <span class="keyword">else</span>
      printf(<span class="string">"Aardvark comes before Zebra.\n"</span>);
    
    
    <span class="comment">/* "equality" operator */</span>
    
    <span class="keyword">if</span> ( str1 == str2 ) 
      printf(<span class="string">"Aardvark is Zebra?!\n"</span>);
    <span class="keyword">else</span>
      printf(<span class="string">"Aardvark is NOT Zebra.\n"</span>);
    
    
    <span class="comment">/* "concatenation" operator */</span>
    
    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0; </span>i&lt;<span class="number">3</span>; i++) 
      str3 ~= <span class="string">"0"</span>;
    printf(<span class="string">"%.*s\n"</span>, str3);
    
    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex37">Wait</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates several ways to wait for the user to press a key. (Designed for Windows).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio; <span class="comment">/* for getch() */</span>
<span class="keyword">import</span> std.stream; <span class="comment">/* for stdin */</span>

<span class="keyword">extern</span> (C) <span class="keyword">int</span> system (<span class="keyword">char</span> *);

<span class="keyword">void</span> main()
{ 
    printf(<span class="string">"Press a key (using 'std.c.stdio.getch();' to wait) . . .\n\0"</span>);
    getch();
    
    printf(<span class="string">"Press another key (using 'std.stream.stdin.getch();') . . .\n\0"</span>);
    std.stream.stdin.getch();
    
    printf(<span class="string">"Waiting again\n(using 'system(\"pause\");'):\n\0"</span>);
    system(<span class="string">"pause"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex152">Get a number from the user (uses scanf)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how you can ask the user for a number during runtime.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* License: Public Domain */</span>

<span class="keyword">import</span> std.c.stdio; <span class="comment">/* for scanf */</span>
<span class="keyword">import</span> std.stdio; <span class="comment">/* for writef/writefln */</span>

<span class="keyword">int</span> main()
{
    <span class="keyword">double</span> n;

    writef(<span class="string">"Pick a number: "</span>);
    scanf(<span class="string">"%lf"</span>, &amp;n);

    writefln(<span class="string">"You picked: %s"</span>, n);

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex153">Quadratic Equation (getting input and doing calculations)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This program will calculate the real roots for a user-specified quadratic equation.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* License: Public Domain */</span>

<span class="keyword">import</span> std.c.stdio; <span class="comment">/* for scanf */</span>
<span class="keyword">import</span> std.stdio; <span class="comment">/* for writef/writefln */</span>
<span class="keyword">import</span> std.math; <span class="comment">/* for sqrt */</span>


<span class="keyword">int</span> main()
{
    <span class="keyword">double</span> a, b, c, d;

    writefln(<span class="string">"For the equation: ax^2 + bx + c = 0"</span>);

    writef(<span class="string">"What is a? "</span>);
    scanf(<span class="string">"%lf"</span>, &amp;a);

    writef(<span class="string">"What is b? "</span>);
    scanf(<span class="string">"%lf"</span>, &amp;b);

    writef(<span class="string">"What is c? "</span>);
    scanf(<span class="string">"%lf"</span>, &amp;c);

    writefln(<span class="string">"\nFor a = %s, b = %s, c = %s:"</span>, a, b, c);


    d = (b*b) - (<span class="number">4</span>*a*c);

    <span class="keyword">if</span> (d &lt; <span class="number">0) </span>  
        writefln(<span class="string">"There are no real roots."</span>);
    <span class="keyword">else</span>
    {
        <span class="keyword">double</span> r1, r2;

        r1 = (-b - sqrt ( d )) / (<span class="number">2</span>*a);
        r2 = (-b + sqrt ( d )) / (<span class="number">2</span>*a);

        <span class="keyword">if</span>(r1 == r2)
            writefln(<span class="string">"Root: %s"</span>, r1);
        <span class="keyword">else</span>
            writefln(<span class="string">"Roots: %s, %s"</span>, r1, r2);
    }
    <span class="keyword">return</span> <span class="number">0;
</span>


    <span class="comment">/* 

    For the quadratic equation: ax^2 + bx + c = 0
    Roots =  (-b +/- sqrt ( b^2 - 4ac )) / 2a

    For example:
    a = 1, b = -5, c = 6 
    The roots are 2 and 3.

    */</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex38">Function</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Using a function, you can code it once and then call it when you need it, wherever you need it.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">uint</span> squareIt(<span class="keyword">uint</span> x)
{
    <span class="keyword">return</span> x * x;
}


<span class="keyword">void</span> main()
{
    <span class="keyword">int</span> i;
    printf(<span class="string">"%d\t(initial value)\n"</span>, i);


    i = squareIt(<span class="number">3</span>);
    printf(<span class="string">"%d\t(3 * 3)\n"</span>, i);

    i = squareIt(<span class="number">4</span>);
    printf(<span class="string">"%d\t(4 * 4)\n"</span>, i);

    i = squareIt(<span class="number">5</span>);
    printf(<span class="string">"%d\t(5 * 5)\n"</span>, i);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex39">Nested Functions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Nested functions allows you to structure functions in a clever way if that's how your mind works.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

    File:       nested.d
    Author:     J C Calvarese, http://jcc_7.tripod.com/d/
    License:    Public Domain
    Purpose:    To show how nested functions work in D.

See also the D Specification.

*/</span>




<span class="keyword">int</span> main(<span class="keyword">char</span>[][] Args)
{
    <span class="keyword">int</span> i;

    <span class="keyword">void</span> runIt()
    {
        <span class="comment">/* 
            This is a nested function.
            You can make use of variables
            declared in the outer function,
            but each has to be declared above
            the location of the nested function
            if you use it.
        */</span>
    
        printf(<span class="string">"%d\tdo something\t"</span>, i);

    }


    <span class="keyword">bit</span> found;

    <span class="keyword">while</span> (!found)
    {

        <span class="keyword">if</span>(i==<span class="number">0)
</span>

        {
            printf(<span class="string">"not found\t"</span>);
            runIt();
            <span class="keyword">return</span> <span class="number">0;
</span>

        }
        found = <span class="keyword">true</span>;

    }

    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex41">Struct</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Structs allow you to bind together basic data types into a more complicated paradigm.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio;


<span class="keyword">struct</span> Vehicle
{  
    <span class="keyword">double</span> cost;
    <span class="keyword">int</span> wheels;
}


<span class="keyword">struct</span> Utensil
{ 
    <span class="keyword">bit</span> pointy;
    <span class="keyword">bit</span> tined;  
}



<span class="keyword">void</span> main()
{  
    
    Vehicle car;
    car.cost = <span class="number">20_000</span>;
    car.wheels = <span class="number">4</span>;
    
    Vehicle motorcycle;
    motorcycle.cost = <span class="number">2_000</span>;
    motorcycle.wheels = <span class="number">2</span>;
    
    Vehicle boat;
    boat.cost = <span class="number">5_000</span>; 
    boat.wheels = <span class="number">0;
</span>

    Utensil spoon;
    spoon.pointy = <span class="keyword">false</span>;
    spoon.tined = <span class="keyword">false</span>;
    
    Utensil fork;
    fork.pointy = <span class="keyword">true</span>;
    fork.tined = <span class="keyword">true</span>;
    
    Utensil knife;
    knife.pointy = <span class="keyword">true</span>;
    knife.tined = <span class="keyword">false</span>;
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex66">Struct Initialization</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows a quick way to initialize a struct.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
From: Vathix
Subject: Re: new struct initializer syntax
Date: Fri, 30 Jan 2004 06:42:53 -0500
Xref: digitalmars.com D:22815
http://www.digitalmars.com/drn-bin/wwwnews?D/22815
*/</span>

<span class="keyword">struct</span> Foo
{
    <span class="keyword">int</span> bar, baz, bam;
}

<span class="keyword">void</span> main()
{

<span class="keyword">static</span> Foo[] myfoo =  [
    { <span class="number">0, </span><span class="number">1</span>, <span class="number">2</span> },
    { bar: <span class="number">3</span>, baz: <span class="number">4</span>, bam: <span class="number">5</span> },
    { bam: <span class="number">8</span>, baz: <span class="number">7</span>, bar: <span class="number">6</span> },
];

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex40">Class</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A class is a similiar idea to a struct, but allows more abstract designs.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio;


<span class="keyword">class</span> Television
{ 
    
    <span class="keyword">void</span> pressPowerButton()
    {
        <span class="keyword">if</span>(m_turnedOn)
            printf(<span class="string">"It was on, but now you turned it off.\n"</span>);  
        <span class="keyword">else</span>
            printf(<span class="string">"Now, it's turned on (channel %d).\n"</span>, m_channel);
        m_turnedOn = !m_turnedOn;
    }
    
    <span class="keyword">void</span> changeChannel(<span class="keyword">int</span> c)
    {  
        <span class="keyword">if</span>(m_turnedOn)
        {
            <span class="keyword">if</span>(c == m_channel)
                printf(<span class="string">"It's already on channel %d, silly.\n"</span>, m_channel);
            <span class="keyword">else</span>
            { 
                printf(<span class="string">"Per your request, it's now on channel %d.\n"</span>, m_channel);
                m_channel = c;
            }
        }
        <span class="keyword">else</span>
            printf(<span class="string">"Hmm... the TV's off. Try turning it on before you pick a channel.\n"</span>, m_channel);
                
    }
    
    <span class="keyword">this</span>()
    {
        m_turnedOn = <span class="keyword">false</span>;  
        m_channel = <span class="number">3</span>;
        printf(<span class="string">"\n(Creating this object is kind of like plugging in a TV set.)\n\n"</span>);
    }
    
    ~<span class="keyword">this</span>()
    { 
        printf(<span class="string">"\n(Destroying this object is kind of like unplugging a TV set.)\n\n"</span>);
    }
    
    <span class="keyword">private</span>
    {  
        <span class="keyword">bit</span> m_turnedOn;
        <span class="keyword">int</span> m_channel;
    }
}


<span class="keyword">void</span> main()
{ 
    
    Television BigScreen = <span class="keyword">new</span> Television();
    
    BigScreen.pressPowerButton();
    BigScreen.changeChannel(<span class="number">44</span>);
    BigScreen.changeChannel(<span class="number">49</span>);
    BigScreen.changeChannel(<span class="number">49</span>);
    BigScreen.pressPowerButton();
    BigScreen.changeChannel(<span class="number">34</span>);
    BigScreen.pressPowerButton();
    BigScreen.changeChannel(<span class="number">34</span>);
    BigScreen.changeChannel(<span class="number">49</span>);
    BigScreen.pressPowerButton();
    
    <span class="keyword">delete</span> BigScreen;
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex82">Appending</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how appending works with D dynamic strings.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{
    <span class="keyword">char</span>[] s;
    printf(<span class="string">"Length: %d\tString: '%.*s'\n"</span>, s.length, s);

    s ~= <span class="string">"something "</span>;
    printf(<span class="string">"Length: %d\tString: '%.*s'\n"</span>, s.length, s);

    s ~= <span class="string">"whatever"</span>;
    printf(<span class="string">"Length: %d\tString: '%.*s'\n"</span>, s.length, s);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex35">Assertions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>If you can determine it's wrong at compile-time, why bother running it?</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 
    File:       assert.d
    Author:     Justin C. Calvarese, http://jcc_7.tripod.com/d/
    License:    Public Domain
    Purpose:    Demonstrates what an assertion does in D.

     See also the D Specification (http://www.digitalmars.com/d/expression.html#assertexpression).

*/</span>
 


<span class="keyword">void</span> main()
{  

    printf(<span class="string">"Let's test some assertions...\n"</span>);

    <span class="comment">/* These assertions should succeed --
       they evaluate to true. */</span>

    <span class="keyword">assert</span>(<span class="keyword">true</span>);
    <span class="keyword">assert</span>(<span class="string">'\xAA'</span> == <span class="string">'\u00AA'</span>);
    <span class="keyword">assert</span>(<span class="number">221</span> % <span class="number">5</span> == <span class="number">1</span>);
    <span class="keyword">assert</span>(<span class="number">25</span> * <span class="number">4</span> * <span class="number">20</span> + <span class="number">4</span> == <span class="number">2004</span>);
    
    <span class="comment">/*  
        This assertion fails... 
        Error: AssertError Failure assert.d(line number) 
    */</span>
    
    <span class="keyword">assert</span>(<span class="keyword">false</span>);
    
    printf(<span class="string">"\nNo problem, man.\n"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex72">Unittests</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Unittests let you find the bugs before you even run the program.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">module</span> unittests;

<span class="keyword">void</span> main()
{
    printf(<span class="string">"test\n"</span>);
    <span class="comment">/* This assertion will fail. */</span>
    <span class="keyword">assert</span>(<span class="keyword">false</span>);  

    <span class="comment">/* 
        The line number (7) may be different, but this is the 
        error message which should appear...
        Error: AssertError Failure unittests(7)
    */</span>

}


<span class="keyword">class</span> Whatever
{
   
    <span class="keyword">unittest</span>
    
    {
        <span class="comment">/*  unittests seem to be run in the order they appear in the code, i.e. since 
            the Whatever class appears before the module unittests, these are run first. 

            The -unittests flag has to be used to compile this program or else this code is ignored.
        

            This sample batch file compiles the code (including unittests) and then runs the executable.

            @echo off
            dmd unittests.d -unittest &amp;&amp; unittests.exe
            pause
        */</span>

        printf(<span class="string">"class Whatever UnitTest...\n"</span>);
        <span class="comment">/* If the expession of an assert doesn't evaluate to true, an exception is thrown at run-time. */</span>

        <span class="keyword">assert</span>(<span class="keyword">true</span>==<span class="number">1</span>);
        <span class="keyword">assert</span>(<span class="keyword">true</span>);
        <span class="keyword">assert</span>(<span class="keyword">false</span>==<span class="keyword">false</span>);
        <span class="keyword">assert</span>(!<span class="keyword">false</span>);
    }
}


<span class="keyword">unittest</span>
{
    printf(<span class="string">"module UnitTest...\n"</span>);
    <span class="keyword">assert</span>(<span class="keyword">true</span>==<span class="number">1</span>);
    <span class="keyword">assert</span>(<span class="keyword">true</span>);
    <span class="keyword">assert</span>(<span class="keyword">false</span>==<span class="keyword">false</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex42">Getch/Getchar</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Get a character from the keyboard.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.string;



<span class="keyword">void</span> main()
{ 
    <span class="keyword">char</span> k;

    printf(<span class="string">"\nI'm going to ask you to press 10 keys (I promise it's painless).\n"</span>
    <span class="string">"Certain keys don't count, but the whole alphabet is fair game.\n\n"</span>);

    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0; </span>i&lt;<span class="number">10</span>; i++)
    {
        <span class="keyword">version</span>(Windows)
        {
            printf(<span class="string">"Press key: %d\t"</span>, i);
            k = getch();
        }
        <span class="keyword">version</span>(Linux)
        {
            printf(<span class="string">"Press key (follow with return): %d\t"</span>, i);
            k = getchar();
        }
        printf(<span class="string">"[%c]\t"</span>, k);            <span class="comment">/* print the character pressed */</span>
        printf(<span class="string">"[%d]\n"</span>, <span class="keyword">cast</span>(<span class="keyword">int</span>) k);  <span class="comment">/* print ASCII code for key */</span>
    }
    printf(<span class="string">"\nThe End.\n\n"</span>);
}</code></pre>
<p><b>2004-06-01:</b> Added an untested Linux version based on a <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/2383">suggestion</a>.</p>
</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Intermediate</h3><h4 id="ex143">Using more than one function</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This D program shows you how to use more than one function in D.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
    Multiple functions in D
    By B-man
    If you have any comments or questions e-mail me at
    bman_099@yahoo.com
*/</span>

<span class="keyword">import</span> std.c.stdio;      <span class="comment">//Use the standard C library stdio</span>

<span class="keyword">int</span> main()       <span class="comment">//main function</span>
{
    <span class="keyword">char</span> input_text[<span class="number">26</span>];     <span class="comment">//Create an array that will hold the input </span>
    printf (<span class="string">"Now using the main() function\n"</span>);
    printf (<span class="string">"type somthing and press ENTER "</span>);  
    scanf (<span class="string">"%*.s"</span>,input_text[<span class="number">25</span>]);   <span class="comment">//Scanf function. allows user input.</span>
    function2();  <span class="comment">//call the 'function2()' function</span>
    <span class="keyword">return</span> <span class="number">0; </span> <span class="comment">//don't return an error</span>
}

function2()  <span class="comment">//function2() function</span>
{
    printf (<span class="string">"now using the function2() function\n"</span>);
    <span class="keyword">return</span> <span class="number">0; </span><span class="comment">//don't return an error</span>
}

<span class="comment">/* Originally submitted by bman_099@yahoo.com (Sat Feb 5, 2005 3:15 pm). */</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex103">Character Initial Values</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Tests the initial values for character types.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{
    <span class="keyword">if</span>(<span class="keyword">char</span>.init == <span class="number">0)
</span>
        printf(<span class="string">"DMD 0.92 char.init.\n"</span>);
    <span class="keyword">if</span>(<span class="keyword">wchar</span>.init == <span class="number">0)
</span>
        printf(<span class="string">"DMD 0.92 wchar.init.\n"</span>);
    <span class="keyword">if</span>(<span class="keyword">dchar</span>.init == <span class="number">0)
</span>
        printf(<span class="string">"DMD 0.92 dchar.init.\n"</span>);

    <span class="keyword">if</span>(<span class="keyword">char</span>.init == <span class="number">0xFF</span>)
        printf(<span class="string">"DMD 0.93+ char.init.\n"</span>);
    <span class="keyword">if</span>(<span class="keyword">wchar</span>.init == <span class="number">0xFFFF</span>)
        printf(<span class="string">"DMD 0.93+ wchar.init.\n"</span>);
    <span class="keyword">if</span>(<span class="keyword">wchar</span>.init == <span class="number">0x0000FFFF</span>)
        printf(<span class="string">"DMD 0.93+ dchar.init.\n"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex126">Module usage</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Simple
decoder and encoder with 8bit and 16bit lookups in separate module with
initialization. Also demonstrates associative arrays, foreach. and bit
array.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// There are two separate source code files to be split.</span>
<span class="comment">// Test.d -- compile with dmd test.d Lookup.d</span>

<span class="comment">/*
 * Encoding:
 * Each word in a text is checked whether it is found in a 256 entry
 * dictionary08 (8 bits) or 512 entry dictionary16 (16 bits). A bit array
 * called "eightCode" is used to indicate which dictionary contained
 * the word. Associative arrays are used for the dictionaries.
 * "codes08" is an array of bytes with the sequence of 'hits' from
 * dictionary08. "codes16" is an array of ushorts with the sequence of
 * 'hits' from dictionary16.
 *
 * Decoding:
 * The "eightCode" bit array is traversed. If true, the corresponding word
 * is pulled from lookup08. If false, the corresponding word is pulled from
 * lookup16. The original "text" is compared with "check" for validation.
 *
 * Caveats:
 * - written by relatively inexperienced D programmer
 * - accomplishes so-so compression with fast decompression
 * 
 * Visual Studio 98 ide project files, exe, and full source available from:
 * http://bibledb.sourceforge.net/misc/ModuleTutorial.zip
 */</span>

<span class="keyword">import</span> Lookup;

<span class="keyword">import</span> std.stdio;
<span class="keyword">import</span> std.string;

<span class="keyword">const</span> <span class="keyword">char</span>[][] check  = [<span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>];
<span class="keyword">const</span> <span class="keyword">char</span>[][] text   = [<span class="string">"In"</span>, <span class="string">"the"</span>, <span class="string">"beginning"</span>, <span class="string">"God"</span>, <span class="string">"created"</span>, 
                         <span class="string">"the"</span>, <span class="string">"heavens"</span>, <span class="string">"and"</span>, <span class="string">"the"</span>, <span class="string">"earth."</span>];

<span class="keyword">ubyte</span>[<span class="number">10</span>]  codes08;
<span class="keyword">ushort</span>[<span class="number">10</span>] codes16;
<span class="keyword">bit</span>[<span class="number">10</span>]    eightCode;

<span class="keyword">void</span> main()
{
  Encode();

  Decode();
}

<span class="keyword">void</span> Encode()
{
  <span class="keyword">int</span>  i8 = <span class="number">0;
</span>
  <span class="keyword">int</span>  i16 = <span class="number">0;
</span>
  <span class="keyword">foreach</span> (<span class="keyword">int</span> i, <span class="keyword">char</span>[] word; text) {
    <span class="keyword">debug</span> <span class="keyword">char</span>* w = word;
    <span class="keyword">if</span> (word <span class="keyword">in</span> dictionary08) {
      <span class="keyword">uint</span> code08 = dictionary08[word];
      writef(<span class="string">"8:"</span>, code08, <span class="string">' '</span>);
      codes08[i8] = code08;
      i8++;
      eightCode[i] = <span class="keyword">true</span>;
      <span class="keyword">continue</span>;
    }
    <span class="keyword">if</span> (word <span class="keyword">in</span> dictionary16) {
      <span class="keyword">uint</span> code16 = dictionary16[word];
      writef(<span class="string">"16:"</span>, code16, <span class="string">' '</span>);
      codes16[i16] = code16;
      i16++;
      eightCode[i] = <span class="keyword">false</span>;
      <span class="keyword">continue</span>;
    }
    writefln(<span class="string">"\nUnmatched word: "</span>, word);
  }
  writefln();
}

<span class="keyword">void</span> Decode()
{
  <span class="keyword">int</span> i8 = <span class="number">0;
</span>
  <span class="keyword">int</span> i16 = <span class="number">0;
</span>

  <span class="keyword">foreach</span>(<span class="keyword">int</span> i, <span class="keyword">bit</span> b; eightCode) {
    <span class="keyword">char</span>[] curWord;
    <span class="keyword">if</span> (b == <span class="keyword">true</span>) {
      curWord = lookup08[codes08[i8]];
      check[i] = curWord;
      writefln(curWord, <span class="string">' '</span>);
      i8++;
    }
    <span class="keyword">else</span> {
      curWord = lookup16[codes16[i16]];
      check[i] = curWord;
      writefln(curWord, <span class="string">' '</span>);
      i16++;
    }
  }
  writefln();
  <span class="keyword">assert</span>(check == text);
}



<span class="comment">// Lookup.d</span>
<span class="keyword">module</span> Lookup;

<span class="keyword">static</span> <span class="keyword">this</span>() {
  <span class="keyword">foreach</span> (<span class="keyword">int</span> index, <span class="keyword">char</span>[] word; lookup08) {
    dictionary08[word] = index;
  }
  <span class="keyword">foreach</span> (<span class="keyword">int</span> index, <span class="keyword">char</span>[] word; lookup16) {
    dictionary16[word] = index;
  }
  dictionary08.rehash;
  dictionary16.rehash;
}
<span class="keyword">int</span>[<span class="keyword">char</span>[]] dictionary08;
<span class="keyword">int</span>[<span class="keyword">char</span>[]] dictionary16;

<span class="keyword">char</span>[][] lookup08 = [
<span class="string">"the"</span>,<span class="string">"and"</span>,<span class="string">"of"</span>,<span class="string">"to"</span>,<span class="string">"in"</span>,<span class="string">"that"</span>,<span class="string">"And"</span>,<span class="string">"he"</span>,
<span class="string">"a"</span>,<span class="string">"I"</span>,<span class="string">"his"</span>,<span class="string">"for"</span>,<span class="string">"shall"</span>,<span class="string">"is"</span>,<span class="string">"be"</span>,<span class="string">"you"</span>,
<span class="string">"they"</span>,<span class="string">"with"</span>,<span class="string">"will"</span>,<span class="string">"not"</span>,<span class="string">"all"</span>,<span class="string">"your"</span>,<span class="string">"have"</span>,<span class="string">"was"</span>,
<span class="string">"my"</span>,<span class="string">"it"</span>,<span class="string">"from"</span>,<span class="string">"their"</span>,<span class="string">"on"</span>,<span class="string">"are"</span>,<span class="string">"which"</span>,<span class="string">"unto"</span>,
<span class="string">"them"</span>,<span class="string">"him"</span>,<span class="string">"as"</span>,<span class="string">"were"</span>,<span class="string">"who"</span>,<span class="string">"by"</span>,<span class="string">"said"</span>,<span class="string">"out"</span>,
<span class="string">"but"</span>,<span class="string">"had"</span>,<span class="string">"when"</span>,<span class="string">"this"</span>,<span class="string">"God"</span>,<span class="string">"The"</span>,<span class="string">"up"</span>,<span class="string">"came"</span>,
<span class="string">"into"</span>,<span class="string">"man"</span>,<span class="string">"him,"</span>,<span class="string">"one"</span>,<span class="string">"there"</span>,<span class="string">"thy"</span>,<span class="string">"thou"</span>,<span class="string">"me"</span>,
<span class="string">"said,"</span>,<span class="string">"come"</span>,<span class="string">"made"</span>,<span class="string">"before"</span>,<span class="string">"no"</span>,<span class="string">"king"</span>,<span class="string">"For"</span>,<span class="string">"has"</span>,
<span class="string">"against"</span>,<span class="string">"son"</span>,<span class="string">"But"</span>,<span class="string">"children"</span>,<span class="string">"put"</span>,<span class="string">"at"</span>,<span class="string">"LORD"</span>,<span class="string">"went"</span>,
<span class="string">"we"</span>,<span class="string">"them,"</span>,<span class="string">"you,"</span>,<span class="string">"an"</span>,<span class="string">"her"</span>,<span class="string">"ye"</span>,<span class="string">"Lord"</span>,<span class="string">"go"</span>,
<span class="string">"give"</span>,<span class="string">"may"</span>,<span class="string">"make"</span>,<span class="string">"Then"</span>,<span class="string">"do"</span>,<span class="string">"let"</span>,<span class="string">"people"</span>,<span class="string">"house"</span>,
<span class="string">"He"</span>,<span class="string">"land"</span>,<span class="string">"or"</span>,<span class="string">"so"</span>,<span class="string">"saying,"</span>,<span class="string">"men"</span>,<span class="string">"our"</span>,<span class="string">"me,"</span>,
<span class="string">"even"</span>,<span class="string">"because"</span>,<span class="string">"if"</span>,<span class="string">"upon"</span>,<span class="string">"Israel"</span>,<span class="string">"also"</span>,<span class="string">"every"</span>,<span class="string">"day"</span>,
<span class="string">"after"</span>,<span class="string">"take"</span>,<span class="string">"over"</span>,<span class="string">"these"</span>,<span class="string">"beginning"</span>,<span class="string">"great"</span>,<span class="string">"took"</span>,<span class="string">"among"</span>,
<span class="string">"down"</span>,<span class="string">"am"</span>,<span class="string">"did"</span>,<span class="string">"those"</span>,<span class="string">"hath"</span>,<span class="string">"sons"</span>,<span class="string">"like"</span>,<span class="string">"she"</span>,
<span class="string">"O"</span>,<span class="string">"gave"</span>,<span class="string">"us"</span>,<span class="string">"things"</span>,<span class="string">"what"</span>,<span class="string">"So"</span>,<span class="string">"hand"</span>,<span class="string">"him."</span>,
<span class="string">"away"</span>,<span class="string">"Israel,"</span>,<span class="string">"two"</span>,<span class="string">"any"</span>,<span class="string">"sent"</span>,<span class="string">"then"</span>,<span class="string">"Jehovah"</span>,<span class="string">"Now"</span>,
<span class="string">"Jesus"</span>,<span class="string">"whom"</span>,<span class="string">"Yahweh"</span>,<span class="string">"given"</span>,<span class="string">"They"</span>,<span class="string">"David"</span>,<span class="string">"brought"</span>,<span class="string">"them."</span>,
<span class="string">"been"</span>,<span class="string">"name"</span>,<span class="string">"say"</span>,<span class="string">"shalt"</span>,<span class="string">"word"</span>,<span class="string">"according"</span>,<span class="string">"thee"</span>,<span class="string">"it,"</span>,
<span class="string">"you."</span>,<span class="string">"know"</span>,<span class="string">"saw"</span>,<span class="string">"forth"</span>,<span class="string">"nor"</span>,<span class="string">"see"</span>,<span class="string">"neither"</span>,<span class="string">"should"</span>,
<span class="string">"good"</span>,<span class="string">"You"</span>,<span class="string">"evil"</span>,<span class="string">"its"</span>,<span class="string">"LORD,"</span>,<span class="string">"set"</span>,<span class="string">"through"</span>,<span class="string">"days"</span>,
<span class="string">"Lord,"</span>,<span class="string">"me."</span>,<span class="string">"place"</span>,<span class="string">"about"</span>,<span class="string">"now"</span>,<span class="string">"bring"</span>,<span class="string">"therefore"</span>,<span class="string">"If"</span>,
<span class="string">"Let"</span>,<span class="string">"hundred"</span>,<span class="string">"more"</span>,<span class="string">"than"</span>,<span class="string">"would"</span>,<span class="string">"people,"</span>,<span class="string">"behold,"</span>,<span class="string">"heart"</span>,
<span class="string">"thee,"</span>,<span class="string">"Moses"</span>,<span class="string">"holy"</span>,<span class="string">"father"</span>,<span class="string">"way"</span>,<span class="string">"keep"</span>,<span class="string">"saith"</span>,<span class="string">"God."</span>,
<span class="string">"time"</span>,<span class="string">"done"</span>,<span class="string">"without"</span>,<span class="string">"words"</span>,<span class="string">"own"</span>,<span class="string">"heard"</span>,<span class="string">"called"</span>,<span class="string">"it."</span>,
<span class="string">"When"</span>,<span class="string">"three"</span>,<span class="string">"might"</span>,<span class="string">"where"</span>,<span class="string">"Behold,"</span>,<span class="string">"seven"</span>,<span class="string">"taken"</span>,<span class="string">"other"</span>,
<span class="string">"In"</span>,<span class="string">"under"</span>,<span class="string">"It"</span>,<span class="string">"man,"</span>,<span class="string">"yet"</span>,<span class="string">"say,"</span>,<span class="string">"hast"</span>,<span class="string">"thousand"</span>,
<span class="string">"right"</span>,<span class="string">"earth"</span>,<span class="string">"first"</span>,<span class="string">"This"</span>,<span class="string">"offering"</span>,<span class="string">"eat"</span>,<span class="string">"Judah"</span>,<span class="string">"house,"</span>,
<span class="string">"many"</span>,<span class="string">"how"</span>,<span class="string">"again"</span>,<span class="string">"off"</span>,<span class="string">"city"</span>,<span class="string">"himself"</span>,<span class="string">"whose"</span>,<span class="string">"cast"</span>,
<span class="string">"eyes"</span>,<span class="string">"back"</span>,<span class="string">"Israel."</span>,<span class="string">"servant"</span>,<span class="string">"full"</span>,<span class="string">"Thus"</span>,<span class="string">"years"</span>,<span class="string">"voice"</span>,
<span class="string">"Yahweh,"</span>,<span class="string">"Jehovah,"</span>,<span class="string">"cut"</span>,<span class="string">"hands"</span>,<span class="string">"fear"</span>,<span class="string">"work"</span>,<span class="string">"turned"</span>,<span class="string">"cause"</span>,
<span class="string">"servants"</span>,<span class="string">"high"</span>,<span class="string">"Therefore"</span>,<span class="string">"says"</span>,<span class="string">"What"</span>,<span class="string">"young"</span>,<span class="string">"until"</span>,<span class="string">"priest"</span>
];

<span class="keyword">char</span>[][] lookup16 = [
<span class="string">"created"</span>,<span class="string">"day,"</span>,<span class="string">"commanded"</span>,<span class="string">"send"</span>,<span class="string">"land,"</span>,<span class="string">"same"</span>,<span class="string">"pass"</span>,<span class="string">"face"</span>,
<span class="string">"Judah,"</span>,<span class="string">"end"</span>,<span class="string">"glory"</span>,<span class="string">"thing"</span>,<span class="string">"together"</span>,<span class="string">"up,"</span>,<span class="string">"My"</span>,<span class="string">"five"</span>,
<span class="string">"found"</span>,<span class="string">"round"</span>,<span class="string">"death"</span>,<span class="string">"them;"</span>,<span class="string">"us,"</span>,<span class="string">"living"</span>,<span class="string">"men,"</span>,<span class="string">"answered"</span>,
<span class="string">"speak"</span>,<span class="string">"As"</span>,<span class="string">"blood"</span>,<span class="string">"A"</span>,<span class="string">"thine"</span>,<span class="string">"seen"</span>,<span class="string">"four"</span>,<span class="string">"toward"</span>,
<span class="string">"being"</span>,<span class="string">"fire"</span>,<span class="string">"law"</span>,<span class="string">"son,"</span>,<span class="string">"hand,"</span>,<span class="string">"old"</span>,<span class="string">"very"</span>,<span class="string">"priests"</span>,
<span class="string">"year"</span>,<span class="string">"side"</span>,<span class="string">"life"</span>,<span class="string">"king,"</span>,<span class="string">"earth,"</span>,<span class="string">"themselves"</span>,<span class="string">"sin"</span>,<span class="string">"Jerusalem,"</span>,
<span class="string">"rest"</span>,<span class="string">"love"</span>,<span class="string">"soul"</span>,<span class="string">"Who"</span>,<span class="string">"cities"</span>,<span class="string">"another"</span>,<span class="string">"Jerusalem"</span>,<span class="string">"Moses,"</span>,
<span class="string">"her,"</span>,<span class="string">"Saul"</span>,<span class="string">"dwell"</span>,<span class="string">"There"</span>,<span class="string">"woman"</span>,<span class="string">"some"</span>,<span class="string">"All"</span>,<span class="string">"both"</span>,
<span class="string">"Christ"</span>,<span class="string">"LORD."</span>,<span class="string">"Thou"</span>,<span class="string">"get"</span>,<span class="string">"gone"</span>,<span class="string">"fathers"</span>,<span class="string">"much"</span>,<span class="string">"kept"</span>,
<span class="string">"chief"</span>,<span class="string">"Egypt,"</span>,<span class="string">"hear"</span>,<span class="string">"become"</span>,<span class="string">"These"</span>,<span class="string">"stood"</span>,<span class="string">"kingdom"</span>,<span class="string">"him;"</span>,
<span class="string">"daughter"</span>,<span class="string">"between"</span>,<span class="string">"pass,"</span>,<span class="string">"became"</span>,<span class="string">"Son"</span>,<span class="string">"none"</span>,<span class="string">"part"</span>,<span class="string">"only"</span>,
<span class="string">"strong"</span>,<span class="string">"king's"</span>,<span class="string">"knowledge"</span>,<span class="string">"having"</span>,<span class="string">"nations"</span>,<span class="string">"such"</span>,<span class="string">"left"</span>,<span class="string">"burnt"</span>,
<span class="string">"ten"</span>,<span class="string">"flesh"</span>,<span class="string">"able"</span>,<span class="string">"them:"</span>,<span class="string">"mouth"</span>,<span class="string">"head"</span>,<span class="string">"tell"</span>,<span class="string">"near"</span>,
<span class="string">"told"</span>,<span class="string">"certain"</span>,<span class="string">"That"</span>,<span class="string">"twenty"</span>,<span class="string">"little"</span>,<span class="string">"you;"</span>,<span class="string">"spake"</span>,<span class="string">"him:"</span>,
<span class="string">"concerning"</span>,<span class="string">"Why"</span>,<span class="string">"spoke"</span>,<span class="string">"midst"</span>,<span class="string">"till"</span>,<span class="string">"power"</span>,<span class="string">"Because"</span>,<span class="string">"laid"</span>,
<span class="string">"We"</span>,<span class="string">"city,"</span>,<span class="string">"spirit"</span>,<span class="string">"turn"</span>,<span class="string">"David,"</span>,<span class="string">"you:"</span>,<span class="string">"faith"</span>,<span class="string">"bread"</span>,
<span class="string">"Aaron"</span>,<span class="string">"delivered"</span>,<span class="string">"and,"</span>,<span class="string">"thus"</span>,<span class="string">"tribe"</span>,<span class="string">"altar"</span>,<span class="string">"mine"</span>,<span class="string">"while"</span>,
<span class="string">"gathered"</span>,<span class="string">"thereof"</span>,<span class="string">"deliver"</span>,<span class="string">"heaven"</span>,<span class="string">"number"</span>,<span class="string">"thee."</span>,<span class="string">"Solomon"</span>,<span class="string">"Lord."</span>,
<span class="string">"seed"</span>,<span class="string">"earth."</span>,<span class="string">"mighty"</span>,<span class="string">"me:"</span>,<span class="string">"far"</span>,<span class="string">"drink"</span>,<span class="string">"thereof,"</span>,<span class="string">"long"</span>,
<span class="string">"me;"</span>,<span class="string">"water"</span>,<span class="string">"day."</span>,<span class="string">"people."</span>,<span class="string">"heart,"</span>,<span class="string">"peace"</span>,<span class="string">"Jacob"</span>,<span class="string">"comes"</span>,
<span class="string">"wise"</span>,<span class="string">"waters"</span>,<span class="string">"praise"</span>,<span class="string">"can"</span>,<span class="string">"Go"</span>,<span class="string">"things,"</span>,<span class="string">"pray"</span>,<span class="string">"father,"</span>,
<span class="string">"out,"</span>,<span class="string">"food"</span>,<span class="string">"destroy"</span>,<span class="string">"whole"</span>,<span class="string">"fell"</span>,<span class="string">"not,"</span>,<span class="string">"lay"</span>,<span class="string">"come,"</span>,
<span class="string">"brother"</span>,<span class="string">"sword"</span>,<span class="string">"offer"</span>,<span class="string">"art"</span>,<span class="string">"seek"</span>,<span class="string">"lifted"</span>,<span class="string">"wrath"</span>,<span class="string">"well"</span>,
<span class="string">"heaven,"</span>,<span class="string">"ark"</span>,<span class="string">"To"</span>,<span class="string">"How"</span>,<span class="string">"six"</span>,<span class="string">"angel"</span>,<span class="string">"wife"</span>,<span class="string">"wicked"</span>,
<span class="string">"nothing"</span>,<span class="string">"spoken"</span>,<span class="string">"though"</span>,<span class="string">"mercy"</span>,<span class="string">"gold"</span>,<span class="string">"does"</span>,<span class="string">"covenant"</span>,<span class="string">"broken"</span>,
<span class="string">"fathers,"</span>,<span class="string">"place,"</span>,<span class="string">"it;"</span>,<span class="string">"away,"</span>,<span class="string">"land."</span>,<span class="string">"light"</span>,<span class="string">"house."</span>,<span class="string">"why"</span>,
<span class="string">"burned"</span>,<span class="string">"dead"</span>,<span class="string">"Of"</span>,<span class="string">"stand"</span>,<span class="string">"unclean"</span>,<span class="string">"Egypt"</span>,<span class="string">"silver"</span>,<span class="string">"Take"</span>,
<span class="string">"fruit"</span>,<span class="string">"third"</span>,<span class="string">"new"</span>,<span class="string">"don't"</span>,<span class="string">"save"</span>,<span class="string">"Spirit"</span>,<span class="string">"ever."</span>,<span class="string">"surely"</span>,
<span class="string">"God;"</span>,<span class="string">"down,"</span>,<span class="string">"Is"</span>,<span class="string">"Give"</span>,<span class="string">"now,"</span>,<span class="string">"sight"</span>,<span class="string">"Joshua"</span>,<span class="string">"gold,"</span>,
<span class="string">"inhabitants"</span>,<span class="string">"offerings"</span>,<span class="string">"Jerusalem."</span>,<span class="string">"written"</span>,<span class="string">"ear"</span>,<span class="string">"got"</span>,<span class="string">"brothers,"</span>,<span class="string">"bear"</span>,
<span class="string">"family"</span>,<span class="string">"serve"</span>,<span class="string">"righteousness"</span>,<span class="string">"second"</span>,<span class="string">"return"</span>,<span class="string">"Jews"</span>,<span class="string">"Israel:"</span>,<span class="string">"way,"</span>,
<span class="string">"princes"</span>,<span class="string">"walk"</span>,<span class="string">"didn't"</span>,<span class="string">"Holy"</span>,<span class="string">"places"</span>,<span class="string">"sons,"</span>,<span class="string">"works"</span>,<span class="string">"offering,"</span>,
<span class="string">"answer"</span>,<span class="string">"Yahweh."</span>,<span class="string">"sea"</span>,<span class="string">"disciples"</span>,<span class="string">"judge"</span>,<span class="string">"going"</span>,<span class="string">"fall"</span>,<span class="string">"this,"</span>,
<span class="string">"God:"</span>,<span class="string">"prophet"</span>,<span class="string">"desire"</span>,<span class="string">"war"</span>,<span class="string">"sat"</span>,<span class="string">"smote"</span>,<span class="string">"lest"</span>,<span class="string">"Levites"</span>,
<span class="string">"known"</span>,<span class="string">"us."</span>,<span class="string">"lord"</span>,<span class="string">"Israel;"</span>,<span class="string">"book"</span>,<span class="string">"Be"</span>,<span class="string">"daughters"</span>,<span class="string">"began"</span>,
<span class="string">"Your"</span>,<span class="string">"body"</span>,<span class="string">"His"</span>,<span class="string">"strength"</span>,<span class="string">"gives"</span>,<span class="string">"built"</span>,<span class="string">"righteous"</span>,<span class="string">"door"</span>,
<span class="string">"coming"</span>,<span class="string">"Jehovah."</span>,<span class="string">"Philistines"</span>,<span class="string">"still"</span>,<span class="string">"together,"</span>,<span class="string">"Christ,"</span>,<span class="string">"open"</span>,<span class="string">"hold"</span>,
<span class="string">"ever"</span>,<span class="string">"multitude"</span>,<span class="string">"begat"</span>,<span class="string">"Father"</span>,<span class="string">"you?"</span>,<span class="string">"days,"</span>,<span class="string">"call"</span>,<span class="string">"above"</span>,
<span class="string">"within"</span>,<span class="string">"gate"</span>,<span class="string">"Joseph"</span>,<span class="string">"thirty"</span>,<span class="string">"hand."</span>,<span class="string">"reigned"</span>,<span class="string">"waste"</span>,<span class="string">"men."</span>,
<span class="string">"cry"</span>,<span class="string">"priest,"</span>,<span class="string">"forty"</span>,<span class="string">"Jesus,"</span>,<span class="string">"yourselves"</span>,<span class="string">"twelve"</span>,<span class="string">"false"</span>,<span class="string">"eyes,"</span>,
<span class="string">"sea,"</span>,<span class="string">"feet"</span>,<span class="string">"passed"</span>,<span class="string">"it:"</span>,<span class="string">"child"</span>,<span class="string">"there,"</span>,<span class="string">"servant,"</span>,<span class="string">"death."</span>,
<span class="string">"receive"</span>,<span class="string">"find"</span>,<span class="string">"servants,"</span>,<span class="string">"wisdom"</span>,<span class="string">"name,"</span>,<span class="string">"time,"</span>,<span class="string">"ready"</span>,<span class="string">"poor"</span>,
<span class="string">"place."</span>,<span class="string">"field"</span>,<span class="string">"death,"</span>,<span class="string">"night"</span>,<span class="string">"Pharaoh"</span>,<span class="string">"tabernacle"</span>,<span class="string">"sword,"</span>,<span class="string">"again,"</span>,
<span class="string">"mother"</span>,<span class="string">"mount"</span>,<span class="string">"brothers"</span>,<span class="string">"month,"</span>,<span class="string">"prophets"</span>,<span class="string">"border"</span>,<span class="string">"One"</span>,<span class="string">"sacrifice"</span>,
<span class="string">"show"</span>,<span class="string">"could"</span>,<span class="string">"not."</span>,<span class="string">"never"</span>,<span class="string">"joy"</span>,<span class="string">"knew"</span>,<span class="string">"clear"</span>,<span class="string">"Abraham"</span>,
<span class="string">"whether"</span>,<span class="string">"witness"</span>,<span class="string">"build"</span>,<span class="string">"blessed"</span>,<span class="string">"cried"</span>,<span class="string">"I,"</span>,<span class="string">"makes"</span>,<span class="string">"throughout"</span>,
<span class="string">"vessels"</span>,<span class="string">"children,"</span>,<span class="string">"carried"</span>,<span class="string">"wine"</span>,<span class="string">"Do"</span>,<span class="string">"wife,"</span>,<span class="string">"enter"</span>,<span class="string">"returned"</span>,
<span class="string">"law,"</span>,<span class="string">"cubits"</span>,<span class="string">"middle"</span>,<span class="string">"goes"</span>,<span class="string">"life,"</span>,<span class="string">"By"</span>,<span class="string">"stone"</span>,<span class="string">"destruction"</span>,
<span class="string">"grace"</span>,<span class="string">"manner"</span>,<span class="string">"fifty"</span>,<span class="string">"ears"</span>,<span class="string">"received"</span>,<span class="string">"fire,"</span>,<span class="string">"worship"</span>,<span class="string">"dead,"</span>,
<span class="string">"Ye"</span>,<span class="string">"women"</span>,<span class="string">"help"</span>,<span class="string">"anger"</span>,<span class="string">"orders"</span>,<span class="string">"nations,"</span>,<span class="string">"me?"</span>,<span class="string">"seventh"</span>,
<span class="string">"inheritance"</span>,<span class="string">"filled"</span>,<span class="string">"also,"</span>,<span class="string">"elders"</span>,<span class="string">"voice,"</span>,<span class="string">"captain"</span>,<span class="string">"LORD:"</span>,<span class="string">"gather"</span>,
<span class="string">"asked"</span>,<span class="string">"father's"</span>,<span class="string">"saying"</span>,<span class="string">"prayer"</span>,<span class="string">"that,"</span>,<span class="string">"world"</span>,<span class="string">"town"</span>,<span class="string">"kill"</span>,
<span class="string">"ways"</span>,<span class="string">"offered"</span>,<span class="string">"cannot"</span>,<span class="string">"oil"</span>,<span class="string">"valley"</span>,<span class="string">"slew"</span>,<span class="string">"most"</span>,<span class="string">"hope"</span>,
<span class="string">"congregation"</span>,<span class="string">"here"</span>,<span class="string">"better"</span>,<span class="string">"priests,"</span>,
<span class="string">"himself,"</span>,<span class="string">"commandment"</span>,<span class="string">"sought"</span>,<span class="string">"silver,"</span>,
<span class="string">"Peter"</span>,<span class="string">"LORD;"</span>,<span class="string">"brethren,"</span>,<span class="string">"Babylon,"</span>,<span class="string">"true"</span>,<span class="string">"must"</span>,<span class="string">"sheep"</span>,<span class="string">"gods"</span>,
<span class="string">"Jeremiah"</span>,<span class="string">"looking"</span>,<span class="string">"half"</span>,<span class="string">"rose"</span>,<span class="string">"man's"</span>,<span class="string">"east"</span>,<span class="string">"covered"</span>,<span class="string">"Jacob,"</span>,
<span class="string">"meat"</span>,<span class="string">"fat"</span>,<span class="string">"burn"</span>,<span class="string">"another,"</span>,<span class="string">"male"</span>,<span class="string">"side,"</span>,<span class="string">"country"</span>,<span class="string">"captains"</span>,
<span class="string">"look"</span>,<span class="string">"there."</span>,<span class="string">"away."</span>,<span class="string">"named"</span>,<span class="string">"departed"</span>,<span class="string">"Babylon"</span>,<span class="string">"shut"</span>,<span class="string">"break"</span>,
<span class="string">"numbered"</span>,<span class="string">"meet"</span>,<span class="string">"king."</span>,<span class="string">"judgment"</span>,<span class="string">"Have"</span>,<span class="string">"brother,"</span>,<span class="string">"water,"</span>,<span class="string">"money"</span>,
<span class="string">"times"</span>,<span class="string">"Samuel"</span>,<span class="string">"King"</span>,<span class="string">"burning"</span>,<span class="string">"morning"</span>,<span class="string">"heads"</span>,<span class="string">"feast"</span>,<span class="string">"army"</span>,
<span class="string">"thee;"</span>,<span class="string">"seeing"</span>,<span class="string">"lie"</span>,<span class="string">"her."</span>,<span class="string">"families"</span>,<span class="string">"month"</span>,<span class="string">"Paul"</span>,<span class="string">"therefore,"</span>,
<span class="string">"iniquity"</span>,<span class="string">"houses"</span>,<span class="string">"Even"</span>,<span class="string">"Moreover"</span>,<span class="string">"Egypt."</span>,<span class="string">"She"</span>,<span class="string">"Aaron,"</span>,<span class="string">"wilderness"</span>,
<span class="string">"wall"</span>,<span class="string">"in,"</span>,<span class="string">"fine"</span>,<span class="string">"answered,"</span>,<span class="string">"flesh,"</span>,<span class="string">"words,"</span>,<span class="string">"die"</span>,<span class="string">"making"</span>,
<span class="string">"born"</span>,<span class="string">"sins"</span>,<span class="string">"night,"</span>,<span class="string">"wherein"</span>,<span class="string">"live"</span>,<span class="string">"appointed"</span>,<span class="string">"sound"</span>,<span class="string">"heavens"</span>
];</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex127">Asm code for splitting ubyte into low and high nibbles</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates using asm code with local variables</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 *  Copyright (C) 2004 by Digital Mars, www.digitalmars.com
 *  Written by Lynn Allan
 *  This software is provided 'as-is' by a rusty asm-486 programmer.
 *  Released to public domain.
 *
 * Compile with: dmd test.d (uses dmd ver 0.102)
 */</span>

<span class="keyword">import</span> std.stdio;

<span class="keyword">void</span> main ()
{
  <span class="keyword">ubyte</span> x = <span class="number">0x12</span>;
  <span class="keyword">ubyte</span> y = <span class="number">0x9a</span>;
  <span class="keyword">ubyte</span> xLoNibble = (x &amp; <span class="number">0x0F</span>);
  <span class="keyword">ubyte</span> xHiNibble = (x &gt;&gt; <span class="number">4</span>);
  <span class="keyword">ubyte</span> yLoNibble = (y &amp; <span class="number">0x0F</span>);
  <span class="keyword">ubyte</span> yHiNibble = (y &gt;&gt; <span class="number">4</span>);
  writefln(<span class="string">"x: "</span>, x, <span class="string">"  xLoNibble: "</span>, xLoNibble, <span class="string">"  xHiNibble: "</span>, xHiNibble);
  writefln(<span class="string">"y: "</span>, y, <span class="string">"  yLoNibble: "</span>, yLoNibble, <span class="string">"  yHiNibble: "</span>, yHiNibble);

  <span class="keyword">asm</span>
  {
    movzx  BX,x;
    mov    AX,BX;
    and    BX,<span class="number">15</span>;
    mov    xLoNibble,BL;
    shr    AX,<span class="number">4</span>;
    mov    xHiNibble,AL;

    movzx  BX,y;
    mov    AX,BX;
    and    BX,<span class="number">15</span>;
    mov    yLoNibble,BL;
    shr    AX,<span class="number">4</span>;
    mov    yHiNibble,AL;
  }
  <span class="keyword">assert</span>(xLoNibble == <span class="number">2</span>);
  <span class="keyword">assert</span>(xHiNibble == <span class="number">1</span>);
  <span class="keyword">assert</span>(yLoNibble == <span class="number">10</span>);
  <span class="keyword">assert</span>(yHiNibble == <span class="number">9</span>);
  writefln(<span class="string">"x: "</span>, x, <span class="string">"  xLoNibble: "</span>, xLoNibble, <span class="string">"  xHiNibble: "</span>, xHiNibble);
  writefln(<span class="string">"y: "</span>, y, <span class="string">"  yLoNibble: "</span>, yLoNibble, <span class="string">"  yHiNibble: "</span>, yHiNibble);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex128">Asm code for finding first occurrence of letter in string</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>More
or less equivalent to std.string.find. (also similar to C-RTL for
strchr except finds count offset rather than char*). Demonstrates
reference of local char[] variable, repne, scasb, etc.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 *  Copyright (C) 2004 by Digital Mars, www.digitalmars.com
 *  Written by Lynn Allan
 *  This software is provided 'as-is' by a rusty asm-486 programmer.
 *  Released to public domain.
 *
 * Compile with: dmd test.d (uses dmd ver 0.102)
 */</span>

<span class="keyword">import</span> std.stdio;
<span class="keyword">import</span> std.string;

<span class="keyword">void</span> main ()
{
  <span class="keyword">char</span>[] searchString = <span class="string">"The quick brown fox jumped over the lazy dog."</span>;
  <span class="comment">//                     00000000001111111111222222222233333333334444</span>
  <span class="comment">//                     01234567890123456789012345678901234567890123</span>
  <span class="keyword">char</span>* pss = &amp;searchString[<span class="number">0];</span>
  <span class="keyword">uint</span> foundOffset = find(searchString, <span class="string">'z'</span>);
  <span class="keyword">uint</span> zCode = <span class="string">'z'</span>;
  <span class="keyword">uint</span> len = searchString.length;
  writefln(<span class="string">"z found at: "</span>, foundOffset);
  <span class="keyword">uint</span> xCode = <span class="string">'x'</span>;
  foundOffset = find(searchString, <span class="string">'x'</span>);
  len = searchString.length;
  writefln(<span class="string">"x found at: "</span>, foundOffset);

  <span class="keyword">asm</span> {
    cld;
    mov   ECX,len;
    mov   EAX,zCode;
    mov   EDI,pss;
    repne;
    scasb;
    mov   EBX,len;
    sub   EBX,ECX;
    dec   EBX;
    mov   foundOffset,EBX;
  }
  writefln(<span class="string">"z found at: "</span>, foundOffset);
  <span class="keyword">assert</span>(foundOffset==<span class="number">38</span>);

  <span class="keyword">asm</span> {
    cld;
    mov   ECX,len;
    mov   EAX,xCode;
    mov   EDI,pss;
    repne;
    scasb;
    mov   EBX,len;
    sub   EBX,ECX;
    dec   EBX;
    mov   foundOffset,EBX;
  }
  writefln(<span class="string">"x found at: "</span>, foundOffset);
  <span class="keyword">assert</span>(foundOffset==<span class="number">18</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex132">Towers of Hanoi</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Solves the Hanoi problem for seven discs.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/+
 + hanoi!
 + solves the hanoi problem for seven discs
 +
 + by Brian Waters
 +/</span>

<span class="keyword">import</span> std.c.stdio;

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    <span class="keyword">void</span> solve(<span class="keyword">int</span> from, <span class="keyword">int</span> aux, <span class="keyword">int</span> to, <span class="keyword">int</span> numdiscs)
    {
        <span class="keyword">if</span> (numdiscs == <span class="number">0)
</span>
            <span class="keyword">return</span>;
        solve(from, to, aux, numdiscs - <span class="number">1</span>);
        printf(<span class="string">"%i to %i\n"</span>, from, to);
        solve(aux, from, to, numdiscs - <span class="number">1</span>);
        <span class="keyword">return</span>;
    }
    
    solve(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>);
    
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex63">Factorial</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how a factorial function can be written using a for loop.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">uint</span> factorial(<span class="keyword">int</span> a)
{

    <span class="comment">/*
        A factorial is a mathematical concept that is typically denoted with a "!".

        Example:
        4! = 4 * 3 * 2 * 1 = 24
    */</span>


    <span class="keyword">if</span>(a == <span class="number">0) </span><span class="keyword">return</span> <span class="number">1</span>;

    <span class="keyword">uint</span> b = <span class="number">1</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= a; i++)
        b *= i;
    <span class="keyword">return</span> b;
}

<span class="keyword">import</span> std.c.stdio;

<span class="keyword">unittest</span>
{

    <span class="comment">/* Compile with the "-unittest" option to run these unittests. */</span>

    printf(<span class="string">"Attempting unittests...\n"</span>);
    <span class="keyword">assert</span>(factorial(<span class="number">0) </span>== <span class="number">1</span>);
    <span class="keyword">assert</span>(factorial(<span class="number">1</span>) == <span class="number">1</span>);
    <span class="keyword">assert</span>(factorial(<span class="number">2</span>) == <span class="number">2</span>);
    <span class="keyword">assert</span>(factorial(<span class="number">3</span>) == <span class="number">6</span>);
    <span class="keyword">assert</span>(factorial(<span class="number">4</span>) == <span class="number">24</span>);
    printf(<span class="string">"unittests successful...\n"</span>);
}

<span class="keyword">void</span> main()
{
    printf(<span class="string">"factorial(0): %d\n"</span>, factorial(<span class="number">0))</span>;
    printf(<span class="string">"factorial(1): %d\n"</span>, factorial(<span class="number">1</span>));
    printf(<span class="string">"factorial(2): %d\n"</span>, factorial(<span class="number">2</span>));
    printf(<span class="string">"factorial(3): %d\n"</span>, factorial(<span class="number">3</span>));
    printf(<span class="string">"factorial(4): %d\n"</span>, factorial(<span class="number">4</span>));
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex48">Escape Sequences</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Escape sequence are useful, but they can get tricky.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

File:    escape.d
Author:  J C Calvarese
Website: http://jcc_7.tripod.com/d/
License: Public Domain

Purpose: 
Demonstrates how to use escaping to put backslashes and apostrophes 
for a literal character.

*/</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] backslashWYSIWYG = <span class="string">`\`</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] quoteWYSIWYG = <span class="string">`'`</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] doubleQuoteWYSIWYG = <span class="string">`"`</span>;

<span class="keyword">const</span> <span class="keyword">char</span>[] doubleQuoteReg = <span class="string">"\""</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] quoteReg = <span class="string">"\'"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] backslahReg = <span class="string">"\\"</span>;


<span class="keyword">const</span> <span class="keyword">char</span> quoteChar = <span class="string">'\''</span>;

<span class="keyword">const</span> <span class="keyword">char</span> backslashChar = <span class="string">'\\'</span>;



<span class="keyword">void</span> main()
{
    printf(<span class="keyword">cast</span>(<span class="keyword">char</span>[]) (doubleQuoteReg ~ <span class="string">"That's what I said!"</span> ~ doubleQuoteReg ~ <span class="string">\n</span><span class="string">\0</span>));  
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex85">Comments (Reprise)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>More comments is better than fewer comments.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">module</span> comments;

<span class="comment">/* This purpose of this code is to 
   show how documentation can be done with comments. */</span>


<span class="comment">/*/   */</span>


<span class="comment">// single line</span>


<span class="keyword">import</span> std.string;

<span class="comment">/*

Mult-line

*/</span>

<span class="keyword">int</span> usefulInteger;

<span class="comment">/+ 

simple nested

+/</span>

<span class="keyword">char</span>[] someString;

<span class="comment">/+ 
/+/ +/
level 1 nested

    /+
    
    level 2 nested
    
        /+
        level 3 nested
        +/
    
    +/

+/</span>


<span class="comment">/* The actual program (anti-climatic) */</span>

<span class="keyword">int</span> main()
{
    <span class="keyword">char</span>[] someOtherString = someString;
    
    <span class="keyword">int</span> anotherInt = usefulInteger;
    
    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex21">Nested Comments</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This program doesn't do anything, but it's well-documented.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

nested_comments.html 

Author: J C Calvarese
License: public domain

This program demonstrates using comments in D.

(Such as the multi-line comment this sentence resides in.)

*/</span>



<span class="comment">/+   

    This is one of D's nested comments.  


    /+ What would an example of a nested comment be without 
       a nested (and /+ another nest +/ )comment? +/

    /* Naturally, you can also put something like this in a nested multiline comments... */

    // as well as text like like this ...

    /* since the compiler is only concerned about being in a nested comment block,
        you don't actually need a matching * and / to satisfy the compiler.

+/</span>



<span class="keyword">void</span> main()  
{ <span class="comment">// This is a single line comment.  It automatically ends at the end of the line.</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex98">String Literals</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how different types of string literals work.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* "Backquote" WYSIWYG strings */</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] a1 = <span class="string">`\`</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] b1 = <span class="string">`\\`</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] c1 = <span class="string">`\"`</span>;



<span class="comment">/* r"" WYSIWYG strings */</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] a2 = <span class="string">r"\"</span>;
const char[] b2 = <span class="string">r"\\"</span>;
const char[] c2 = <span class="string">r"\"</span> <span class="string">`"`</span>; 
<span class="comment">/* The r"" strings can't contain a ", so I used concatenation. */</span>



<span class="comment">/* "Regular strings */</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] a3 = <span class="string">"\\"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] b3 = <span class="string">"\\\\"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] c3 = <span class="string">"\\\""</span>;



<span class="keyword">void</span> main()
{
    printf(<span class="string">"Test that the strings mean what I think they mean.\n"</span>);

    <span class="keyword">assert</span>(a1 == a2);
    <span class="keyword">assert</span>(a1 == a3);

    <span class="keyword">assert</span>(b1 == b2);
    <span class="keyword">assert</span>(b1 == b3);

    <span class="keyword">assert</span>(c1 == c2);
    <span class="keyword">assert</span>(c1 == c3);

    printf(<span class="string">"Tests passed!\n"</span>);

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex36">String and Number Literals</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>When DMD 0.69 was released, I came up with this example to try it out.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

File:      d069.d
Author:    Justin C. Calvarese
Website:   http://jcc_7.tripod.com/d/
License:   Public Domain

Purpose:
Since D 0.69, integer and floating point literals
can have embedded underscores (_) for formatting purposes.

This code demonstrates those features and more...

*/</span>

<span class="keyword">const</span> <span class="keyword">int</span> hundred = <span class="number">100</span>;
<span class="keyword">const</span> <span class="keyword">int</span> million = <span class="number">1_000_000</span>;



<span class="comment">/*

Also added in 0.69...

x"0a AA BF" style hex strings.

*/</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] myName = x<span class="string">"4A 75 73 74 69 6E"</span>; 


<span class="keyword">const</span> <span class="keyword">char</span>[] notRaw = <span class="string">"string\tstring"</span>;


<span class="comment">/*

Raw (what-you-see-is-what-you-get) strings
implemented in D 0.69

*/</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] raw1 = r<span class="string">"string\tstring"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] raw2 = <span class="string">`string\tstring`</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] raw3 = <span class="string">`apostrophe: '  fancy quote: `</span> ~ <span class="string">"`"</span>;



<span class="comment">/* See how the strings are automatically concatenated... */</span>
<span class="keyword">const</span> <span class="keyword">char</span>[] oneToFive = <span class="string">"one"</span> <span class="string">\t</span> <span class="string">"two"</span> <span class="string">\t</span> <span class="string">"three"</span> <span class="string">\t</span> <span class="string">"four"</span> <span class="string">\t</span>  <span class="string">\t</span> <span class="string">"five"</span>;

<span class="comment">/* Binary Notation: I'm saying "two" */</span>
<span class="keyword">const</span> <span class="keyword">int</span> binTwo      = <span class="number">0b10</span>;
<span class="keyword">const</span> <span class="keyword">int</span> binFancyTwo = <span class="number">0b000_0010</span>;

<span class="comment">/* Hexadecimal Notation: I'm saying "16" */</span>
<span class="keyword">const</span> <span class="keyword">int</span> hexSixteen      = <span class="number">0x10</span>;
<span class="keyword">const</span> <span class="keyword">int</span> hexFancySixteen = <span class="number">0x00</span>_10;

<span class="comment">/* Hexadecimal Notation: I'm saying "8" */</span>
<span class="keyword">const</span> <span class="keyword">int</span> octEight = <span class="number">010;</span>


<span class="keyword">int</span> main() 
{

    <span class="comment">/* Print "1000000" */</span>
    printf(<span class="string">"%i\n"</span>, million);    

    <span class="comment">/* Print "2" */</span>
    printf(<span class="string">"%i\n"</span>, binTwo);  

    <span class="comment">/* Print "16" */</span>
    printf(<span class="string">"%i\n"</span>, hexSixteen);  

    <span class="comment">/* Print "8" */</span>
    printf(<span class="string">"%i\n"</span>, octEight);  


    <span class="comment">/* Print "Justin" */</span>
    printf(<span class="string">"%.*s\n"</span>, myName);   

    <span class="comment">/* Print a string with backslashed characters */</span>
    printf(<span class="string">"\"Invisible\" backslashed characters: %.*s\n"</span>, notRaw); 

    <span class="comment">/* Prints a what-you-see-is-what-you-get string */</span>
    printf(<span class="string">"What-you-see-is-what-you-get [1]: %.*s\n"</span>, raw1);   

    <span class="comment">/* Prints a what-you-see-is-what-you-get string */</span>
    printf(<span class="string">"What-you-see-is-what-you-get [2]: %.*s\n"</span>, raw2);   

    <span class="comment">/* Prints a what-you-see-is-what-you-get string */</span>
    printf(<span class="string">"What-you-see-is-what-you-get [3]: %.*s\n"</span>, raw3);   

    <span class="comment">/* Prints one to five */</span>
    printf(<span class="string">"one-to-five: %.*s\n\n"</span>, oneToFive);


    printf(<span class="string">"This is the first line.
This is the second line.
I'd say that D is pretty darn cool (third line).

"</span>);


    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex34">Runtime Type Information (RTTI)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>You can find out some class information during runtime.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio;

<span class="keyword">class</span> A {}

<span class="keyword">int</span> main ( <span class="keyword">char</span> [] [] args ) 
{
    A a = <span class="keyword">new</span> A;
    Object o;
    o = <span class="keyword">new</span> Object;
    <span class="keyword">bit</span> b;
    
    printf(<span class="string">"%.*s\n"</span>, a.classinfo.name);
    printf(<span class="string">"%.*s\n"</span>, o.classinfo.name);

    <span class="comment">/* These aren't allowed... */</span>
<span class="comment">//    printf("%.*s\n", b.classinfo.name);</span>
<span class="comment">//    printf("%.*s\n", b.typeinfo.name);</span>

    <span class="keyword">return</span> <span class="number">1</span>;
}

<span class="comment">/* 

See also: 
http://www.prowiki.org/wiki4d/wiki.cgi?HowTo/RealtimeTypeInformation
http://www.prowiki.org/wiki4d/wiki.cgi?FaqRoadmap#DoesDsupportanyformofRTTI

*/</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex32">Statistics</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates calculating linear regression statistics.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

File:      stat.d
Author:    Justin C. Calvarese
Website:   http://jcc_7.tripod.com/d/
License:   Public Domain

Linear regression statistics.

*/</span>



<span class="keyword">double</span> average(<span class="keyword">double</span>[] r)
{
    <span class="keyword">double</span> t = <span class="number">0;
</span>


    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0; </span>i &lt; r.length; i++)
     t += r[i];

    <span class="keyword">return</span> (t / (<span class="keyword">cast</span>(<span class="keyword">double</span>) r.length));
}


<span class="keyword">double</span> beta1(<span class="keyword">double</span>[] x, <span class="keyword">double</span>[] y, <span class="keyword">double</span> x_bar, <span class="keyword">double</span> y_bar)
{
    <span class="keyword">int</span> l;

    <span class="keyword">if</span> (x.length != y.length) 
    {
        printf(<span class="string">"x and y really should be the same length!"</span>);

        <span class="comment">// Set length as the shorter series and move on...</span>

        <span class="keyword">if</span>(x.length &lt; y.length) l = x.length;
        <span class="keyword">else</span> l = y.length;
    }
    <span class="keyword">else</span> l = x.length;


    <span class="keyword">double</span> top_sum, btm_sum;

    top_sum = <span class="number">0;
</span>

    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; l; i++)
     top_sum += (x[i] - x_bar) * (y[i] - y_bar);


    btm_sum = <span class="number">0;
</span>

    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; l; i++)
     btm_sum += ((x[i] - x_bar) * (x[i] - x_bar));


    <span class="keyword">return</span> top_sum / btm_sum;
}




<span class="keyword">double</span> beta0(<span class="keyword">double</span> x_bar, <span class="keyword">double</span> y_bar, <span class="keyword">double</span> b1)
{
    <span class="keyword">return</span> y_bar - (b1 * x_bar);
}





<span class="keyword">int</span> main()
{

    <span class="keyword">double</span>[] x;

    x.length = <span class="number">10</span>;

    x[<span class="number">0] </span>= <span class="number">1</span>;
    x[<span class="number">1</span>] = <span class="number">2</span>;
    x[<span class="number">2</span>] = <span class="number">3</span>;
    x[<span class="number">3</span>] = <span class="number">4</span>;
    x[<span class="number">4</span>] = <span class="number">5</span>;
    x[<span class="number">5</span>] = <span class="number">6.5</span>;
    x[<span class="number">6</span>] = <span class="number">7</span>;
    x[<span class="number">7</span>] = <span class="number">7.5</span>;
    x[<span class="number">8</span>] = <span class="number">8</span>;
    x[<span class="number">9</span>] = <span class="number">8.5</span> ;


    <span class="keyword">double</span>[] y;

    y.length = <span class="number">10</span>;

    y[<span class="number">0] </span>= <span class="number">1</span>;
    y[<span class="number">1</span>] = <span class="number">2</span>;
    y[<span class="number">2</span>] = <span class="number">3</span>;
    y[<span class="number">3</span>] = <span class="number">3.2</span>;
    y[<span class="number">4</span>] = <span class="number">3.4</span>;
    y[<span class="number">5</span>] = <span class="number">4</span>;
    y[<span class="number">6</span>] = <span class="number">4.2</span>;
    y[<span class="number">7</span>] = <span class="number">4.3</span>;
    y[<span class="number">8</span>] = <span class="number">4.35</span>;
    y[<span class="number">9</span>] = <span class="number">4.37</span>;


    <span class="keyword">double</span> x_bar, y_bar;

    x_bar = average(x);
    y_bar = average(y);


    <span class="keyword">double</span> b1, b0;
    b1 = beta1(x, y, x_bar, y_bar);    
    b0 = beta0(x_bar, y_bar, b1);    

    printf(<span class="string">"b1: %f\n"</span>, b1);
    printf(<span class="string">"b0: %f\n"</span>, b0);


    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Advanced</h3><h4 id="ex147">Printing international characters on Windows</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This Windows specific code, allows you to print international characters (Greek for instance) on the non UTF-8 Windows console.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// Posted by psychotic</span>
<span class="comment">// Based on http://www.digitalmars.com/d/archives/digitalmars/D/12787.html</span>
<span class="comment">// Link to kernel32.lib</span>

<span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.c.windows.windows;

<span class="keyword">extern</span> (Windows) {
    <span class="keyword">export</span> BOOL CharToOemW(
            LPCWSTR lpszSrc, <span class="comment">// string to translate</span>
            LPSTR lpszDst <span class="comment">// translated string</span>
    );
}

<span class="keyword">void</span> main()
{
    <span class="keyword">wchar</span>[] s = <span class="string">"&#129;&#8222;!"</span>; <span class="comment">//Greek salutation</span>
    echo(s); <span class="comment">// call our function</span>
}

<span class="keyword">void</span> echo(<span class="keyword">wchar</span>[] s)
{
    <span class="keyword">char</span>[] t = <span class="keyword">new</span> <span class="keyword">char</span>[s.length];
    CharToOemW(s, t); <span class="comment">// calling Windows API function</span>
    puts(t); <span class="comment">// printing translated string</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex30">Date Localization using version</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Localization example that shows how to use version to compile different versions to use different date formats.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

locales2.d

Author:  Justin C Calvarese
Date:    October 7, 2003
License: Public Domain

Demonstrates using version() to handle different locales.

Compile for the United States locale:
dmd locales.d -version=UNITED_STATES

Compile for the Canadian (English) locale:
dmd locales.d -version=CANADIAN_ENGLISH

These date formats are based on 
"docs.sun.com: International Language Environments Guide"
http://docs.sun.com/db/doc/806-6642/6jfipqu57?a=view

*/</span>


<span class="keyword">import</span> std.string;


<span class="keyword">char</span>[] dateString(<span class="keyword">byte</span> day, <span class="keyword">byte</span> month, <span class="keyword">int</span> yr)
{ 
    <span class="keyword">int</span> twoDigitYr = yr % <span class="number">100</span>;
    
    <span class="keyword">version</span>(CANADIAN_ENGLISH) <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(twoDigitYr, <span class="number">2</span>);
    <span class="keyword">version</span>(DANISH)           <span class="keyword">return</span> toString(yr) ~ <span class="string">"-"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(day, <span class="number">2</span>);
    <span class="keyword">version</span>(FINNISH)          <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"."</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"."</span> ~ toString(yr);
    <span class="keyword">version</span>(FRENCH)           <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ toString(yr);
    <span class="keyword">version</span>(GERMAN)           <span class="keyword">return</span> toString(yr) ~ <span class="string">"-"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(day, <span class="number">2</span>);
    <span class="keyword">version</span>(ITALIAN)          <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(twoDigitYr, <span class="number">2</span>);
    <span class="keyword">version</span>(NORWEGIAN)        <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(twoDigitYr, <span class="number">2</span>);
    <span class="keyword">version</span>(SPANISH)          <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(twoDigitYr, <span class="number">2</span>);
    <span class="keyword">version</span>(SWEDISH)          <span class="keyword">return</span> toString(yr) ~ <span class="string">"-"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(day, <span class="number">2</span>);
    <span class="keyword">version</span>(GREAT_BRITAIN)    <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(twoDigitYr, <span class="number">2</span>);
    <span class="keyword">version</span>(UNITED_STATES)    <span class="keyword">return</span> leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"-"</span> ~ leadingZeros(twoDigitYr, <span class="number">2</span>);   
    <span class="keyword">version</span>(THAI)             <span class="keyword">return</span> leadingZeros(day, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ leadingZeros(month, <span class="number">2</span>) ~ <span class="string">"/"</span> ~ toString(yr);      
}


<span class="keyword">char</span>[] leadingZeros(<span class="keyword">byte</span> num, <span class="keyword">byte</span> digits)
<span class="comment">/* also in currency.d and with.d */</span>
{ 
    <span class="keyword">char</span>[] buffer;
    <span class="keyword">byte</span> diff;
    
    buffer = toString(num);
    <span class="keyword">if</span> (buffer.length &lt; digits) 
    {
        diff = digits - buffer.length;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0; </span>i &lt; diff; i++)
          buffer = <span class="string">"0"</span> ~ buffer;
    } 
    <span class="keyword">return</span> buffer;
}


<span class="keyword">int</span> main()
{ 
    printf(<span class="string">"%.*s\n"</span>, dateString(<span class="number">24</span>, <span class="number">8</span>, <span class="number">2001</span>));
    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex70">Struct "constructors"</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Define a constructor-like function for structs</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">struct</span> Foo {
  <span class="keyword">int</span> a;
  <span class="keyword">static</span> Foo opCall(<span class="keyword">int</span> a) {
    Foo s;
    s.a = a;
    <span class="keyword">return</span> s;
  }
}
<span class="keyword">int</span> main() {
  Foo x = Foo(<span class="number">10</span>);
  printf(<span class="string">"%d\n"</span>, x.a);
  <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex91">Application path</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to find the path of the current executable (Windows-only).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.windows.windows;
<span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.string;


<span class="keyword">extern</span>(C) <span class="keyword">int</span> strlen(<span class="keyword">char</span>* c);

<span class="keyword">extern</span>(Windows) 
{
    DWORD GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);   
    HMODULE GetModuleHandleA(LPCSTR lpModuleName);
}

    
<span class="keyword">char</span>[] AppExePath()
{
    <span class="comment">/* returns the Path to the current .exe module (e.g. "F:\PGM\D\TRAYICON\") */</span>
    
    <span class="keyword">char</span>[] strtmp;
    strtmp.length = <span class="number">1024</span>;

    GetModuleFileNameA(GetModuleHandleA(<span class="keyword">null</span>), <span class="keyword">cast</span>(<span class="keyword">char</span>*) strtmp, <span class="number">1024</span>);
    <span class="keyword">int</span> j = rfind(strtmp[<span class="number">0..</span>strlen(strtmp)], <span class="string">"\\"</span>);

    strtmp = strtmp[<span class="number">0..</span>j+<span class="number">1</span>];
    <span class="keyword">return</span> strtmp;
}


<span class="keyword">void</span> main()
{  
    printf(<span class="string">"%.*s\n"</span>, AppExePath);
    
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex24">Locales</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>An example using version that shows how to use version to compile different executables for different languages.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

locales1.d

Author:  Justin C Calvarese
Date:    October 6, 2003
License: Public Domain

Demonstrates using version() to handle different locales.

Compile for the English locale:
dmd locales.d -version=English

Compile for the German locale:
dmd locales.d -version=Deutsch

*/</span>

<span class="keyword">version</span>(English)  
{
    <span class="keyword">const</span> <span class="keyword">char</span>[] salutation = <span class="string">"Hi"</span>;
    <span class="keyword">const</span> <span class="keyword">char</span>[] negative = <span class="string">"No"</span>;
}

<span class="keyword">version</span>(Espanol) 
{
    <span class="keyword">const</span> <span class="keyword">char</span>[] salutation = <span class="string">"Hola"</span>;
    <span class="keyword">const</span> <span class="keyword">char</span>[] negative = <span class="string">"No"</span>;
} 

<span class="keyword">version</span>(Francais)
{
    <span class="keyword">const</span> <span class="keyword">char</span>[] salutation = <span class="string">"Bonjour"</span>;
    <span class="keyword">const</span> <span class="keyword">char</span>[] negative = <span class="string">"Non"</span>;
} 

<span class="keyword">version</span>(Deutsch)  
{
    <span class="keyword">const</span> <span class="keyword">char</span>[] salutation = <span class="string">"Hallo"</span>;
    <span class="keyword">const</span> <span class="keyword">char</span>[] negative = <span class="string">"Nein"</span>;
} 


<span class="keyword">int</span> main()
{ 
    printf(<span class="string">"%.*s\n"</span>, salutation);
    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex31">CreateLink using COM</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows using COM to create a shortcut (Windows).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

IShellLink Example for D

File:      createLink.d
Author:    Justin C Calvarese
Website:   http://jcc_7.tripod.com/d/
License:   Public Domain


- Ported to DMD D version 0.59 from BCX/LCC-Win32 by J C Calvarese
- Based on "BCX COM EXAMPLE" (by dl_programmer) 
- BCX source in makelink.zip at http://groups.yahoo.com/group/BCX/files/Source_Code/
- Creates a Windows shortcut to an executable, adding several properties.


Compile like this...
dmd createLink ole32.lib uuid.lib


Link with:   

ole32.lib    
---------
_CoUninitialize@0
_CoInitialize@4
_CoCreateInstance@20

uuid.lib
--------
_CLSID_ShellLink


If you want an .ico file you can use mine:
http://jcc_7.tripod.com/d/tutor/fldr_a.ico

*/</span>

<span class="keyword">import</span> std.c.windows.windows;
<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.c.windows.com;



<span class="comment">/* Windows API constants */</span>

<span class="keyword">const</span> <span class="keyword">int</span> SW_SHOW =<span class="number">5</span>;
<span class="keyword">const</span> <span class="keyword">int</span> CP_ACP = <span class="number">0; </span> <span class="comment">//  default to ANSI code page</span>


<span class="keyword">extern</span>(C) <span class="keyword">const</span> GUID CLSID_ShellLink     = {<span class="number">0x00021401</span>, <span class="number">0x0000</span>, <span class="number">0x0000</span>, [<span class="number">0xC0</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x46</span>]};
<span class="keyword">extern</span>(C) <span class="keyword">const</span> IID IID_IShellLinkA      = {<span class="number">0x000214EE</span>, <span class="number">0x0000</span>, <span class="number">0x0000</span>, [<span class="number">0xC0</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x46</span>]};
<span class="keyword">extern</span>(C) <span class="keyword">const</span> IID IID_IPersistFile     = {<span class="number">0x0000010B</span>, <span class="number">0x0000</span>, <span class="number">0x0000</span>, [<span class="number">0xC0</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x46</span>]};
<span class="keyword">alias</span> IID_IShellLinkA IID_IShellLink;



<span class="comment">/* Windows API types */</span>

<span class="keyword">alias</span> <span class="keyword">ushort</span> *LPWSTR;

<span class="keyword">struct</span> SHITEMID {
    USHORT cb;
    BYTE abID[<span class="number">1</span>];
} 
<span class="keyword">alias</span> SHITEMID* LPSHITEMID;

<span class="keyword">struct</span> ITEMIDLIST {
    SHITEMID mkid;
}
<span class="keyword">alias</span> ITEMIDLIST* LPCITEMIDLIST;
<span class="keyword">alias</span> ITEMIDLIST* LPITEMIDLIST;


<span class="keyword">struct</span> WIN32_FIND_DATA 
{
    DWORD dwFileAttributes;
    FILETIME ftCreationTime;
    FILETIME ftLastAccessTime;
    FILETIME ftLastWriteTime;
    DWORD nFileSizeHigh;
    DWORD nFileSizeLow;
    DWORD dwReserved0;
    DWORD dwReserved1;
    <span class="keyword">char</span> cFileName[MAX_PATH];
    <span class="keyword">char</span> cAlternateFileName[<span class="number">14</span>];
    WORD dummy;
} 
<span class="keyword">alias</span> WIN32_FIND_DATA* LPWIN32_FIND_DATA, PWIN32_FIND_DATA;

<span class="keyword">struct</span> WIN32_FIND_DATAA 
{
    DWORD dwFileAttributes;
    FILETIME ftCreationTime;
    FILETIME ftLastAccessTime;
    FILETIME ftLastWriteTime;
    DWORD nFileSizeHigh;
    DWORD nFileSizeLow;
    DWORD dwReserved0;
    DWORD dwReserved1;
    CHAR cFileName[MAX_PATH];
    CHAR cAlternateFileName[<span class="number">14</span>];
    WORD dummy;
}
<span class="keyword">alias</span> WIN32_FIND_DATAA* LPWIN32_FIND_DATAA, PWIN32_FIND_DATAA;

<span class="keyword">struct</span> WIN32_FIND_DATAW 
{
        DWORD dwFileAttributes;
        FILETIME ftCreationTime;
        FILETIME ftLastAccessTime;
        FILETIME ftLastWriteTime;
        DWORD nFileSizeHigh;
        DWORD nFileSizeLow;
        DWORD dwReserved0;
        DWORD dwReserved1;
        WCHAR cFileName[MAX_PATH];
        WCHAR cAlternateFileName[<span class="number">14</span>];
        WORD dummy;
}
<span class="keyword">alias</span> WIN32_FIND_DATAW* LPWIN32_FIND_DATAW, PWIN32_FIND_DATAW;



<span class="comment">/* Windows API functions */</span>


<span class="keyword">extern</span>(Windows) <span class="keyword">int</span> MultiByteToWideChar(UINT, DWORD, LPCSTR, <span class="keyword">int</span>, LPWSTR, <span class="keyword">int</span>);

<span class="keyword">alias</span> MessageBoxA MessageBox;



<span class="comment">/* objidl.h excerpt */</span>

<span class="keyword">extern</span>(C) <span class="comment">/+const+/</span> <span class="keyword">extern</span> IID <span class="comment">/+IID_IPersistFile+/</span> IID_IPERSISTFILE;

<span class="keyword">extern</span>(Windows) <span class="keyword">interface</span> IPersistFile: IUnknown
{
<span class="comment">/+    HRESULT (_stdcall *QueryInterface)(IPersistFile*,REFIID,void **);
    ULONG (_stdcall *AddRef)(IPersistFile*);
    ULONG (_stdcall *Release)(IPersistFile*);+/</span>
    HRESULT GetClassID(CLSID*);
    HRESULT IsDirty();
    HRESULT Load(LPCOLESTR, DWORD);
    HRESULT Save(LPCOLESTR, BOOL);
    HRESULT SaveCompleted(LPCOLESTR);
    HRESULT GetCurFile(LPOLESTR*);
}

<span class="comment">/* end of objidl.h excerpt */</span>



<span class="comment">/* shobjidl.h excerpt */</span>

<span class="keyword">extern</span>(Windows) <span class="keyword">interface</span> IPersistIDList: IUnknown
{
<span class="comment">/+   HRESULT QueryInterface(REFIID, void **);
   ULONG AddRef();
   ULONG Release();+/</span>
   HRESULT GetClassID(CLSID*);
   HRESULT SetIDList(LPCITEMIDLIST);
   HRESULT GetIDList(LPITEMIDLIST*);
}

<span class="keyword">extern</span>(Windows) <span class="keyword">interface</span> IShellLink: IUnknown
{
<span class="comment">/+   HRESULT QueryInterface(REFIID, void **);
   ULONG AddRef();
   ULONG Release();+/</span>
   HRESULT GetPath(LPSTR, <span class="keyword">int</span>, WIN32_FIND_DATAA*, DWORD);
   HRESULT GetIDList(LPITEMIDLIST*);
   HRESULT SetIDList(LPCITEMIDLIST);
   HRESULT GetDescription(LPSTR, <span class="keyword">int</span>);
   HRESULT SetDescription(LPCSTR);
   HRESULT GetWorkingDirectory(LPSTR, <span class="keyword">int</span>);
   HRESULT SetWorkingDirectory(LPCSTR);
   HRESULT GetArguments(LPSTR, <span class="keyword">int</span>);
   HRESULT SetArguments(LPCSTR);
   HRESULT GetHotkey(WORD*);
   HRESULT SetHotkey(WORD);
   HRESULT GetShowCmd(<span class="keyword">int</span>*);
   HRESULT SetShowCmd(<span class="keyword">int</span>);
   HRESULT GetIconLocation(LPSTR, <span class="keyword">int</span>, <span class="keyword">int</span>*);
   HRESULT SetIconLocation(LPCSTR, <span class="keyword">int</span>);
   HRESULT SetRelativePath(LPCSTR, DWORD);
   HRESULT Resolve(HWND, DWORD);
   HRESULT SetPath(LPCSTR);
}

<span class="comment">/* end of shobjidl.h excerpt */</span>



<span class="keyword">void</span> main()
{

    <span class="comment">/* You'll probably need to change some paths to reflect your system. */</span>
    
    <span class="keyword">char</span>[] SCPath = <span class="string">"c:\\windows\\"</span>;
    <span class="keyword">char</span>[] szFile;
    <span class="keyword">char</span>[] szTarget;
    <span class="keyword">char</span>[] szDesc;
    <span class="keyword">char</span>[] szIcon;
 

    szFile   = SCPath ~ <span class="string">"explorer.exe"</span>;
    szTarget = SCPath ~ <span class="string">"d_shortcut.lnk"</span>;

    szIcon = <span class="string">"c:\\dmd\\src\\jcc_7\\examples\\various\\fldr_a.ico"</span>;
    szDesc = <span class="string">"Shortcut to test.lnk using D!"</span>;

    <span class="keyword">if</span> (CreateLink(szFile, szTarget, szDesc, szIcon) == S_OK)
        MessageBox(<span class="keyword">null</span>, <span class="string">"Your shortcut has been created!"</span>,  <span class="string">"Look at that, D does do COM!"</span>, <span class="number">0);</span>
    <span class="keyword">else</span>
        MessageBox(<span class="keyword">null</span>, <span class="string">"An error occured while trying to create your shortcut"</span>, <span class="string">"Aw man..."</span>, <span class="number">0);</span> 
}



<span class="comment">/* Helpful functions */</span>

<span class="keyword">char</span>[] Left(<span class="keyword">char</span>[] s, <span class="keyword">int</span> leng)
{
    <span class="comment">/* Left$(s$, leng) */</span>
    <span class="keyword">if</span> (leng &lt;= s.length) <span class="keyword">return</span> s[<span class="number">0..</span>leng];
    <span class="keyword">return</span> s[];
} 


<span class="keyword">char</span>[] AppPath(<span class="keyword">char</span>[] path)
{
  <span class="comment">/* --------------------------------------------------------------------------
     DESCRIPTION: Gets a path from full path name
           INPUT: String to full path name
          OUTPUT: String to path name
           USAGE: buffer$ = AppPath$("c:\your directory\your file.exe")
         RETURNS: c:\your directory\
     -------------------------------------------------------------------------- */</span>
    <span class="keyword">return</span> Left(path, find(path, <span class="keyword">cast</span>(<span class="keyword">char</span>[]) <span class="string">"\\"</span>));
}


HRESULT CreateLink(<span class="keyword">char</span>[] lpszPathObj, <span class="keyword">char</span>[] lpszPathLink,  <span class="keyword">char</span>[] lpszDesc, <span class="keyword">char</span>[] lpszIcon)
{
   <span class="comment">/* --------------------------------------------------------------------------
      DESCRIPTION: Creates a Windows shortcut
            INPUT: string to EXE, string to shortcut, string to description,
                   string to icon
           OUTPUT: HRESULT to success or failure
            USAGE: result = CreateLink("c:\in.exe", "c:\out.lnk, "description")
          RETURNS: S_OK if the interface is supported, E_NOINTERFACE if not.
      -------------------------------------------------------------------------- */</span>
    
    HRESULT hres;
    IShellLink psl;

    CoInitialize(<span class="keyword">null</span>);     <span class="comment">/* Initialize the COM object */</span>

    <span class="comment">/* Get a pointer to the IShellLink interface. */</span>
    hres = CoCreateInstance(&amp;CLSID_ShellLink, <span class="keyword">null</span>, CLSCTX_INPROC_SERVER, &amp;IID_IShellLink, &amp;psl);

    <span class="keyword">if</span> (SUCCEEDED(hres)) 
    {
        IPersistFile ppf;

        <span class="comment">/* Sets shortcut location */</span>
        psl.SetPath(<span class="keyword">cast</span>(<span class="keyword">char</span>*) (lpszPathObj ~ <span class="string">\0</span>));

        <span class="comment">/* Sets shortcut description */</span>
        psl.SetDescription(<span class="keyword">cast</span>(<span class="keyword">char</span>*) (lpszDesc ~ <span class="string">\0</span>));

        <span class="comment">/* Gives shortcut an icon */</span>
        psl.SetIconLocation(<span class="keyword">cast</span>(<span class="keyword">char</span>*) (lpszIcon ~ <span class="string">\0</span>), <span class="number">0);</span>

        <span class="comment">/* Make it full screen */</span>
        psl.SetShowCmd(SW_SHOW); <span class="comment">/* MAXIMIZED */</span>

        <span class="comment">/* Set default path */</span>
        psl.SetWorkingDirectory(<span class="keyword">cast</span>(<span class="keyword">char</span>*) (AppPath(lpszPathObj) ~ <span class="string">\0</span>));

<span class="comment">/+      /* Set arguments */
        psl.SetArguments("-arg1 -arg2 -arg3"); /*UNCOMMENT THIS IF YOU WANT TO SET ARGUMENTS*/

        /* **** Other properties are available! ****
           Do not uncomment unless you define the other parameters.
           Read the Microsoft PSDK for more info.                   */
        psl.SetHotkey(wHotkey);
        psl.SetIDList(pidl);
        psl.SetRelativePath(pszPathRel, null); +/</span>

        <span class="comment">/* Query IShellLink for the IPersistFile interface for saving the 
           shortcut in persistent storage. */</span>
        hres = psl.QueryInterface(&amp;IID_IPersistFile, <span class="keyword">cast</span>(<span class="keyword">void</span> **) &amp;ppf);

        <span class="keyword">if</span> (SUCCEEDED(hres))
        { 
            WORD wsz[MAX_PATH];
 
            <span class="comment">/* Ensure that the string is ANSI. */</span>
            MultiByteToWideChar(CP_ACP, <span class="number">0, </span>lpszPathLink, -<span class="number">1</span>, wsz, MAX_PATH);
 
            <span class="comment">/* Save the link by calling IPersistFile::Save. */</span>
            hres = ppf.Save(<span class="keyword">cast</span>(<span class="keyword">wchar</span>*) wsz, <span class="keyword">cast</span>(<span class="keyword">int</span>) <span class="keyword">true</span>);
            ppf.Release();
        }
        psl.Release();
    }

    CoUninitialize(); <span class="comment">/* Uninitialize the COM object */</span>
    <span class="keyword">return</span> hres;
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex141">Endless For Loop</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This shows how to create an endless loop and break out of it if a given condition is met</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main
{
     <span class="keyword">for</span>()
    {
        <span class="keyword">if</span>( <span class="comment">/*condition met */</span> )
        {
            printf(<span class="string">"You entered the correct answer.\n"</span>);
            <span class="keyword">break</span>; <span class="comment">// exits the endless loop</span>
        }
        <span class="keyword">else</span>
        {
            <span class="comment">// do something like print an error message</span>
            printf(<span class="string">"Sorry, try again\n"</span>); <span class="comment">// after this, we go over from the start</span>
        }
    }
    printf(<span class="string">"Bye!"</span>);
}

<span class="comment">/* Submitted by anonymous contributor (Sat Jan 8, 2005 4:47 pm). */</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex145">Meta tags (__FILE__, __LINE__, etc.)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>These "special tokens" embedded helpful information into the program at compile time.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* Tested with DMD 0.118 */</span>

<span class="keyword">import</span> std.stdio;

<span class="keyword">int</span> main (<span class="keyword">char</span>[][] args)
{
    writef(<span class="string">"Testing the D Code\n"</span>);
    writef(<span class="string">"File:                %s\n"</span>,__FILE__);
    writef(<span class="string">"Line:                %s\n"</span>,__LINE__);
    writef(<span class="string">"Date:                %s\n"</span>,__DATE__);
    writef(<span class="string">"Time:                %s\n"</span>,__TIME__);
    writef(<span class="string">"TimeStamp:   %s\n"</span>,__TIMESTAMP__);

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre> Based on <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/19553">digitalmars.D:19553</a>.</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex146">uudecode</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>D port of Clem Dye's uudecode.c</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 
UUDECODE - a Win32 utility to uudecode single files.

Copyright (C) 1998 Clem Dye

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software Foundation, Inc.,
59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.

Modified 13 July 2001 by Clem Dye to allow any character in the range 0 to 
7 in the 'begin' statement within the header of the uuencoded file being 
decoded.

Ported to D: J C Calvarese, 14 May 2004 

Updated by J C Calvarese, 15 Mar 2004
* Recompiled with DMD 0.116
* Retested with the attachment to http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/19334.


************* Instructions ************* 

Compile:
dmd uudecode.d

Usage:
uudecode.exe d4676.txt 

(where d4676.txt would be the input file)

The input file should start with something like this: "begin 0644 stlport.zip"
and end with "end".

*/</span>

<span class="keyword">import</span> std.stream;
<span class="keyword">import</span> std.string;


<span class="keyword">char</span>[] toStringFromChar(<span class="keyword">char</span> c)

<span class="comment">/*  
    based on code posted by Helmut Leitner (helmut.leitner@chello.at), 
    23 Oct 2003 at http://www.digitalmars.com/drn-bin/wwwnews?D/18497 
*/</span>

{
    <span class="keyword">char</span>[] s = <span class="string">"?"</span>;
    s[<span class="number">0] </span>= c;
    <span class="keyword">return</span> s;
}



<span class="keyword">char</span> DEC(<span class="keyword">char</span> c)
{
    <span class="keyword">return</span> (c - <span class="string">' '</span>) &amp; <span class="number">077;</span>
}



<span class="keyword">char</span>[] outname;

<span class="keyword">char</span>[] uudecode (File f)
{
    <span class="keyword">int</span> n;
    <span class="keyword">char</span> ch;
    <span class="keyword">char</span>[] buf, p;
    <span class="keyword">int</span> pos;
    File outI = <span class="keyword">new</span> File();
    
    
    <span class="keyword">do</span> 
    {
          buf = f.readLine();
    }
    <span class="keyword">while</span> (buf.length &lt; <span class="number">4</span> || buf[<span class="number">0..</span><span class="number">6</span>] == <span class="string">"begin"</span>);
    pos = <span class="number">6</span>;
    
    <span class="keyword">while</span>(pos != <span class="number">0 &amp;</span>amp;&amp; find(<span class="string">" 01234567"</span>, buf[pos..pos+<span class="number">1</span>]) != -<span class="number">1</span>) pos++;
    outname = buf[pos..buf.length];
    
    <span class="comment">/* Create output file and set mode.  */</span> 
    outI.create(outname, FileMode.Out);
    
    <span class="comment">/* For each input line:  */</span>
    <span class="keyword">while</span>(!f.eof)
    {
        buf = f.readLine();
        <span class="keyword">if</span> (buf.length &gt; <span class="number">2</span> &amp;&amp; buf[<span class="number">0..</span><span class="number">5</span>] == <span class="string">"end"</span>) <span class="keyword">break</span>;

        <span class="comment">/* n is used to avoid writing out all the characters at the end of the file.  */</span>
        pos = <span class="number">0;
</span>
        n = DEC (buf[pos]);
        <span class="keyword">if</span> (n &lt;= <span class="number">0)
</span>
        <span class="keyword">break</span>;
        <span class="keyword">for</span> (++pos; n &gt; <span class="number">0; </span><span class="comment">/+ p += 4 +/</span> pos += <span class="number">4</span>, n -= <span class="number">3</span>)
        {
            p = buf[pos..buf.length];  
            <span class="keyword">if</span> (n &gt;= <span class="number">3</span>)
            {
                ch = DEC (p[<span class="number">0])</span> &lt;&lt; <span class="number">2</span> | DEC (p[<span class="number">1</span>]) &gt;&gt; <span class="number">4</span>; 
                outI.write(ch); <span class="comment">//fputc(ch,outI);</span>
                ch = DEC (p[<span class="number">1</span>]) &lt;&lt; <span class="number">4</span> | DEC (p[<span class="number">2</span>]) &gt;&gt; <span class="number">2</span>; 
                outI.write(ch);  <span class="comment">//fputc (ch,outI);</span>
                ch = DEC (p[<span class="number">2</span>]) &lt;&lt; <span class="number">6</span> | DEC (p[<span class="number">3</span>]);
                outI.write(ch);  <span class="comment">//fputc (ch,outI);</span>
            }
            <span class="keyword">else</span>
            {
                <span class="keyword">if</span> (n &gt;= <span class="number">1</span>)
                {
                    ch = DEC (p[<span class="number">0])</span> &lt;&lt; <span class="number">2</span> | DEC (p[<span class="number">1</span>]) &gt;&gt; <span class="number">4</span>; 
                    outI.write(ch);
                }
                <span class="keyword">if</span> (n &gt;= <span class="number">2</span>)
                {
                    ch = DEC (p[<span class="number">1</span>]) &lt;&lt; <span class="number">4</span> | DEC (p[<span class="number">2</span>]) &gt;&gt; <span class="number">2</span>; 
                    outI.write(ch);
                }
            }
        }
    }
    outI.close();
    <span class="keyword">return</span> outname;
}



<span class="keyword">int</span> main(<span class="keyword">char</span>[][] argv)
{
    File f;

    <span class="keyword">int</span> argc = argv.length;
    <span class="keyword">debug</span> <span class="keyword">for</span>(<span class="keyword">int</span> i; i&lt;argv.length; i++)
    {
        printf(<span class="string">"Argument %d: %.*s\n"</span>, i, argv[i]);
    }

    <span class="keyword">if</span> (argc &lt;= <span class="number">1</span>) {
            printf(<span class="string">"Usage: %.*s &lt;input file&gt;\n"</span>, argv[<span class="number">0])</span>; 
            <span class="keyword">return</span> <span class="number">1</span>;
    }
    f = <span class="keyword">new</span> File(argv[<span class="number">1</span>]);

    uudecode(f);
    f.close();
    
    printf(<span class="string">"Result decoded in %.*s\n"</span>, outname); 
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre> <p>Revised from <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/4744">digitalmars.D:4744</a>.</p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Keywords</h3><h4 id="ex78">asm</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>D allows the use of inline assembly language</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{    
    <span class="keyword">int</span> myint = <span class="number">1234</span>;
    <span class="keyword">char</span>* mystring = <span class="string">"This number -&gt; %d &lt;- should be 1234\n"</span>;
    
    <span class="keyword">asm</span>
    {
            push    dword ptr myint     ; <span class="comment">// pointer to the integer variable declared in D </span>
            push    dword ptr mystring  ; <span class="comment">// pointer into the C-style string declared in D</span>
            call    printf              ; <span class="comment">// call the printf function</span>
    }


    <span class="comment">/*
        This piece of code is the assembly equivalent of the C/D code
                
            int myint = 1234; 
            printf("This number -&gt; %d &lt;- should be 1234\n", myint);        
    */</span>
}</code></pre>
<p>Expected Output:
<tt>This number -&gt; 1234 &lt;- should be 1234</tt></p>

<p>Inspired by a code snippet found at in the <a href="http://home.comcast.net/%7Efbkotler/nasmdoc8.html#section-8.1.2">NASM manual</a></p>

<p>For more details regarding asm blocks in D, check out the <a href="http://www.digitalmars.com/d/iasm.html">D Specification.</a></p>

<p>This example was tested on a x86 machine. I don't have any idea whether it'd work on any other platforms.</p>

</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex75">auto</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how auto objects differ from non-auto objects.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

Demonstrates the usage of auto keyword.

Note how the auto objects are destroyed as soon as they go out of scope.

*/</span>

<span class="keyword">class</span> A
{
    <span class="keyword">private</span> <span class="keyword">char</span>[] name;
    
    <span class="keyword">char</span>[] toString()
    {
        <span class="keyword">return</span> name;
    }
    
    <span class="keyword">this</span>(<span class="keyword">char</span>[] s)
    {
        name = s;
        printf(<span class="string">"'%.*s' created\n"</span>, name);
    }
    ~<span class="keyword">this</span>()
    {
        printf(<span class="string">"'%.*s' destroyed\n"</span>, name);
    }
}



<span class="keyword">void</span> test2()
{
    <span class="keyword">auto</span> A a2 = <span class="keyword">new</span> A(<span class="string">"test2"</span>);
}



<span class="keyword">void</span> test3()
{
    A a3 = <span class="keyword">new</span> A(<span class="string">"test3"</span>);
}



<span class="keyword">void</span> test4()
{
    <span class="keyword">auto</span> A a4 = <span class="keyword">new</span> A(<span class="string">"test4"</span>);
}



<span class="keyword">void</span> main()
{    
    A a = <span class="keyword">new</span> A(<span class="string">"main test"</span>);    
    printf(<span class="string">"\tbegin main body\n"</span>);
    test2();
    test3();
    test4();
    printf(<span class="string">"\tend main body (garbage collector will run next...)\n"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex57">alias</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>An alias is used to add an additional name that can be used to call a type or function.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">alias</span> printf p;
<span class="keyword">alias</span> <span class="keyword">char</span>[] s;
<span class="keyword">alias</span> <span class="keyword">void</span> v;

v main(s[] a)
{
    p(<span class="string">"Command used to start program: %.*s\n"</span>, a[<span class="number">0])</span>;   
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex45">interface</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A simple example of a sophisticated abtraction tool.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

    File:       interface.d
    Author:     J C Calvarese, http://jcc_7.tripod.com/d/
                (Inspired by a newsgroup post by Hauke Duden, http://www.digitalmars.com/drn-bin/wwwnews?D/20956.)
    Purpose:    To demonstrate using an interface.

More information is available in the  D Specification, http://www.digitalmars.com/d/class.html#interface.

*/</span>

<span class="keyword">interface</span> I
{
    <span class="keyword">void</span> a();
    <span class="keyword">void</span> b();
}

<span class="keyword">class</span> Impl : I
{
    <span class="keyword">void</span> a()
    {
    }

    <span class="keyword">void</span> b()
    {
    }

}


<span class="keyword">class</span> Kid : Impl
{
    <span class="keyword">void</span> b()
    {
        printf(<span class="string">"overriden method\n\0"</span>);
    }

}



<span class="keyword">void</span> main()
{  
    Kid k = <span class="keyword">new</span> Kid();
    k.b();
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex49">dchar</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>The dchar type is like char, but bigger (corresponds to a UTF-32 Unicode code unit).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

    File:       dchar.d
    Author:     J C Calvarese, http://jcc_7.tripod.com/d/
    License:    Public Domain
    Purpose:    To show usage of the dchar character type.

*/</span>

<span class="keyword">void</span> main()
{ 
    <span class="keyword">dchar</span> c = <span class="string">'0'</span>;
    
    <span class="keyword">if</span> (c == <span class="string">'\U000000AA'</span> || c == <span class="string">'\U000000BA'</span>) 
    
    <span class="comment">/* 
        Character literals must be quoted (no "naked" escape sequences allowed) 
        If it was a string literal, quotes are optional.
    */</span>
    
        printf(<span class="string">"True\n"</span>);
    <span class="keyword">else</span>
        printf(<span class="string">"False\n"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex74">final</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows the usage of the final keyword on a class.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 
This example won't compile with either "final" compiled in: 
final.d(34): function toString cannot override final function toString  
*/</span> </code></pre> Apparently similar to <a href="http://www.glenmccl.com/perfj_025.htm">Java's final</a>.<pre><code class="example"><span class="comment">/+final+/</span> <span class="keyword">class</span> A
{
    <span class="keyword">private</span> <span class="keyword">char</span>[] name;
    
    <span class="comment">/+final+/</span> <span class="keyword">char</span>[] toString()
    {
        <span class="keyword">return</span> name;
    }
    
    <span class="keyword">this</span>(<span class="keyword">char</span>[] s)
    {
        name = s;
        printf(<span class="string">"'%.*s' created\n"</span>, name);
    }
    ~<span class="keyword">this</span>()
    {
        printf(<span class="string">"'%.*s' destroyed\n"</span>, name);
    }
}


<span class="keyword">class</span> B: A <span class="comment">/+ If class A is final this wouldn't work. +/</span>
{
    <span class="keyword">char</span>[] name;

    <span class="keyword">char</span>[] toString() <span class="comment">/* If this method were final in class A, this would cause a compile error. */</span>
    {
        <span class="keyword">return</span> name;
    }

    <span class="keyword">this</span>(<span class="keyword">char</span>[] s)
    {
        <span class="keyword">super</span>(s);
    }
    ~<span class="keyword">this</span>()
    {
        printf(<span class="string">"'%.*s' destroyed\n"</span>, name);
    }
}



<span class="keyword">void</span> main()
{    
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex89">goto</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>D supports goto (but you're not required to use it).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

File:       goto.d
Date:       2004-02-16
Author:     by J C Calvarese, http://jcc_7.tripod.com/d/
License:    Public Domain
Purpose:    Shows the usage of goto and labels.

Why goto is part of the D programming language...
* goto is part of C, so it can facilitate porting of C/C++ code.
* goto is easy to implement.

Why you should avoid using goto...
* If you use too many goto's you can run into the spaghetti code syndrome.
* Using goto can make the code more difficult to understand for yourself and other.
* Usually, there's an easy way to do it without goto.

In the end, it's each programmer's choice, but I think that goto use should be minimized.

*/</span>


<span class="keyword">void</span> main()
{

thebeginning:
    printf(<span class="string">"The beginning\n"</span>);

part1:
    printf(<span class="string">"Part 1\n"</span>);

part2:
    printf(<span class="string">"Part 2\n"</span>);
    <span class="keyword">goto</span> part5;

part3:
    printf(<span class="string">"Part 3\n"</span>);

part4:
    printf(<span class="string">"Part 4\n"</span>);

part5:
    printf(<span class="string">"Part 5\n"</span>);

theend:
    printf(<span class="string">"The end\n"</span>);

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex92">return</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Return exits a function</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 
    Return exits a function. 
    If it's not a void function return allows you to return a value. 
*/</span>

<span class="keyword">void</span> f1() 
{
    printf(<span class="string">"Running f1...\n"</span>);    
}

<span class="keyword">void</span> f2() 
{ 
    <span class="keyword">bit</span> itsAGoodIdea = <span class="keyword">true</span>;

    printf(<span class="string">"Running f2...\n"</span>);
    
    <span class="keyword">if</span>(itsAGoodIdea)
    {
        f1();
        <span class="keyword">return</span>; 
    }
    printf(<span class="string">"Don't go there.\n"</span>);
}


<span class="keyword">void</span> main()
{
    f2();
    printf(<span class="string">"The end.\n"</span>);
}

<span class="comment">/*

Output:

Running f2...
Running f1...
The end.

*/</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Arrays</h3><h4 id="ex104">Delete All Keys From Associative Array</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Show a couple ways that all keys can be removed from an associate array.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* starting post: http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/4199 */</span>

<span class="keyword">void</span> main()
{
    <span class="keyword">char</span>[][<span class="keyword">char</span>[]] aA;
    printf(<span class="string">"Fill in the array.\n"</span>);
    aA[<span class="string">"a"</span>] = <span class="string">"Apple"</span>;
    aA[<span class="string">"b"</span>] = <span class="string">"Book"</span>;
    aA[<span class="string">"c"</span>] = <span class="string">"Car"</span>;

    checkArray(aA);


    <span class="comment">/* Clearing method from http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/4201 */</span>

    printf(<span class="string">"Clear out the items (implementation-dependent).\n"</span>);
    aA = <span class="keyword">null</span>; 

    checkArray(aA);



    printf(<span class="string">"\nFill in the array, again.\n"</span>);
    aA[<span class="string">"a"</span>] = <span class="string">"Apple"</span>;
    aA[<span class="string">"b"</span>] = <span class="string">"Book"</span>;
    aA[<span class="string">"c"</span>] = <span class="string">"Car"</span>;

    checkArray(aA);


    <span class="comment">/* Clearing method from http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/4202 */</span>

    printf(<span class="string">"Removes it from the hash, doesn't delete the thing.\n"</span>);
    <span class="keyword">foreach</span>(<span class="keyword">char</span>[] key; aA.keys)
      <span class="keyword">delete</span> aA[key];  
        
    checkArray(aA);
}



<span class="keyword">void</span> checkArray(<span class="keyword">char</span>[][<span class="keyword">char</span>[]] assocArr)
{
    printf(<span class="string">"%d\t"</span>, assocArr.length);

    <span class="keyword">if</span>(<span class="string">"a"</span> <span class="keyword">in</span> assocArr)
        printf(<span class="string">"yes 'a'\t"</span>);
    <span class="keyword">else</span>
        printf(<span class="string">"no 'a'\t"</span>);
    <span class="keyword">if</span>(<span class="string">"b"</span> <span class="keyword">in</span> assocArr)
        printf(<span class="string">"yes 'b'\t"</span>);
    <span class="keyword">else</span>
        printf(<span class="string">"no 'b'\t"</span>);
    <span class="keyword">if</span>(<span class="string">"c"</span> <span class="keyword">in</span> assocArr)
        printf(<span class="string">"yes 'c'\t"</span>);
    <span class="keyword">else</span>
        printf(<span class="string">"no 'c'\t"</span>);
    <span class="keyword">if</span>(<span class="string">"d"</span> <span class="keyword">in</span> assocArr)
        printf(<span class="string">"yes 'd'\n"</span>);
    <span class="keyword">else</span>
        printf(<span class="string">"no 'd'\n"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex149">Static vs dynamic arrays</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows the use of static and dynamic arrays, when references are copied and duplication is needed.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.string;

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    <span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];
    <span class="keyword">static</span> <span class="keyword">int</span>[<span class="number">4</span>] a1 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>];
    <span class="keyword">int</span>[<span class="number">4</span>] b, c;
    <span class="keyword">int</span>[] d, e;
    
    <span class="comment">// initialize the vector a with the values from a1 (i = 0..2, j = a1[0] .. a1[2])</span>
    <span class="keyword">foreach</span> (<span class="keyword">int</span> i, <span class="keyword">int</span> j; a1)
        a[i] = j / <span class="number">10</span>;
    printf(<span class="string">"a1[2] = %d\n"</span>, a1[<span class="number">2</span>]);
    <span class="comment">// copy the vector a1 in the vector b</span>
    b[] = a1;
    printf(<span class="string">"\tb[2] = %d\n"</span>, b[<span class="number">2</span>]);
    <span class="comment">// duplicate the vector a1 in the vector b (not needed for static arrays)</span>
    c[] = a1.dup;
    printf(<span class="string">"\tc[2] = %d\n"</span>, c[<span class="number">2</span>]);
    printf(<span class="string">"a[2] = %d\n"</span>, a[<span class="number">2</span>]);
    <span class="comment">// copy the vector a in the vector c (d is dynamic, so only the reference is copied)</span>
    d = a[];
    printf(<span class="string">"\td[2] = %d\n"</span>, d[<span class="number">2</span>]);
    <span class="comment">// duplicate the vector a in the vector c (in this case it makes difference)</span>
    e = a[].dup;
    printf(<span class="string">"\te[2] = %d\n"</span>, e[<span class="number">2</span>]);
    <span class="comment">// now a1[2] is modified</span>
    a1[<span class="number">2</span>] = <span class="number">0;
</span>
    printf(<span class="string">"a1[2] = %d\n"</span>, a1[<span class="number">2</span>]);
    <span class="comment">// b is not modified</span>
    printf(<span class="string">"\tb[2] = %d\n"</span>, b[<span class="number">2</span>]);
    <span class="comment">// neither is c</span>
    printf(<span class="string">"\tc[2] = %d\n"</span>, c[<span class="number">2</span>]);
    <span class="comment">// now a[2] is modified</span>
    a[<span class="number">2</span>] = <span class="number">0;
</span>
    printf(<span class="string">"a[2] = %d\n"</span>, a[<span class="number">2</span>]);
    <span class="comment">// d IS modified, because it is just a reference</span>
    printf(<span class="string">"\td[2] = %d\n"</span>, d[<span class="number">2</span>]);
    <span class="comment">// e IS NOT modified, because it is a copy</span>
    printf(<span class="string">"\te[2] = %d\n"</span>, e[<span class="number">2</span>]);
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex150">Dealing with strings copy</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This example shows several ways to declare strings and how their copy is managed.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.string;

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    <span class="keyword">char</span>[] s = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">4</span>];
    <span class="keyword">char</span>[] s1;
    <span class="keyword">char</span>[] s2;
    <span class="keyword">char</span>[<span class="number">4</span>] s3;
    <span class="keyword">char</span>[] s4 = <span class="string">"hello"</span>;
    <span class="keyword">char</span>[<span class="number">6</span>] s5 = <span class="string">"hello1"</span>; 
    
    s = <span class="string">"a"</span>;
    printf(<span class="string">"s = %.*s\n"</span>, s);
    <span class="comment">// memory is automatically allocated</span>
    s1 = <span class="string">"b"</span>;
    printf(<span class="string">"s1 = %.*s\n"</span>, s1);
    <span class="comment">// in this way a reference is copied ...</span>
    s2 = s4;
    printf(<span class="string">"s2 = %.*s\n"</span>, s2);
    s4[<span class="number">3</span>] = <span class="string">'p'</span>;
    s4[<span class="number">4</span>] = <span class="string">'\0'</span>;
    <span class="comment">// ... and the string s2 IS modified too</span>
    printf(<span class="string">"s2 = %.*s\n"</span>, s2);
    <span class="comment">// s3 = "c"; no: static strings cannot change references</span>
    <span class="comment">// but we can copy in them new values without worrying about dup (here we copy the first chars)</span>
    <span class="comment">// we must use slices to match the dimensions</span>
    s3[] = s5[<span class="number">0..</span><span class="number">4</span>];
    s = s5;
    s1 = s5.dup;
    s5[<span class="number">3</span>] = <span class="string">'p'</span>;
    s5[<span class="number">4</span>] = <span class="string">'\0'</span>;
    <span class="comment">// static arrays will always have a copy of data</span>
    printf(<span class="string">"s3 = %.*s\n"</span>, s3);
    <span class="comment">// in this case the reference IS changed</span>
    printf(<span class="string">"s = %.*s\n"</span>, s);
    <span class="comment">// to avoid the previous behaviour we must duplicate the contents with dup</span>
    printf(<span class="string">"s1 = %.*s\n"</span>, s1);
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex151">Arrays of classes</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>How to allocate arrays of classes and pass them to functions.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.string;

<span class="keyword">class</span> A {
    
    <span class="keyword">int</span> n;
    
    <span class="keyword">this</span>(<span class="keyword">int</span> n1)
    {
        n = n1;
        <span class="comment">// we are in the constructor</span>
        printf(<span class="string">"Constructor (n = %d)\n"</span>, n);
    }
    
    <span class="comment">// operator to convert class A to a string</span>
    <span class="keyword">char</span>[] toString()
    {
        <span class="keyword">char</span>[] ris;
        ris = .toString(n);
        <span class="keyword">return</span> ris;
    }
    
}

<span class="keyword">void</span> Print(A[] a)
{   
    <span class="comment">// print all the elements of array "a"</span>
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; a.length; i++) {
        printf(<span class="string">"A%.*s\n"</span>, .toString(a[i].n));
    }
}

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
   A[] a;
    
    <span class="comment">// allocate the memory</span>
    a.length = <span class="number">5</span>;
    <span class="comment">// i is a counter, j gets a pointer to A</span>
    <span class="keyword">foreach</span> (<span class="keyword">int</span> i, A j; a) {
        <span class="comment">// allocate the element j and copy the reference to a[i]</span>
        a[i] = j = <span class="keyword">new</span> A(i);
        printf(<span class="string">"A%.*s\n"</span>, j.toString());
    }
    Print(a);
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex67">Various char arrays</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows usage for some dynamic char arrays</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.string;


<span class="keyword">char</span>[][][] FieldValues;
<span class="keyword">char</span>[][] Fields;
<span class="keyword">char</span>[] myStr;

<span class="keyword">int</span>[] nums;
<span class="keyword">int</span>[][] morenums;



<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{

    <span class="keyword">int</span> i;
    <span class="keyword">for</span>(i=<span class="number">0; </span>i&lt;args.length; i++)
    {
        printf(<span class="string">"\n"</span> ~ args[i] ~ <span class="string">"\n"</span>);
    }

    nums.length = <span class="number">5</span>;
    nums[<span class="number">0] </span>= <span class="number">47</span>;
    printf(toString(nums[<span class="number">0])</span>);


    morenums.length = <span class="number">10</span>;
    morenums[<span class="number">0].</span>length = <span class="number">10</span>;
    morenums[<span class="number">0][</span><span class="number">0] </span>= <span class="number">56</span>;
    printf(toString(morenums[<span class="number">0][</span><span class="number">0])</span>);


    Fields.length = <span class="number">15</span>;
    Fields[][<span class="number">0] </span>= <span class="string">"Testing (2d)         blah blah blah.........\n"</span>;
    printf(Fields[][<span class="number">0])</span>;

    printf(<span class="string">"Hello.\n"</span>);

    myStr = <span class="string">"My string!"</span>;
    FieldValues.length = <span class="number">10</span>;
    FieldValues[<span class="number">0].</span>length = <span class="number">10</span>;
    FieldValues[][<span class="number">0][</span><span class="number">0] </span>= myStr; <span class="comment">//"Testing.";    </span>
    
    printf(FieldValues[][<span class="number">0][</span><span class="number">0])</span>;


    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex65">Dimensioning Static Arrays</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows two ways that arrays can be dimensioned.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{

    <span class="comment">/* 
        Believe it or not, but these two arrays        
        have the same dimensions. 
    */</span>

    <span class="keyword">int</span>[<span class="number">20</span>][<span class="number">2</span>] whatever;
    <span class="keyword">int</span> whatever2[<span class="number">2</span>][<span class="number">20</span>];


    whatever[<span class="number">0][</span><span class="number">19</span>] = <span class="number">2</span>;
    whatever2[<span class="number">0][</span><span class="number">19</span>] = <span class="number">2</span>;

}

<span class="comment">/* inspired by http://www.digitalmars.com/drn-bin/wwwnews?D/22869 */</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex86">Returning Arrays from Functions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to return arrays from functions.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">int</span>[] someFunction() <span class="comment">/* dynamic array */</span> 
{
    <span class="keyword">int</span>[] i;

    i.length = <span class="number">5</span>;
    i[<span class="number">0] </span>= <span class="number">1</span>;
    i[<span class="number">1</span>] = <span class="number">1</span>;
    i[<span class="number">2</span>] = <span class="number">2</span>;
    i[<span class="number">3</span>] = <span class="number">3</span>;
    i[<span class="number">4</span>] = <span class="number">5</span>;
    <span class="keyword">return</span> i;
}


<span class="keyword">struct</span> fa_int5  <span class="comment">/* struct wrapper */</span>
{
    <span class="keyword">int</span>[<span class="number">5</span>] i; <span class="comment">/* static array */</span>
}


fa_int5 someFunction2()
{
    fa_int5 k;

    k.i[<span class="number">0] </span>= <span class="number">1</span>;
    k.i[<span class="number">1</span>] = <span class="number">1</span>;
    k.i[<span class="number">2</span>] = <span class="number">2</span>;
    k.i[<span class="number">3</span>] = <span class="number">3</span>;
    k.i[<span class="number">4</span>] = <span class="number">5</span>;
    <span class="keyword">return</span> k;
}


<span class="keyword">void</span> main()
{
    <span class="keyword">int</span>[] j = someFunction();
    fa_int5 m;

    m = someFunction2();
    <span class="keyword">int</span>[<span class="number">5</span>] n = m.i;
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex100">Using char[][] args</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A basic way to use the 'args' variable in the 'main' function.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* Originally posted by Anonymous (2004-06-23 17:43:49) */</span>

<span class="comment">/*
to use, type:
[program name] -p [string to print]

This could be more complicated, but this'll give you an idea on
how to use arguments in your program.
*/</span>
<span class="comment">// the start of the program</span>
<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    <span class="comment">// check to make sure that the number of args is correct</span>
    <span class="keyword">if</span>(args.length &lt; <span class="number">2</span>) <span class="comment">// the first argument is the program name...</span>
    {
        printf(<span class="string">"No arguments given.\n"</span>);
        <span class="keyword">return</span> <span class="number">0;
</span>
    }

    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; args.length;i++)
    {
        <span class="keyword">if</span>(args[i][<span class="number">0 .</span>. <span class="number">2</span>] == <span class="string">"-p"</span>)
        {
            <span class="keyword">for</span>(<span class="keyword">int</span> ii = i+<span class="number">1</span>; ii &lt; args.length;ii++)
            {
                printf(<span class="string">"%.*s "</span>, args[ii]);
            }
            printf(<span class="string">"\n"</span>);
        }
    }
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Common Errors</h3><h4 id="ex79">Increasing the Size of a Dynamic Array</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>You can't use "r.length++;" to increase the size of a dynamic array.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*     
    File:    inc.d
    Author:  J C Calvarese, http://jcc_7.tripod.com/d/
    Date:    2003/11/11
    Licence: Public domain
*/</span>

<span class="keyword">int</span> main()
{
    <span class="keyword">char</span>[] r;
    <span class="keyword">int</span> c;


    <span class="keyword">if</span>(r.length &lt; c) 
    r.length = r.length + <span class="number">1</span>;

    <span class="comment">/* "r.length++;" isn't allowed. */</span>


    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex80">Using Objects</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Objects have to be initialized before they are used.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">void</span> main()
{  
   Object o;

    <span class="comment">/* An access violation will occur if the following statement is omitted. */</span>
    o = <span class="keyword">new</span> Object(); 

   printf(<span class="string">"%.*s"</span>, o.toString);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex83">Printing a Slice from a String</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows the trick for printing a slice from a character string.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">int</span> main( <span class="keyword">char</span> [] [] args ) 
{ 
    <span class="keyword">char</span>[] pr = <span class="string">"Hello Jon Thoroddsen !"</span>[<span class="number">0..</span><span class="number">5</span>];

    printf(pr ~ <span class="string">\0</span>); 
    <span class="comment">/* If the \0 isn't appended, you might get more characters than you expected. */</span>

    <span class="keyword">return</span> <span class="number">1</span>;
}</code></pre> <p>Based on code in post <a href="http://www.digitalmars.com/drn-bin/wwwnews?D/19840">D:19840</a> by Jon Thoroddsen.</p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Delegates</h3><h4 id="ex102">DelegateTest.d</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A
simple example of how to use delegates within objects, as delegates are
usually used for GUI event handling such as in Delphi or C#. Example:</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// Simple sample: how to use delegates within objects</span>
<span class="keyword">import</span> std.c.stdio;

<span class="comment">// DelegateClass: a class with declared delegate function "printText"</span>
<span class="keyword">class</span> DelegateClass 
{
    <span class="keyword">public</span> <span class="keyword">void</span> <span class="keyword">delegate</span>(<span class="keyword">char</span>[] ) printText;
}

<span class="keyword">int</span> main()
{
    <span class="comment">// Function print</span>
    <span class="keyword">void</span> print(<span class="keyword">char</span>[] text) { printf(text); }

    <span class="comment">// Initialize a DelegateClass</span>
    DelegateClass delclass = <span class="keyword">new</span> DelegateClass();

        <span class="comment">// Assign the delegate "printText" to function "print"</span>
    delclass.printText = &amp;print;

    <span class="comment">// Call printText to test</span>
    delclass.printText(<span class="string">"HELLO\n"</span>);

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex107">Delegates</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>If you have an interface with only 1 function, use a delegate instead because it is more flexible.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.stdio;

<span class="keyword">interface</span> Foo {
    <span class="keyword">int</span> foo();
}

<span class="keyword">class</span> MyClass : Foo {
    <span class="keyword">int</span> foo() { 

        <span class="comment">/* whatever */</span>

        writefln(<span class="string">"MyClass.foo() called"</span>) ;
        <span class="keyword">return</span> <span class="number">0;
</span>
    };
}


<span class="keyword">class</span> ForgotFooClass {

  <span class="comment">/* 
    Note that this class has the right functions to implement Foo, but
    I didn't add Foo interface to the list, so it's not compatible.
   */</span>

<span class="keyword">int</span> foo() {
 
        <span class="comment">/* whatever */</span> 

        writefln(<span class="string">"ForgotFooClass.foo() called"</span>) ;
        <span class="keyword">return</span> <span class="number">1</span>; 
    };
}


<span class="keyword">class</span> AnotherClass {
    <span class="keyword">int</span> bar() { 
        <span class="comment">/* whatever */</span> 
        writefln(<span class="string">"AnotherClass.bar() called"</span>) ;
        <span class="keyword">return</span> <span class="number">2</span>; 
    };
}


<span class="keyword">int</span> main() {
    MyClass m = <span class="keyword">new</span> MyClass;
    ForgotFooClass f = <span class="keyword">new</span> ForgotFooClass;
    AnotherClass a = <span class="keyword">new</span> AnotherClass;


<span class="comment">//    doStuff1(a); /* can't call this */</span>
<span class="comment">/* 
Error:
 function doStuff1 (Foo f) does not match argument types (AnotherClass)
 cannot implicitly convert AnotherClass to Foo
*/</span>

    doStuff1(m); <span class="comment">/* legal call because MyClass derived from Foo */</span>

<span class="comment">//    doStuff1(f); /* can't call this because ForgotFooClass didn't derive from Foo */</span>

<span class="comment">//    doStuff2(f); /* can't call this */</span>
<span class="comment">/* 
Error:
 function doStuff2 (int delegate()d) does not match argument types (ForgotFooClass )
 cannot implicitly convert ForgotFooClass to int delegate()
*/</span>

<span class="comment">//    doStuff(a); /* can't call this because there is no matching function name for the Foo interface */</span>

 <span class="comment">/* 
  * these all work because the delegate can be extracted from the class without
  * it having to be part of the class declaration.
  */</span>

    writefln();
    doStuff2(&amp;m.foo);
    writefln();
    doStuff2(&amp;f.foo);
    writefln();
    doStuff2(&amp;a.bar);  <span class="comment">/* the delegate can be a member with ANY name */</span>

    <span class="keyword">return</span> <span class="number">0;
</span>
}

<span class="keyword">void</span> doStuff1(Foo f) {
    writefln(<span class="string">"doStuff1: f.foo() returned value = %d"</span>, f.foo()) ;
}

<span class="keyword">void</span> doStuff2(<span class="keyword">int</span> <span class="keyword">delegate</span>() d) {
    writefln(<span class="string">"doStuff2: d() returned value = %d"</span>, d()) ;
}

<span class="comment">/* Original contribution by Russ Lewis. Changed based on suggestions by Blandger. */</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex108">Proper creation &amp; use of stack delegates</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This shows some basic example code using stack delegates.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.stdio;

<span class="comment">/* A stack delegate, like any other delegate, is comprised of two pointers:
 * a funtion pointer, and a data pointer.  The data pointer is passed to the
 * function as an invisible argument (just like 'this' is passed to member
 * functions of a class.
 *
 * In the case of stack delegates, the pointer points to the stack frame where
 * the local variables are stored.  Modifying those variables inside a stack
 * delegate will modify the actual variables in the stack frame.
 */</span>

<span class="keyword">void</span> bar(<span class="keyword">void</span> <span class="keyword">delegate</span>() d) {
  writefln(<span class="string">"--- bar( void delegate() d) called --- "</span>);
  d();
}


<span class="keyword">void</span> foo() {
    <span class="keyword">int</span> a = <span class="number">1</span>;
    <span class="keyword">int</span> b = <span class="number">2</span>;
    <span class="keyword">int</span> c = <span class="number">3</span>;

    writefln(<span class="string">"Start foo().
    Initial local values are a = %d, b = %d, c = %d"</span>, a,b,c);

    <span class="comment">/* note that the stack delegate is declared as a delegate literal here.
     * Internally, the compiler declares an anonymous function, and the pointer
     * to the function is stored as the delegate's function pointer.
     */</span>

    bar(<span class="keyword">delegate</span> <span class="keyword">void</span>() { a = <span class="number">4</span>; b = <span class="number">5</span>; c = <span class="number">6</span>; } );

    <span class="comment">/* because bar() called the stack delegate, these values have changed */</span>

    writefln(<span class="string">"After calling bar(delegate) inside foo().
    Changed local values are a = %d, b = %d, c = %d"</span>, a,b,c);

    <span class="keyword">assert</span>(a == <span class="number">4</span>);
    <span class="keyword">assert</span>(b == <span class="number">5</span>);
    <span class="keyword">assert</span>(c == <span class="number">6</span>);
}


<span class="keyword">int</span> main() {

    foo();  

    <span class="keyword">return</span> <span class="number">0;
</span>
}

<span class="comment">/* Original contribution by Russ Lewis. Changed based on suggestions by Blandger. */</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex109">Don't Return a Stack Delegate</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This shows code that is BROKEN, namely returning a stack delegate from a function.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* NOTE NOTE NOTE
 *
 * THIS CODE IS BROKEN.  This is an example of something that you
 * should NOT do!
 *
 * You can never return a stack delegate because the data pointer of that
 * delegate points to the stack frame where the delegate was created.  Once
 * you return from the function, that stack frame goes away and the memory
 * is reused by some other function.
 *
 * Most likely, when you call this stack delegate, your program won't crash
 * (since the pointer points to a valid address in the stack), but you will be
 * reading trash values, since the memory has been reused by some other
 * function.
 *
 * Of course, if one of the variables is a pointer, then you would crash when
 * you read &amp; follow the pointer that is no longer valid.
 */</span>

<span class="keyword">import</span> std.stdio;

<span class="keyword">int</span> <span class="keyword">delegate</span>() foo() {
    <span class="keyword">int</span> a = <span class="number">1</span>;
    <span class="keyword">int</span> b = <span class="number">2</span>;

    writefln(<span class="string">"int delegate() foo() is called. Locals a = %d, b = %d"</span>, a, b);
    writefln(<span class="string">"BUG!  You must NEVER return a stack delegate!"</span>);

    <span class="keyword">return</span> <span class="keyword">delegate</span> <span class="keyword">int</span>() { <span class="keyword">return</span> a+b; };
}


<span class="keyword">int</span> main() { 
    foo();
    <span class="keyword">return</span> <span class="number">0;
</span>
}

<span class="comment">/* Original contribution by Russ Lewis. Changed based on suggestions by Blandger. */</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex110">Copyable stack delegates, implemented with structs and classes</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Some
examples of how to copy a stack's local variables. Useful if you don't
want to modify the original local variables, or if you want to return a
stack delegates.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* This shows two different ways of creating a pseudo-copied stack delegate.
 *
 * The struct method is more efficient.  However, it is a bit harder to write &amp; understand.
 * Also, it requires that you build a delegate by hand using a union, and that may not be
 * portable across all platforms or compilers.
 *
 * The class method is easier to understand and should be totally portable.  However,
 * it is less efficient because of the overhead inherent in a class.
 */</span>

<span class="keyword">import</span> std.c.stdio;

<span class="keyword">int</span> RunDelegate(<span class="keyword">int</span> <span class="keyword">delegate</span>() d, <span class="keyword">int</span> count) {
  <span class="keyword">assert</span>(count &gt; <span class="number">0);</span>
  <span class="keyword">int</span> ret;
  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0; </span>i&lt;count; i++) {
    ret = d();
<span class="comment">/*    printf("RunDelegate: cycle %d of %d returned %d\n", i+1,count,ret); */</span>
  }
  <span class="keyword">return</span> ret;
}

<span class="keyword">int</span> main() {
  <span class="keyword">int</span> <span class="keyword">delegate</span>() d1 = getS(<span class="number">2</span>);
  <span class="keyword">int</span> <span class="keyword">delegate</span>() d2 = getS(<span class="number">3</span>);
  <span class="keyword">int</span> <span class="keyword">delegate</span>() d3 = getC(<span class="number">2</span>);
  <span class="keyword">int</span> <span class="keyword">delegate</span>() d4 = getC(<span class="number">3</span>);

  printf(<span class="string">"main: RunDelegate(d1,4) returned %d\n"</span>, RunDelegate(d1,<span class="number">4</span>));
  printf(<span class="string">"main: RunDelegate(d1,4) returned %d\n"</span>, RunDelegate(d1,<span class="number">4</span>));
  printf(<span class="string">"main: RunDelegate(d2,4) returned %d\n"</span>, RunDelegate(d2,<span class="number">4</span>));
  printf(<span class="string">"main: RunDelegate(d2,4) returned %d\n"</span>, RunDelegate(d2,<span class="number">4</span>));
  printf(<span class="string">"main: RunDelegate(d3,4) returned %d\n"</span>, RunDelegate(d3,<span class="number">4</span>));
  printf(<span class="string">"main: RunDelegate(d3,4) returned %d\n"</span>, RunDelegate(d3,<span class="number">4</span>));
  printf(<span class="string">"main: RunDelegate(d4,4) returned %d\n"</span>, RunDelegate(d4,<span class="number">4</span>));
  printf(<span class="string">"main: RunDelegate(d4,4) returned %d\n"</span>, RunDelegate(d4,<span class="number">4</span>));

  <span class="keyword">return</span> <span class="number">0;
</span>
}

<span class="comment">/* both getS() and getC() return stack-copy style delegates.  In each case,
 * the delegate stores the argument to the function, and a counter.  Each time
 * that the delegate is called, the counter is multiplied by the argument, and
 * the result is returned.
 *
 * The end result is that, if you create a delegate with an argument of x and you
 * call it y times, then the y-th time it will return
 *     x^y
 */</span>

<span class="comment">/* getS() returns the delegate using the struct method;
 * getC() returns the delegate using the class method.
 */</span>

<span class="keyword">struct</span> GetS_Data {
  <span class="keyword">int</span> base;
  <span class="keyword">int</span> counter;
};
<span class="keyword">union</span> delegate_union {
  <span class="keyword">int</span> <span class="keyword">delegate</span>() dg;
  <span class="keyword">struct</span> {
    <span class="keyword">void</span> *ptr;
    <span class="keyword">int</span> <span class="keyword">function</span>(<span class="keyword">void</span>*) func;
  };
};
<span class="keyword">int</span> <span class="keyword">delegate</span>() getS(<span class="keyword">int</span> base) {
  GetS_Data *data = <span class="keyword">new</span> GetS_Data[<span class="number">1</span>];
  data.base = base;
  data.counter = <span class="number">1</span>;

  delegate_union u;
  u.func = <span class="keyword">function</span> <span class="keyword">int</span>(<span class="keyword">void</span> *arg) {
             GetS_Data *data = <span class="keyword">cast</span>(GetS_Data*)arg;
             data.counter *= data.base;
             <span class="keyword">return</span> data.counter;
           };
  u.ptr = data;

  <span class="keyword">return</span> u.dg;
}

<span class="keyword">class</span> GetC_Data {
  <span class="keyword">int</span> counter;
  <span class="keyword">int</span> base;

  <span class="keyword">this</span>(<span class="keyword">int</span> base) {
    <span class="keyword">this</span>.base = base;
    <span class="keyword">this</span>.counter = <span class="number">1</span>;
  }

  <span class="keyword">int</span> func() {
    counter *= base;
    <span class="keyword">return</span> counter;
  }
}

<span class="keyword">int</span> <span class="keyword">delegate</span>() getC(<span class="keyword">int</span> base) {
  GetC_Data data = <span class="keyword">new</span> GetC_Data(base);
  <span class="keyword">return</span> &amp;data.func;
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex112">Copyable stack delegates (with writefln)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Some
examples of how to copy a stack's local variables. Useful if you don't
want to modify the original local variables, or if you want to return a
stack delegates.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* This shows two different ways of creating a pseudo-copied stack delegate.
 *
 * The struct method is more efficient.  However, it is a bit harder to write &amp; understand.
 * Also, it requires that you build a delegate by hand using a union, and that may not be
 * portable across all platforms or compilers.
 *
 * The class method is easier to understand and should be totally portable.  However,
 * it is less efficient because of the overhead inherent in a class.
 */</span>

<span class="keyword">import</span> std.stdio;

<span class="keyword">int</span> RunDelegate(<span class="keyword">int</span> <span class="keyword">delegate</span>() d, <span class="keyword">int</span> count) {
    <span class="keyword">assert</span>(count &gt; <span class="number">0);</span>
    <span class="keyword">int</span> ret;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0; </span>i&lt;count; i++) {
        ret = d();
<span class="comment">//        writefln("RunDelegate: cycle %d of %d returned %d\n", i+1,count,ret);</span>
    }
    <span class="keyword">return</span> ret;
}

<span class="keyword">int</span> main() {
    <span class="keyword">int</span> <span class="keyword">delegate</span>() d1 = getS(<span class="number">2</span>);
    <span class="keyword">int</span> <span class="keyword">delegate</span>() d2 = getS(<span class="number">3</span>);
    <span class="keyword">int</span> <span class="keyword">delegate</span>() d3 = getC(<span class="number">2</span>);
    <span class="keyword">int</span> <span class="keyword">delegate</span>() d4 = getC(<span class="number">3</span>);

    writefln(<span class="string">"main: RunDelegate(d1,4) returned %d"</span>, RunDelegate(d1,<span class="number">4</span>));
    writefln(<span class="string">"main: RunDelegate(d1,4) returned %d"</span>, RunDelegate(d1,<span class="number">4</span>));

    writefln(<span class="string">"main: RunDelegate(d2,4) returned %d"</span>, RunDelegate(d2,<span class="number">4</span>));
    writefln(<span class="string">"main: RunDelegate(d2,4) returned %d"</span>, RunDelegate(d2,<span class="number">4</span>));

    writefln(<span class="string">"main: RunDelegate(d3,4) returned %d"</span>, RunDelegate(d3,<span class="number">4</span>));
    writefln(<span class="string">"main: RunDelegate(d3,4) returned %d"</span>, RunDelegate(d3,<span class="number">4</span>));

    writefln(<span class="string">"main: RunDelegate(d4,4) returned %d"</span>, RunDelegate(d4,<span class="number">4</span>));
    writefln(<span class="string">"main: RunDelegate(d4,4) returned %d"</span>, RunDelegate(d4,<span class="number">4</span>));

    <span class="keyword">return</span> <span class="number">0;
</span>
}

    <span class="comment">/* both getS() and getC() return stack-copy style delegates.  In each case,
     * the delegate stores the argument to the function, and a counter.  Each time
     * that the delegate is called, the counter is multiplied by the argument, and
     * the result is returned.
     *
     * The end result is that, if you create a delegate with an argument of x and you
     * call it y times, then the y-th time it will return
     *     x^y
     */</span>

    <span class="comment">/* getS() returns the delegate using the struct method;
     * getC() returns the delegate using the class method.
     */</span>

<span class="keyword">struct</span> GetS_Data {
    <span class="keyword">int</span> base;
    <span class="keyword">int</span> counter;
};

<span class="keyword">union</span> delegate_union {
    <span class="keyword">int</span> <span class="keyword">delegate</span>() dg;
    <span class="keyword">struct</span> {
        <span class="keyword">void</span> *ptr;
        <span class="keyword">int</span> <span class="keyword">function</span>(<span class="keyword">void</span>*) func;
    };
};

<span class="keyword">int</span> <span class="keyword">delegate</span>() getS(<span class="keyword">int</span> base) {
    GetS_Data *data = <span class="keyword">new</span> GetS_Data[<span class="number">1</span>];
    data.base = base;
    data.counter = <span class="number">1</span>;

    delegate_union u;
    u.func = <span class="keyword">function</span> <span class="keyword">int</span>(<span class="keyword">void</span> *arg) {
             GetS_Data *data = <span class="keyword">cast</span>(GetS_Data*)arg;
             data.counter *= data.base;
             <span class="keyword">return</span> data.counter;
           };
    u.ptr = data;

    <span class="keyword">return</span> u.dg;
}

<span class="keyword">class</span> GetC_Data {
    <span class="keyword">int</span> counter;
    <span class="keyword">int</span> base;

    <span class="keyword">this</span>(<span class="keyword">int</span> base) {
        <span class="keyword">this</span>.base = base;
        <span class="keyword">this</span>.counter = <span class="number">1</span>;
    }

    <span class="keyword">int</span> func() {
        counter *= base;
        <span class="keyword">return</span> counter;
    }
}

<span class="keyword">int</span> <span class="keyword">delegate</span>() getC(<span class="keyword">int</span> base) {
    GetC_Data data = <span class="keyword">new</span> GetC_Data(base);
    <span class="keyword">return</span> &amp;data.func;
}

<span class="comment">/* Original contribution by Russ Lewis. Changed based on suggestions by Blandger. */</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex60">Delegate 1</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A delegate allows assigning a non-static nested function to a variable.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/+ from http://www.digitalmars.com/d/function.html#closures +/</span>

<span class="keyword">int</span> <span class="keyword">delegate</span>() dg;

<span class="keyword">void</span> main()
{  
   <span class="keyword">int</span> a = <span class="number">7</span>;
   <span class="keyword">int</span> foo() { <span class="keyword">return</span> a + <span class="number">3</span>; }

   dg = &amp;foo;
   <span class="keyword">int</span> i = dg();  <span class="comment">/* i is set to 10 */</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex61">Delegate 2</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A more complicated delegate example.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* from http://www.digitalmars.com/d/function.html#closures */</span>

<span class="keyword">struct</span> Foo
{   
    <span class="keyword">int</span> a = <span class="number">7</span>;
    <span class="keyword">int</span> bar() { <span class="keyword">return</span> a; }
}

<span class="keyword">int</span> foo(<span class="keyword">int</span> <span class="keyword">delegate</span>() dg)
{
    <span class="keyword">return</span> dg() + <span class="number">1</span>;
}

<span class="keyword">void</span> main()
{
    <span class="keyword">int</span> x = <span class="number">27</span>;
    <span class="keyword">int</span> abc() { <span class="keyword">return</span> x; }
    Foo f;
    <span class="keyword">int</span> i;

    i = foo(&amp;abc);      <span class="comment">/* i is set to 28 */</span>
    i = foo(&amp;f.bar);    <span class="comment">/* i is set to 8 */</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Foreach</h3><h4 id="ex51">Foreach on a class</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>You can define how your class iterates through foreach with an opApply method.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*  

foreach was added in DMD 0.71
http://www.digitalmars.com/d/statement.html#foreach

*/</span>

<span class="keyword">class</span> Foo
{
   <span class="keyword">uint</span> array[<span class="number">2</span>];

   <span class="keyword">int</span> opApply(<span class="keyword">int</span> <span class="keyword">delegate</span>(<span class="keyword">inout</span> <span class="keyword">uint</span>) dg)
   {   
      <span class="keyword">int</span> result = <span class="number">0;
</span>


      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; array.length; i++)
      {
         result = dg(array[i]);
         <span class="keyword">if</span> (result)
            <span class="keyword">break</span>;
      }
      <span class="keyword">return</span> result;
   }
}



<span class="keyword">void</span> test()
{
   Foo a = <span class="keyword">new</span> Foo();

   a.array[<span class="number">0] </span>= <span class="number">73</span>;
   a.array[<span class="number">1</span>] = <span class="number">82</span>;

   <span class="keyword">foreach</span> (<span class="keyword">uint</span> u; a)
   {
      printf(<span class="string">"%d\n"</span>, u);
   }
}


<span class="keyword">int</span> main()
{
    test();
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex52">Foreach with an inout</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>An "inout" can be used to update the original elements.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*  

foreach was added in DMD 0.71
http://www.digitalmars.com/d/statement.html#foreach


"inout" can be used to update the original elements.

*/</span>



<span class="keyword">void</span> test()
{
    <span class="keyword">static</span> <span class="keyword">uint</span>[<span class="number">2</span>] a = [<span class="number">7</span>, <span class="number">8</span>];

    <span class="keyword">foreach</span> (<span class="keyword">inout</span> <span class="keyword">uint</span> u; a)
    {
        u++;
    }

    <span class="keyword">foreach</span> (<span class="keyword">uint</span> u; a)
    {
        printf(<span class="string">"%d\n"</span>, u);
    }
}



<span class="keyword">int</span> main()
{
    test();
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex53">Foreach with a string literal</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Foreach aggregates can be string literals, which can be accessed as 
char, wchar, or dchar arrays.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*  

foreach was added in DMD 0.71
http://www.digitalmars.com/d/statement.html#foreach


Aggregates can be string literals, which can be accessed as 
char, wchar, or dchar arrays.

*/</span>



<span class="keyword">void</span> test()
{
    <span class="keyword">foreach</span> (<span class="keyword">char</span> c; <span class="string">"ab"</span>)
    {
        printf(<span class="string">"'%c'\n"</span>, c);
    }

    <span class="keyword">foreach</span> (<span class="keyword">wchar</span> w; <span class="string">"xy"</span>)
    {
        wprintf(<span class="string">"'%c'\n"</span>, w);
    }
}


<span class="keyword">int</span> main()
{
    test();
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex62">Foreach with a char[]</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows using foreach with a dynamic char array.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

Inspired by 
http://www.digitalmars.com/drn-bin/wwwnews?D/25475

*/</span>

<span class="keyword">import</span> std.string;

<span class="keyword">void</span> main()
{
   <span class="keyword">char</span>[] names = <span class="string">"200 digitalmars.com InterNetNews NNRP server INN 2.3.2 ready (posting ok).
Sending List request.....
215 Newsgroups in form \"group high low flags\".
c++ 0000003792 0000000001 y
D 0000025479 0000000001 y
D.gnu 0000000488 0000000001 y
DMDScript 0000000040 0000000001 y
c++.beta 0000000357 0000000001 y
c++.stlsoft 0000000188 0000000001 y
c++.wxwindows 0000000172 0000000001 y"</span>;

   <span class="keyword">char</span>[][] ch = split(names,<span class="string">"\n"</span>);
   <span class="keyword">foreach</span>(<span class="keyword">char</span>[] c; ch)
   {
      printf(<span class="string">"%.*s = \n"</span>, c);
   }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex69">Foreach with key and value pairs</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>You can iterate across associative arrays with both key and value, and also capture the index for static/dynamic arrays.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

foreach was added in DMD 0.71
http://www.digitalmars.com/d/statement.html#foreach

This example was originally posted by csauls.

*/</span>

<span class="keyword">void</span> main() {
    <span class="keyword">int</span>[<span class="keyword">char</span>[]] map;
    <span class="keyword">float</span>[] array;

    map[<span class="string">"abc"</span>] = <span class="number">123</span>;
    map[<span class="string">"def"</span>] = <span class="number">456</span>;
    map[<span class="string">"xyz"</span>] = <span class="number">890</span>;

    array ~= <span class="number">1.23</span>;
    array ~= <span class="number">3.14</span>;

    printf(<span class="string">"Iterating over map...\n"</span>);
    <span class="keyword">foreach</span> (<span class="keyword">char</span>[] key, <span class="keyword">int</span> value; map) {
        printf(<span class="string">"\t%.*s =&gt; %d\n"</span>, key, value);
    }

    printf(<span class="string">"Iterating over array...\n"</span>);
    <span class="keyword">foreach</span> (<span class="keyword">int</span> index, <span class="keyword">float</span> value; array) {
        printf(<span class="string">"\t%d =&gt; %f\n"</span>, index, value);
    }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex71">Associative array of strings</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Foreach with an associative array of dynamic strings (uses alias, too)</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* ******* ******* *******

Foreach with an associative array of strings

foreach was added in DMD 0.71
http://www.digitalmars.com/d/statement.html#foreach

(This example was inspired on an example posted by csauls from comments by larsivi.)

******* ******* ********/</span>



<span class="comment">/* 
    This alias makes it a little easier to see what's going on with the 
    dynamic strings (a/k/a "char[]"). 
*/</span>
<span class="keyword">alias</span> <span class="keyword">char</span>[] string; 



<span class="keyword">void</span> main() {

    <span class="comment">/* create an associative array called "map" */</span>
    string[string] map; 


    <span class="comment">/* 
        The associate array is populated like this:
        map[key] = value 
    */</span>
    
    map[<span class="string">"abc"</span>] = <span class="string">"apple"</span>;
    map[<span class="string">"def"</span>] = <span class="string">"bee"</span>;
    map[<span class="string">"xyz"</span>] = <span class="string">"cat"</span>;


    <span class="comment">/* 
        The foreach is used to determine the contents of 
        the associative array.
    */</span>

    printf(<span class="string">"Iterating over map...\n"</span>);
    <span class="keyword">foreach</span> (string key, string value; map) 
    {
        printf(<span class="string">"\t%.*s =&gt; %.*s\n"</span>, key, value);
    }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Function Literals</h3><h4 id="ex77">Function Literal Assignment</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Function Literals enable embedding anonymous functions directly into expressions.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* based on http://www.prowiki.org/wiki4d/wiki.cgi?DWiki/FunctionLiterals 
   which was copied from http://dlanguage.netunify.com/11 */</span>

<span class="keyword">int</span> <span class="keyword">function</span>(<span class="keyword">char</span> c) fp;

<span class="keyword">void</span> main() 
{ 
    <span class="keyword">static</span> <span class="keyword">int</span> foo(<span class="keyword">char</span> c) 
    { 
        <span class="keyword">return</span> <span class="number">6</span>; 
    } 
    fp = &amp;foo;

    printf(<span class="string">"%d"</span>, fp(<span class="string">'A'</span>)); 
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex76">Function Literal / Anonymous Function</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Function Literals enable embedding anonymous functions directly into expressions.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* based on http://www.prowiki.org/wiki4d/wiki.cgi?DWiki/FunctionLiterals 
   which was copied from http://dlanguage.netunify.com/11 */</span>

<span class="keyword">int</span> <span class="keyword">function</span>(<span class="keyword">char</span> c) fp;

<span class="keyword">void</span> main() 
{ 
    fp = <span class="keyword">function</span> <span class="keyword">int</span>(<span class="keyword">char</span> c) 
    { 
        <span class="keyword">return</span> <span class="number">6</span>;
    }; <span class="comment">//note the semi-colon at the end </span>


    printf(<span class="string">"%d\n"</span>, fp(<span class="string">'A'</span>));
}</code></pre> <p>For more details, see the <a href="http://www.digitalmars.com/d/expression.html#FunctionLiterals">D Spec.</a></p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Handling errors</h3><h4 id="ex129">DBC: basic design by contract</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Implements
specialized square_root used in doc example (with updated code to
reflect dmd &gt;= 0.102) and one-based lookup table.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.stdio;
<span class="keyword">import</span> std.math;

<span class="comment">/* compile with dmd test.d */</span>

<span class="keyword">void</span> main ()
{
  <span class="keyword">long</span> rc = GetMaxChapInBook(<span class="number">3</span>);
  writefln(<span class="string">"rc: "</span>, rc);

  rc = square_root(<span class="number">16</span>);
  writefln(<span class="string">"rc: "</span>, rc);
}

<span class="comment">/* Specialized sqrt that requires an integer
 * that is an actual squared value (e.g. 1,4,9,16,etc)
 * Corresponds to DBC documentation with casts so that
 * it will compile with dmd &gt;= 0.102
 * http://www.digitalmars.com/d/dbc.html
 */</span>
<span class="keyword">long</span> square_root(<span class="keyword">long</span> x)
<span class="keyword">in</span> 
{
  <span class="keyword">assert</span>(x &gt;= <span class="number">0);</span>
}
<span class="keyword">out</span> (result)
{
  <span class="keyword">assert</span>((result * result) == x);
}
<span class="keyword">body</span>
{
  <span class="keyword">return</span> <span class="keyword">cast</span>(<span class="keyword">long</span>)std.math.sqrt(<span class="keyword">cast</span>(<span class="keyword">double</span>)x);
}

<span class="comment">/* One-based lookup table. An index of 0 or &gt; 9 is rejected.
 * The return value rc is constrained to be between 1 and 50.
 * Note that "result" used in doc isn't reserved word or required.
 * Could also be done with enum??
 */</span>
<span class="keyword">ushort</span> GetMaxChapInBook(<span class="keyword">in</span> <span class="keyword">ushort</span> bk)
<span class="keyword">in</span> { <span class="keyword">assert</span>((bk &gt;= <span class="number">1</span>) &amp;&amp; (bk &lt;= <span class="number">9</span>)); }
<span class="keyword">out</span> (maxChap) { <span class="keyword">assert</span>((maxChap &gt;= <span class="number">1</span>) &amp;&amp; (maxChap &lt;= <span class="number">50</span>)); }

<span class="keyword">body</span> {
  <span class="keyword">return</span> chapsInBook[bk];
}

<span class="keyword">ushort</span>[] chapsInBook = [
  <span class="number">0, </span> <span class="number">50</span>, <span class="number">40</span>, <span class="number">27</span>, <span class="number">36</span>, <span class="number">34</span>, <span class="number">24</span>, <span class="number">21</span>,  <span class="number">4</span>, <span class="number">31</span>     <span class="comment">// 0-9</span>
];</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Operator Overloading</h3><h4 id="ex43">Currency</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A currency object featuring some operator overloading.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
    Title:   Currency with Operator Overloading
    File:    currency.d
    Author:  J C Calvarese, http://jcc_7.tripod.com/d/
    Date:    2004/01/03
    Licence: Public domain


    TEST version: outputs more information to the console during run.
*/</span>


<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.math;



<span class="keyword">char</span>[] leadingZeros(<span class="keyword">byte</span> num, <span class="keyword">byte</span> digits)
<span class="comment">/* by J C Calvarese, also in locales2.d and with.d */</span>
{ 
    <span class="keyword">char</span>[] buffer;
    <span class="keyword">byte</span> diff;
    
    buffer = toString(num);
    <span class="keyword">if</span> (buffer.length &lt; digits) 
    {
        diff = digits - buffer.length;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0; </span>i &lt; diff; i++)
          buffer = <span class="string">"0"</span> ~ buffer;
    } 
    <span class="keyword">return</span> buffer;
}



<span class="keyword">char</span>[] toStringFromDouble(<span class="keyword">double</span> d)
{
    <span class="keyword">return</span> toStringFromDouble(d, <span class="number">2</span>); <span class="comment">/* defaults to 2 decimal places */</span> 
}

<span class="keyword">char</span>[] toStringFromDouble(<span class="keyword">double</span> d, <span class="keyword">int</span> decPlaces)
{
    <span class="keyword">return</span> toStringFromDouble(d, decPlaces, <span class="string">"."</span>); <span class="comment">/* separator defaults to period */</span> 
}

<span class="keyword">char</span>[] toStringFromDouble(<span class="keyword">double</span> i, <span class="keyword">int</span> decPlaces, <span class="keyword">char</span>[] sep)
{  
    <span class="keyword">int</span> whole;
    <span class="keyword">int</span> dec;
    <span class="keyword">double</span> decPart;
    
    whole = <span class="keyword">cast</span>(<span class="keyword">int</span>) i;
    <span class="keyword">version</span>(TEST) printf(<span class="string">"whole: %d\n"</span>, whole);

    decPart = (i - whole) * pow(<span class="keyword">cast</span>(<span class="keyword">real</span>) <span class="number">10</span>, <span class="keyword">cast</span>(<span class="keyword">uint</span>) decPlaces);
    <span class="keyword">version</span>(TEST) printf(<span class="string">"decPart: %lf\n"</span>, decPart);
    
    dec = <span class="keyword">cast</span>(<span class="keyword">int</span>) (decPart);
    <span class="keyword">version</span>(TEST) printf(<span class="string">"dec: %d\n"</span>, dec);
    <span class="keyword">return</span> toString(i) ~ sep ~ leadingZeros(dec, decPlaces);
}



<span class="keyword">class</span> Currency
{   
    <span class="comment">/* Read property ("get-ter") */</span>
    <span class="keyword">double</span> value() {<span class="keyword">return</span> intValue;}
    
    <span class="comment">/* Write property ("set-ter") */</span>
    <span class="keyword">double</span> value(<span class="keyword">double</span> v) {<span class="keyword">return</span> intValue = v;}

    
    <span class="keyword">this</span>(<span class="keyword">double</span> v)
    {
        <span class="keyword">version</span>(TEST) printf(<span class="string">"An instance of the Currency object is created.\n\n"</span>);
        intValue = v;
        intSeparator = <span class="string">"."</span>;
        intDecPlaces = <span class="number">2</span>;
    }
    
    <span class="keyword">this</span>()
    {
        <span class="keyword">this</span>(<span class="number">0);</span>
    }
    
    <span class="keyword">char</span>[] toString() { <span class="keyword">return</span> toStringFromDouble(intValue, intDecPlaces, intSeparator);}



    <span class="comment">/* operator overloading */</span>

    Currency opAdd(Currency m, Currency n)
    {  
        Currency t;
        t.value = m.value + n.value;
        <span class="keyword">return</span> t;
    }

    Currency opAddAssign(Currency m)
    {  
        intValue += m.value;
        <span class="keyword">return</span> <span class="keyword">this</span>;
    }


    <span class="keyword">private</span> 
    {
        <span class="keyword">double</span> intValue;
        <span class="keyword">double</span> intDecPlaces;
        <span class="keyword">char</span>[] intSeparator; <span class="comment">/* decimal, period (U.S.), comma (Some non-U.S. locations) */</span>
    }
}



<span class="keyword">void</span> main()
{ 
    Currency c = <span class="keyword">new</span> Currency();  
    printf(<span class="string">"\n\t\t\t\t\t\t%.*s\n"</span>, c.toString);

    printf(<span class="string">"Change the value:\t\t\t\t"</span>);
    c.value = <span class="number">100.75</span>;
    printf(<span class="string">"%.*s\n"</span>, c.toString);

    Currency c2 = <span class="keyword">new</span> Currency(<span class="number">26.12</span>);
    printf(<span class="string">"\t\t\t\t\t\t%.*s\n"</span>, c2.toString);

    printf(<span class="string">"Change the value:\t\t\t\t"</span>);
    c2.value = <span class="number">6.25</span>;
    printf(<span class="string">"%.*s\n"</span>, c2.toString);

    printf(<span class="string">"Change the value (operator overloading):\t"</span>);
    c2 += c; <span class="comment">/* requires operator overloading */</span>
    printf(<span class="string">"%.*s\n\n"</span>, c2.toString);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex44">Currency (Using with)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A currency object featuring some operator overloading (uses with).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
    Title:   Currency with Operator Overloading (using "with")
    File:    with.d
    Author:  J C Calvarese, http://jcc_7.tripod.com/d/
    Date:    2004/01/03
    Licence: Public domain


    TEST version: outputs more information to the console during run.
*/</span>


<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.math;



<span class="keyword">char</span>[] leadingZeros(<span class="keyword">byte</span> num, <span class="keyword">byte</span> digits)
<span class="comment">/* by J C Calvarese, also in locales2.d */</span>
{ 
    <span class="keyword">char</span>[] buffer;
    <span class="keyword">byte</span> diff;
    
    buffer = toString(num);
    <span class="keyword">if</span> (buffer.length &lt; digits) 
    {
        diff = digits - buffer.length;
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0; </span>i &lt; diff; i++)
          buffer = <span class="string">"0"</span> ~ buffer;
    } 
    <span class="keyword">return</span> buffer;
}



<span class="keyword">char</span>[] toStringFromDouble(<span class="keyword">double</span> d)
{
    <span class="keyword">return</span> toStringFromDouble(d, <span class="number">2</span>); <span class="comment">/* defaults to 2 decimal places */</span> 
}

<span class="keyword">char</span>[] toStringFromDouble(<span class="keyword">double</span> d, <span class="keyword">int</span> decPlaces)
{
    <span class="keyword">return</span> toStringFromDouble(d, decPlaces, <span class="string">"."</span>); <span class="comment">/* separator defaults to period */</span> 
}

<span class="keyword">char</span>[] toStringFromDouble(<span class="keyword">double</span> i, <span class="keyword">int</span> decPlaces, <span class="keyword">char</span>[] sep)
{  
    <span class="keyword">int</span> whole;
    <span class="keyword">int</span> dec;
    <span class="keyword">double</span> decPart;
    
    whole = <span class="keyword">cast</span>(<span class="keyword">int</span>) i;
    <span class="keyword">version</span>(TEST) printf(<span class="string">"whole: %d\n"</span>, whole);

    decPart = (i - whole) * pow(<span class="keyword">cast</span>(<span class="keyword">real</span>) <span class="number">10</span>, <span class="keyword">cast</span>(<span class="keyword">uint</span>) decPlaces);
    <span class="keyword">version</span>(TEST) printf(<span class="string">"decPart: %lf\n"</span>, decPart);
    
    dec = <span class="keyword">cast</span>(<span class="keyword">int</span>) (decPart);
    <span class="keyword">version</span>(TEST) printf(<span class="string">"dec: %d\n"</span>, dec);
    <span class="keyword">return</span> toString(i) ~ sep ~ leadingZeros(dec, decPlaces);
}



<span class="keyword">class</span> Currency
{   
    <span class="comment">/* Read property ("get-ter") */</span>
    <span class="keyword">double</span> value() {<span class="keyword">return</span> intValue;}
    
    <span class="comment">/* Write property ("set-ter") */</span>
    <span class="keyword">double</span> value(<span class="keyword">double</span> v) {<span class="keyword">return</span> intValue = v;}

    
    <span class="keyword">this</span>(<span class="keyword">double</span> v)
    {
        <span class="keyword">version</span>(TEST) printf(<span class="string">"An instance of the Currency object is created.\n\n"</span>);
        intValue = v;
        intSeparator = <span class="string">"."</span>;
        intDecPlaces = <span class="number">2</span>;
    }
    
    <span class="keyword">this</span>()
    {
        <span class="keyword">this</span>(<span class="number">0);</span>
    }
    
    <span class="keyword">char</span>[] toString() { <span class="keyword">return</span> toStringFromDouble(intValue, intDecPlaces, intSeparator);}



    <span class="comment">/* operator overloading */</span>

    Currency opAdd(Currency m, Currency n)
    {  
        Currency t;
        t.value = m.value + n.value;
        <span class="keyword">return</span> t;
    }

    Currency opAddAssign(Currency m)
    {  
        intValue += m.value;
        <span class="keyword">return</span> <span class="keyword">this</span>;
    }


    <span class="keyword">private</span> 
    {
        <span class="keyword">double</span> intValue;
        <span class="keyword">double</span> intDecPlaces;
        <span class="keyword">char</span>[] intSeparator; <span class="comment">/* decimal, period (U.S.), comma (Some non-U.S. locations) */</span>
    }
}



<span class="keyword">void</span> main()
{ 
    Currency c; <span class="comment">// = new Currency();  </span>

    <span class="keyword">with</span>(c = <span class="keyword">new</span> Currency())
    { 
        printf(<span class="string">"\n\n\t\t\t\t\t\t%.*s\n"</span>, toString);
    
        printf(<span class="string">"Change the value\t\t\t\t"</span>);
        value = <span class="number">100.75</span>;
        printf(<span class="string">"%.*s\n"</span>, toString);
    }
    
    Currency c2;    
    <span class="keyword">with</span>(c2 = <span class="keyword">new</span> Currency(<span class="number">26.12</span>))
    { 
        printf(<span class="string">"\t\t\t\t\t\t%.*s\n"</span>, toString);
    
        printf(<span class="string">"Change the value\t\t\t\t"</span>);
        value = <span class="number">6.25</span>;
        printf(<span class="string">"%.*s\n"</span>, toString);
    
        printf(<span class="string">"Change the value (operator overloading)\t\t"</span>);
        c2 += c; <span class="comment">/* requires operator overloading */</span>
        printf(<span class="string">"%.*s\n\n"</span>, toString);
    }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex88">opCall</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how an opCall can be assigned to allow using C++-style new-ing on a class.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"> <p>Based on <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/1539">digitalmars.D:1539</a></p><pre><code class="example"><span class="keyword">import</span> std.string;

<span class="keyword">class</span> A
{
    <span class="keyword">this</span>(<span class="keyword">uint</span> x)
    {
        num = x;
    }
    
    <span class="keyword">char</span>[] toString() 
    {
        <span class="keyword">return</span> std.string.toString(num);
    }
    
    <span class="keyword">private</span> <span class="keyword">uint</span> num;
    
    
    
    <span class="keyword">static</span> A opCall(<span class="keyword">uint</span> x)
    {
        <span class="comment">/* This overload allow the shorter C++ syntax for 
           "new"-ing the class. */</span>

        <span class="keyword">return</span> <span class="keyword">new</span> A(x);
    }
}

<span class="keyword">void</span> main()
{
    <span class="comment">/* and you can create class objects the in a c++ syntax */</span>
    A a = A(<span class="number">500</span>); 
    
    A a2 = <span class="keyword">new</span> A(<span class="number">567</span>);

    printf(<span class="string">"Number: %.*s\n"</span>, a.toString());
    printf(<span class="string">"Number: %.*s\n"</span>, a2.toString());
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex96">Byte.d</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>A very simple class that shows the use of operator overloadings.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 * ***************************************************************************
 * Byte.d - Show operator overloading and some properties
 * Bruno A. Costa (brunoacf AT elitemail DOT org)
 * ******************************************************************************
 */</span>

<span class="keyword">class</span> Byte
{
<span class="keyword">private</span>:
    <span class="keyword">byte</span> _value;
<span class="keyword">public</span>:

        <span class="keyword">this</span> ( ) {
        _value = <span class="number">0;
</span>
    }

    <span class="keyword">this</span> (<span class="keyword">byte</span> bt) {
    _value = bt;
    }

    <span class="keyword">this</span> (Byte bt) {

        _value = bt.value;
    }

    <span class="comment">// Set Property</span>
    <span class="keyword">byte</span> value (<span class="keyword">byte</span> bt) {
        <span class="keyword">return</span> _value = bt;
    }

    <span class="comment">// Set Property</span>
    <span class="keyword">byte</span> value (Byte bt) {
        <span class="keyword">return</span> _value = bt.value;
    }

    <span class="comment">// Get Property</span>
    <span class="keyword">byte</span> value ( ) {
        <span class="keyword">return</span> _value;
    }

    <span class="comment">// Overload operator ==</span>
    <span class="keyword">int</span> opEquals (<span class="keyword">byte</span> bt) {
        <span class="keyword">return</span> _value == bt;
    }

    <span class="comment">// Overload operator ==</span>
    <span class="keyword">int</span> opEquals (Byte bt) {
        <span class="keyword">return</span> _value == bt.value;
    }

    <span class="comment">// Overload operator + (Byte + Byte)</span>
    Byte opAdd (Byte bt) {
        Byte newbt = <span class="keyword">new</span> Byte();
        newbt.value = _value + bt.value;
        <span class="keyword">return</span> newbt;
    }

    <span class="comment">// Overload operator + (Byte + byte)</span>
    Byte opAdd (<span class="keyword">byte</span> bt) {
        Byte newbt = <span class="keyword">new</span> Byte();
        newbt.value = _value + bt;
        <span class="keyword">return</span> newbt;
    }

    <span class="comment">// Overload operators &gt; &gt;= &lt; &lt;=</span>
    <span class="keyword">int</span> opCmp (Byte bt) {
         <span class="keyword">return</span> (_value - bt.value);
    }

}

<span class="keyword">int</span> main ( )
{

    Byte b = <span class="keyword">new</span> Byte(<span class="number">2</span>);
    Byte b2 = <span class="keyword">new</span> Byte(<span class="number">2</span>);
    <span class="keyword">byte</span> b4 = <span class="number">10</span>;


    <span class="keyword">if</span> (b == b2) printf (<span class="string">"b == b1\n"</span>);      <span class="comment">// call opEquals</span>

    Byte b3 = <span class="keyword">new</span> Byte (b + b2);            <span class="comment">// call opAdd (Byte)</span>

    <span class="keyword">if</span> (b3 &lt; b2) printf (<span class="string">"b3 &gt; b2\n"</span>);      <span class="comment">// call opCmp</span>

    b = b2 + b4;                                    <span class="comment">// call opAdd (byte)</span>

    printf (<span class="string">"b2 + b4 = %i\n"</span>, b.value);

    <span class="comment">// Show values returned from opCmp( )</span>
    <span class="comment">// 1 == true; 0 == false</span>
    printf (<span class="string">"b2 &gt; b3: %i\n"</span>, (b2 &gt; b3) );
    printf (<span class="string">"b2 &lt; b3: %i\n"</span>, (b2 &lt; b3) );
    printf (<span class="string">"b2 &gt;= b3: %i\n"</span>, (b2 &gt;= b3) );
    printf (<span class="string">"b2 &lt;= b3: %i\n"</span>, (b2 &lt;= b3) );

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">switch / case</h3><h3 class="ex_disp_h3">Templates</h3><h4 id="ex97">Struct Template</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This template technique involving a struct is apparently undocumented.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">struct</span> foo(T)
{
   T x;

   <span class="keyword">void</span> getsize()
   {
      printf(<span class="string">"%d\n"</span>, x.sizeof);
   }
}


<span class="keyword">void</span> main(<span class="keyword">char</span>[][] args)
{
   foo!(<span class="keyword">int</span>) y;
   y.getsize();

   <span class="keyword">int</span> i;
   printf(<span class="string">"%d\n"</span>, i.sizeof);

   foo!(<span class="keyword">creal</span>) r;
   r.getsize();
   printf(<span class="string">"%d\n"</span>, r.sizeof);
}</code></pre> <p>Based on: <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/3895">digitalmars.D:3895</a></p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex99">Interface Template</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to use an interface template</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">

<p>It wasn't mentioned in the docs, but I had a slight inkling that it might be 
the case that one could have InterfaceTemplates using the same syntax as 
ClassTemplates (ie class ClassName(T) : [superclass [, interfaces] <classbody>). 
The following example compiled and ran correctly, outputting "1\n4\n" as expected. 
Perhaps this warrants a mention in the documentation under Templates, alongside 
"Class Templates"?</classbody></p>

<p>Source: <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/3828">digitalmars.D:3828</a></p> 
<pre><code class="example"><span class="keyword">interface</span> Foo(T)
{
   <span class="keyword">int</span> aFunction(T anArgument);
}

<span class="keyword">class</span> Bar(T) : Foo!(T)
{
   <span class="keyword">int</span> aFunction(T anArgument)
   {
      <span class="keyword">return</span> anArgument.size;
   }
}

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
   Bar!(<span class="keyword">ubyte</span>) one = <span class="keyword">new</span> Bar!(<span class="keyword">ubyte</span>);
   Bar!(<span class="keyword">int</span>) two = <span class="keyword">new</span> Bar!(<span class="keyword">int</span>);

   <span class="keyword">ubyte</span> oneVar = <span class="number">16</span>;
   <span class="keyword">int</span> twoVar = <span class="number">400000</span>;

   printf(<span class="string">"%i\n%i\n"</span>, one.aFunction(oneVar), two.aFunction(twoVar));

   <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex111">Iterator</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>An iterator with a list class</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 * Copyright (c) 2004
 * Sean Kelly
 *
 * Permission to use, copy, modify, distribute and sell this software
 * and its documentation for any purpose is hereby granted without fee,
 * provided that the above copyright notice appear in all copies and
 * that both that copyright notice and this permission notice appear
 * in supporting documentation.  Author makes no representations about
 * the suitability of this software for any purpose. It is provided
 * "as is" without express or implied warranty.
 */</span>


<span class="comment">//</span>
<span class="comment">// simple list type</span>
<span class="comment">//</span>
<span class="comment">// this is defined kind of oddly to get around scoping problems</span>
<span class="comment">//</span>
<span class="keyword">template</span> List( Ty )
{
<span class="keyword">public</span>:
    <span class="keyword">alias</span> Ty        Value;
    <span class="keyword">alias</span> size_t    Size;


    <span class="keyword">class</span> Node
    {
    <span class="keyword">public</span>:
        <span class="keyword">alias</span> List!(Ty).Value   Value;
    
        <span class="keyword">this</span>()
        {
            prev = <span class="keyword">this</span>;
            next = <span class="keyword">this</span>;
        }

        <span class="keyword">this</span>( Value v )
        {
            val = v;
            <span class="keyword">this</span>();
        }

    <span class="keyword">private</span>:
        Value   val;
        Node    prev,
                next;
    }


    <span class="keyword">class</span> Iterator
    {
    <span class="keyword">public</span>:
        <span class="keyword">alias</span> List!(Ty).Value   Value;
    
        <span class="keyword">this</span>( Node n )
        {
            ref = n;
        }

        Iterator opAddAssign( <span class="keyword">int</span> unused )
        {
            ref = ref.next;
            <span class="keyword">return</span> <span class="keyword">this</span>;
        }
<span class="comment">/*
        Iterator opPostInc()
        {
            iterator tmp( ref );
            ref = ref.next;
            return tmp;
        }
*/</span>
        Iterator opSubAssign( <span class="keyword">int</span> unused )
        {
            ref = ref.prev;
            <span class="keyword">return</span> <span class="keyword">this</span>;
        }
<span class="comment">/*
        Iterator opPostDec()
        {
            iterator tmp( ref );
            ref = ref.prev;
            return tmp;
        }
*/</span>
        <span class="keyword">int</span> opEquals( Iterator rhs )
        {
            <span class="keyword">return</span> ref == rhs.ref;
        }

        <span class="keyword">void</span> val( Value v )
        {
            ref.val = v;
        }

        Value val()
        {
            <span class="keyword">return</span> ref.val;
        }
        
    <span class="keyword">private</span>:
        Node    ref;
    }


    <span class="keyword">class</span> Container
    {
    <span class="keyword">public</span>:
        <span class="keyword">alias</span> List!(Ty).Iterator Iterator;
        <span class="keyword">alias</span> List!(Ty).Value    Value;
        <span class="keyword">alias</span> List!(Ty).Size     Size;
        
        <span class="keyword">this</span>()
        {
            m_head  = <span class="keyword">new</span> Node();
            m_size  = <span class="number">0;
</span>
        }
    
        Size size()
        {
            <span class="keyword">return</span> m_size;
        }
    
        <span class="keyword">bit</span> empty()
        {
            <span class="keyword">return</span> m_size == <span class="number">0;
</span>
        }
    
        Iterator begin()
        {
            <span class="keyword">return</span> <span class="keyword">new</span> Iterator( m_head.next );
        }
    
        Iterator end()
        {
            <span class="keyword">return</span> <span class="keyword">new</span> Iterator( m_head );
        }

        Value front()
        {
            <span class="keyword">return</span> m_head.next.val;
        }

        Value back()
        {
            <span class="keyword">return</span> m_head.prev.val;
        }

        <span class="keyword">void</span> pushFront( Value val )
        {
            insert( begin(), val );
        }

        <span class="keyword">void</span> pushBack( Value val )
        {
            insert( end(), val );
        }

        Iterator insert( Iterator pos, Value val )
        {
            Node n = <span class="keyword">new</span> Node( val );
            n.next = pos.ref;
            n.prev = pos.ref.prev;
            pos.ref.prev.next = n;
            pos.ref.prev = n;
            ++m_size;
            <span class="keyword">return</span> --pos;
        }

    <span class="keyword">protected</span>:
        Node    m_head;
        Size    m_size;
    }
}


<span class="comment">//</span>
<span class="comment">// default iterator definitions that apply</span>
<span class="comment">// to all user-defined containers</span>
<span class="comment">//</span>
<span class="keyword">template</span> IterImpl( Ty )
{
    <span class="keyword">alias</span> Ty            Container;
    <span class="keyword">alias</span> Ty.Iterator   Iterator;    
    <span class="keyword">alias</span> Ty.Value      Value;
    <span class="keyword">alias</span> Ty.Size       Size;

    Iterator begin( Container cont )
    {
        <span class="keyword">return</span> cont.begin();
    }

    Iterator end( Container cont )
    {
        <span class="keyword">return</span> cont.end();
    }
}


<span class="comment">//</span>
<span class="comment">// iterator specialization for primitive array</span>
<span class="comment">//</span>
<span class="keyword">template</span> IterImpl( Ty : Ty[] )
{
    <span class="keyword">alias</span> Ty[]      Container;
    <span class="keyword">alias</span> Ty        Value;
    <span class="keyword">alias</span> size_t    Size;
    
    <span class="keyword">class</span> Iterator
    {
    <span class="keyword">public</span>:
        <span class="keyword">this</span>( Ty* pos )
        {
            m_pos = pos;
        }

        Iterator opAddAssign( <span class="keyword">int</span> unused )
        {
            <span class="keyword">if</span>( m_pos )
                ++m_pos;
            <span class="keyword">return</span> <span class="keyword">this</span>;
        }

        Iterator opSubAssign( <span class="keyword">int</span> unused )
        {
            <span class="keyword">if</span>( m_pos )
                --m_pos;
            <span class="keyword">return</span> <span class="keyword">this</span>;
        }

        <span class="keyword">int</span> opEquals( Iterator rhs )
        {
            <span class="keyword">return</span> m_pos == rhs.m_pos;
        }

        <span class="keyword">void</span> val( Value val )
        {
            <span class="keyword">if</span>( m_pos )
                *m_pos = val;
        }

        Value val()
        {
            <span class="keyword">return</span> m_pos ? *m_pos : Ty.init;
        }
    
    <span class="keyword">private</span>:
        Value*  m_pos;
    }

    Iterator begin( Container cont )
    {
        <span class="keyword">return</span> <span class="keyword">new</span> Iterator( cont.length ? &amp;cont[<span class="number">0] </span>: <span class="keyword">null</span> );
    }

    Iterator end( Container cont )
    {
        <span class="keyword">return</span> <span class="keyword">new</span> Iterator( cont.length ? &amp;cont[<span class="number">0] </span>+ cont.length : <span class="keyword">null</span> );
    }
}


<span class="comment">//</span>
<span class="comment">// convenience wrappers to reduce type length</span>
<span class="comment">//</span>
<span class="keyword">template</span> Iterator( Ty )
{
    <span class="keyword">alias</span> IterImpl!(Ty).Iterator Iterator;
}


<span class="keyword">template</span> begin( Ty )
{
    <span class="keyword">alias</span> IterImpl!(Ty).begin begin;
}


<span class="keyword">template</span> end( Ty )
{
    <span class="keyword">alias</span> IterImpl!(Ty).end end;
}


<span class="comment">//</span>
<span class="comment">// slightly lame sample algorithm that only works for int value types</span>
<span class="comment">//</span>
<span class="keyword">template</span> print( Iter )
{
    <span class="keyword">void</span> print( Iter begin, Iter end )
    {
        <span class="keyword">for</span>( ; begin != end; ++begin )
            printf( <span class="string">"%d\n"</span>, begin.val );
    }
}


<span class="keyword">int</span> main( <span class="keyword">char</span>[][] args )
{
    <span class="keyword">alias</span> List!(<span class="keyword">int</span>).Container  IntList;
    <span class="keyword">alias</span> <span class="keyword">int</span>[]                 IntArray;

    IntList     list    = <span class="keyword">new</span> IntList();
    IntArray    array;

    list.insert( list.begin(), <span class="number">1</span> );
    list.insert( list.begin(), <span class="number">2</span> );
    list.insert( list.begin(), <span class="number">3</span> );
    
    array.length = <span class="number">3</span>;
    array[<span class="number">0] </span>= <span class="number">7</span>;
    array[<span class="number">1</span>] = <span class="number">8</span>;
    array[<span class="number">2</span>] = <span class="number">9</span>;

    Iterator!(IntList)  l_begin = begin!(IntList)( list ),
                        l_end   = end!(IntList)( list );
    
    Iterator!(IntArray) a_begin = begin!(IntArray)( array ),
                        a_end   = end!(IntArray)( array );

    print!(Iterator!(IntList))( l_begin, l_end );
    printf( <span class="string">"\n"</span> );
    print!(Iterator!(IntArray))( a_begin, a_end );
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre>
<p>Source: <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/7583">digitalmars.D:7583</a></p>
</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex116">Internal templates</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how templates within classes can be useful.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// by Joey Peters</span>

<span class="comment">/*
This should show you how templates in classes are useful and how they
could (or should) be used with mixins.

Practicly, this is mostly useful for when you're writing your own containers.
*/</span>

<span class="keyword">class</span> List(T) {
<span class="keyword">public</span>:
    <span class="comment">// hold an array with items</span>
    T[] data;
    <span class="keyword">this</span>() {}
    <span class="comment">// constructs with data set</span>
    <span class="keyword">this</span>(T[] d) {
        data = d;
    }
    <span class="comment">// convert the array automatically, but still allow it's functionality.</span>
    <span class="keyword">template</span> as(NT) {
        <span class="comment">// copy completely copies an array, but with a new type</span>
        NT[] copy() {
            NT[] ret;
            <span class="keyword">foreach</span>(T i; data) {
                ret.length = ret.length + <span class="number">1</span>;
                <span class="comment">// cast it to the new type</span>
                ret[ret.length - <span class="number">1</span>] = <span class="keyword">cast</span>(NT) i;
            }
            <span class="keyword">return</span> ret; 
        }
    }
    <span class="comment">// mix in it's own type, so the functionality is still there for</span>
    <span class="comment">// it's own type.</span>
    <span class="keyword">mixin</span> as!(T);
}

<span class="keyword">void</span> main() {
    <span class="comment">// first, we have two types of lists, integer lists and double lists</span>
    <span class="keyword">alias</span> List!(<span class="keyword">int</span>) iList;
    <span class="keyword">alias</span> List!(<span class="keyword">double</span>) dList;
    <span class="comment">// then, we make an integer list</span>
    iList list1 = <span class="keyword">new</span> iList;
    <span class="comment">// list 2 is a copy of list 1</span>
    iList list2 = <span class="keyword">new</span> iList(list1.copy());
    <span class="comment">// list 3 is a double list, and a copy of list 2</span>
    dList list3 = <span class="keyword">new</span> dList(list2.as!(<span class="keyword">double</span>).copy());
    <span class="comment">// magic :) you may want to overload a few things to make this look more elegant etc.</span>
    <span class="keyword">return</span>;
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex29">Simple Template</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates using ! for template instantiation (DMD 0.77+).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

    File:    template_d077.d
    Author:  J C Calvarese, http://jcc_7.tripod.com/d/
    Date:    2004/01/03
    Purpose: demonstrates using templates in D (using syntax introduced in DMD 0.77)
    
*/</span>

<span class="keyword">template</span> TStat(T)
{ 
    
    T avg(T a, T b)
    { 
        <span class="keyword">return</span> (a + b) / <span class="number">2</span>;
    }
    
    T avg(T a[])
    {
        T b;
        b = <span class="number">0; </span> <span class="comment">/* If b isn't initialized, then "nan" will be returned. */</span>
        
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; a.length; i++) 
          b += a[i];
        
        <span class="keyword">return</span> b / a.length;
    }
}


<span class="keyword">void</span> main()
{  
    <span class="keyword">int</span> i, j, avg1, avg2;
    <span class="keyword">int</span> m[];    
    <span class="keyword">double</span> avg3, avg4;
    <span class="keyword">double</span> d, e;
    <span class="keyword">double</span> n[];

    
    i = <span class="number">6</span>;
    j = <span class="number">8</span>;
    
    m.length = <span class="number">4</span>;
    m[<span class="number">0] </span>= <span class="number">2</span>;
    m[<span class="number">1</span>] = <span class="number">3</span>;
    m[<span class="number">2</span>] = <span class="number">4</span>;
    m[<span class="number">3</span>] = <span class="number">3</span>;
    
    avg1 = TStat!(<span class="keyword">int</span>).avg(i, j);
    avg2 = TStat!(<span class="keyword">int</span>).avg(m[]);

    printf(<span class="string">"avg1: %d\navg2: %d\n"</span>, avg1, avg2);
    
    d = <span class="number">7.75</span>;
    e = <span class="number">7.50</span>;
    
    n.length = <span class="number">3</span>;
    n[<span class="number">0] </span>= <span class="number">3.13</span>;
    n[<span class="number">1</span>] = <span class="number">3.15</span>;
    n[<span class="number">2</span>] = <span class="number">3.19</span>;
    
    avg3 = TStat!(<span class="keyword">double</span>).avg(d, e);
    avg4 = TStat!(<span class="keyword">double</span>).avg(n[]);
        
    printf(<span class="string">"avg3: %lf\navg4: %lf\n"</span>, avg3, avg4);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex12">Template Constructors</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Using a template to create class constructors</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

From: "Robert" 
Newsgroups: D
Subject: Re: template constructors?
Date: Fri, 30 Jan 2004 08:08:31 +0900
Organization: Digital Mars
Xref: digitalmars.com D:22767

*/</span>

<span class="keyword">class</span> Foo(T) {
    <span class="keyword">private</span> <span class="keyword">static</span> T _bar;

    <span class="keyword">static</span> <span class="keyword">this</span>() {
        <span class="comment">// initialize _bar</span>
    }
    <span class="keyword">static</span> ~<span class="keyword">this</span>() {
        <span class="comment">// finalize _bar</span>
    }
    <span class="keyword">static</span> <span class="keyword">void</span> baz() {
        <span class="comment">// use _bar</span>
    }
}

<span class="keyword">int</span> main() {
    Foo!(<span class="keyword">int</span>).baz();
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex4">Template Functions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Template Functions</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/+

From: "Ben Hinkle"
Newsgroups: D
Subject: Re: template functions
Date: Mon, 23 Feb 2004 14:19:47 -0500
Xref: digitalmars.com D:24532

+/</span>


<span class="comment">/+
Take Two. Collections are just waay to much fun to putter around with 
Here's an example that results in calls that look like
  TmixCollectionTypes!(Object,String).addAll(foo,bar);
when you want to copy from one contained type to another.
More details:
+/</span>

<span class="keyword">interface</span> Collection(T) { <span class="comment">// a cheesy Collection</span>
    T getItem();
    <span class="keyword">void</span> addItem(T x);
}

<span class="keyword">template</span> TmixCollectionTypes(S,T) {
    <span class="keyword">void</span> addAll(Collection!(S) x, Collection!(T) y) {
        x.addItem(y.getItem()); <span class="comment">// you get the idea...</span>
  }
}

<span class="keyword">class</span> LinkedList(T): Collection!(T) { <span class="comment">// a cheesy list</span>
    T getItem() { <span class="keyword">return</span> item; }
    <span class="keyword">void</span> addItem(T x) { item=x; }
    T item;
}

<span class="keyword">class</span> String {}

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] argv)
{
    Collection!(Object) foo = <span class="keyword">new</span> LinkedList!(Object);
    Collection!(String) bar = <span class="keyword">new</span> LinkedList!(String);
    TmixCollectionTypes!(Object,String).addAll(foo,bar);
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex55">Multiple Inheritance with template 'bolt-ins'</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>I've
been experimenting a little, most of this is taken from Andy Freisens
streams.d which doesn't appear to be on the web anymore. His is a very
good example, this is trivial please expand on it!</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

Originally posted by Q in March 2004. 

Apparently based on 
http://www.digitalmars.com/drn-bin/wwwnews?D/25856 

*/</span>

<span class="keyword">import</span> std.c.stdio;

<span class="keyword">interface</span> Vehicle {
    
    <span class="keyword">void</span> drive();
    <span class="keyword">void</span> stop();
    
}


<span class="keyword">class</span> Car (T) : T , Vehicle{

    <span class="keyword">void</span> drive() { puts(<span class="string">"driving on land"</span>);} 
    <span class="keyword">void</span> stop () { puts(<span class="string">"stopping on land"</span>); } 
    
    <span class="keyword">void</span> driveOnRoad() { puts(<span class="string">"driving on road"</span>); }
}


<span class="keyword">class</span> Boat (T) : T , Vehicle { 
    
    <span class="keyword">void</span> drive () { puts(<span class="string">"driving on water"</span>); } 
    <span class="keyword">void</span> stop () { puts(<span class="string">"stopping on water"</span>); } 
    
    <span class="keyword">void</span> floatOnWater() { puts(<span class="string">"floating on water"</span>); }     
}

<span class="keyword">alias</span> Car!( Boat!(Object ) ) CarBoat;
<span class="keyword">alias</span> Boat!( Car!(Object ) ) BoatCar;    

<span class="keyword">void</span> main ( ) {
    
    CarBoat x = <span class="keyword">new</span> CarBoat;
    x.floatOnWater();
    x.driveOnRoad();
    x.drive();
    
    puts(<span class="string">"\n"</span>);
    
    BoatCar y = <span class="keyword">new</span> BoatCar;
    y.floatOnWater();
    y.driveOnRoad();
    y.drive();    
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex13">Variable Arguments</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Template to facilitate using variable argument lists</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/+

From: "Ben Hinkle" 
Newsgroups: D
Subject: Re: Variable numbers of function parameters?
Date: Tue, 2 Mar 2004 09:05:06 -0500
Xref: digitalmars.com D:25034



+/</span>



<span class="keyword">private</span> <span class="keyword">import</span> std.c.stdio;
<span class="keyword">template</span> va_array(T)
{
   T[] va_array(<span class="keyword">uint</span>* ptr)
   {
      T* args = <span class="keyword">cast</span>(T*)(<span class="keyword">cast</span>(va_list)ptr + <span class="keyword">uint</span>.size);
      <span class="keyword">return</span> args[<span class="number">0 .</span>. *ptr];
   }
}
<span class="keyword">template</span> new_array(T)
{
   T[] new_array(<span class="keyword">uint</span> n,...)
   {
      <span class="keyword">return</span> va_array!(T)(&amp;n).dup;
   }
}

<span class="comment">// user code</span>
<span class="keyword">void</span> test(<span class="keyword">int</span>[] x)
{
   printf(<span class="string">"last element: %d\n"</span>,x[x.length-<span class="number">1</span>]);
}

<span class="keyword">int</span> main()
{
   test(new_array!(<span class="keyword">int</span>)(<span class="number">3</span>, <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>));
   <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex93">Template RTTI</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Of questionable usefulness in it's current incantation, but templates do have some support for runtime type identification.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">class</span> Thing(T)
{
    
}
 
<span class="keyword">void</span> main()
{
    Thing!(<span class="keyword">int</span>) thing = <span class="keyword">new</span> Thing!(<span class="keyword">int</span>);
   
    printf(<span class="string">"%.*s\n"</span>, thing.classinfo.name);

}

<span class="comment">/*
Output:

Thing
*/</span> </code></pre> <p>From <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/1842">digitalmars.D:1842</a></p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Versioning</h3><h4 id="ex22">Built-in Versions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Determine your compile environment at compile time.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">     See also the <a href="http://www.digitalmars.com/d/version.html">D Specification.</a>  <pre><code class="example"><span class="comment">/*
    File:       versioning.d
    Date:       2004-02-20
    Author:     J C Calvarese, http://jcc_7.tripod.com/d/
    Purpose:    Shows the use of the version statement.    
*/</span>

<span class="keyword">import</span> std.c.stdio;

<span class="keyword">void</span> main()
{ 
    
    <span class="keyword">version</span>(DigitalMars) printf(<span class="string">"Digital Mars is the compiler vendor.\n"</span>);

    <span class="keyword">version</span>(linux)
    {
        printf(<span class="string">"You're compiling on Linux.\n"</span>);
    }
    <span class="keyword">else</span>
    {
        <span class="keyword">version</span>(Windows)
        {
            printf(<span class="string">"You're compiling on Windows:\t"</span>);
            <span class="keyword">version</span>(Win32) printf(<span class="string">"Microsoft 32 bit Windows systems\n"</span>);
            <span class="keyword">version</span>(Win64) printf(<span class="string">"Microsoft 64 bit Windows systems\n"</span>);
        }
        <span class="keyword">else</span> <span class="comment">/* There is probably how a Palm or Mac implementation would be indicated. */</span>
        {
            <span class="keyword">version</span>(Palm) printf(<span class="string">"You're compiling on Palm.\n"</span>);
            <span class="keyword">version</span>(Mac)  printf(<span class="string">"You're compiling on Mac.\n"</span>);
        }
    }
    
    <span class="keyword">version</span>(X86) printf(<span class="string">"Processor: Intel or AMD 32 bit\n"</span>);
     
    <span class="keyword">version</span>(AMD64) printf(<span class="string">"Processor: AMD 64 bit processor\n"</span>);     

    <span class="keyword">version</span>(LittleEndian)   printf(<span class="string">"The byte order is least significant first.\n"</span>);
    <span class="keyword">version</span>(BigEndian)      printf(<span class="string">"The byte order is most significant first.\n"</span>);

    <span class="keyword">version</span>(D_InlineAsm)    printf(<span class="string">"Inline assembler is implemented.\n"</span>);
    <span class="keyword">version</span>(none)           printf(<span class="string">"This code is always disabled.\n"</span>);
    
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex106">Using versions to store multiple programs in one file</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Rather than having multiple programs, just have one that compiles for a variety of settings.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
Version.d - the versioning example.
Written by Ameer Armaly, and in the public domain.
*/</span>
<span class="comment">//you can version for different os's like so:</span>
<span class="keyword">version</span>(linux
{
<span class="keyword">import</span> std.c.linux.linux;
}
<span class="keyword">version</span>(Win32)
{
<span class="keyword">import</span> std.c.windows.windows;
}
<span class="comment">//or for different environments</span>
<span class="keyword">version</span>(fast)
{
<span class="comment">//whatever makes it runf aster</span>
}
<span class="keyword">version</span>(small)
{
<span class="comment">//whatever makes it smaller</span>
}</code></pre> <p>Contributed by Anonymous on Sun Jul 25, 2004.</p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex117">Compile time versioning</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to do versioning in files at compile time.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// By Joey Peters</span>

<span class="comment">// pass -version=free to dmd</span>
<span class="keyword">version</span>(Free) {
 <span class="keyword">version</span> = FeatureA;
} <span class="keyword">else</span> {
 <span class="keyword">version</span> = FeatureA;
 <span class="keyword">version</span> = FeatureB;
}

<span class="keyword">void</span> main() {
 <span class="comment">// every version has this.</span>
 <span class="keyword">version</span>(FeatureA) {
   printf(<span class="string">"Hello world!"</span>);
 }
 <span class="comment">// only the non free has this</span>
 <span class="keyword">version</span>(FeatureB) {
   printf(<span class="string">"Deluxe!"</span>);
 }
}

<span class="comment">/*
The equivalent of #define CONTRACT would be:
version = CONTRACT
Though, I must add you should not use capitals like you're used to ;)
The equivalent of #ifdef ... #endif is:
version(...) {

}
The equivalent of #ifdef ... #else #endif is:
version(...) {

} else {

}
*/</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">DFL</h3><h4 id="ex135">DflMiniCalc</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates (VERY) simple calculator with two buttons and three input fields. Equivalent to Win32 api MiniCalc example.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// To compile:</span>
<span class="comment">// dmd DflMiniCalc.d dfl.lib -L/exet:nt/su:windows:4.0</span>

<span class="keyword">private</span> <span class="keyword">import</span> dfl.all;
<span class="keyword">private</span> <span class="keyword">import</span> std.string;

<span class="keyword">class</span> MiniCalcForm: Form
{
  <span class="keyword">this</span>()
  {
    text = <span class="string">"DflMiniCalc"</span>;
    CreateControls();       

    acceptButton = plusButton;
  }
    
  <span class="keyword">private</span> <span class="keyword">void</span> CreateControls()
  {
    size = Size(<span class="number">120</span>, <span class="number">150</span>);  <span class="comment">// Overall form size</span>

    plusButton = <span class="keyword">new</span> Button;
    plusButton.parent = <span class="keyword">this</span>;
    plusButton.text = <span class="string">"Plus"</span>;
    plusButton.left = <span class="number">10</span>;
    plusButton.size = Size(<span class="number">50</span>, <span class="number">25</span>);
    plusButton.click ~= &amp;PlusClick;

    minusButton = <span class="keyword">new</span> Button;
    minusButton.parent = <span class="keyword">this</span>;
    minusButton.text = <span class="string">"Minus"</span>;
    minusButton.left = <span class="number">60</span>;
    minusButton.size = Size(<span class="number">50</span>, <span class="number">25</span>);
    minusButton.click ~= &amp;MinusClick;

    firstNumberText = <span class="keyword">new</span> TextBox;
    firstNumberText.parent = <span class="keyword">this</span>;
    firstNumberText.text = <span class="string">"170"</span>;
    firstNumberText.location = Point(<span class="number">10</span>, <span class="number">30</span>);
    firstNumberText.size = Size(<span class="number">100</span>, <span class="number">20</span>);

    secondNumberText = <span class="keyword">new</span> TextBox;
    secondNumberText.parent = <span class="keyword">this</span>;
    secondNumberText.text = <span class="string">"252"</span>;
    secondNumberText.location = Point(<span class="number">10</span>, <span class="number">55</span>);
    secondNumberText.size = Size(<span class="number">100</span>, <span class="number">20</span>);

    resultNumberText = <span class="keyword">new</span> TextBox;
    resultNumberText.parent = <span class="keyword">this</span>;
    resultNumberText.text = <span class="string">""</span>;
    resultNumberText.location = Point(<span class="number">10</span>, <span class="number">80</span>);
    resultNumberText.size = Size(<span class="number">100</span>, <span class="number">20</span>);
  }
    
  <span class="keyword">private</span> <span class="keyword">void</span> PlusClick(Object sender, EventArgs ea)
  {
    GetNumbers();
    result = num1 + num2;
    resultNumberText.text = std.string.toString(result);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> MinusClick(Object sender, EventArgs ea)
  {
    GetNumbers();
    result = num1 - num2;
    resultNumberText.text = std.string.toString(result);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> GetNumbers()
  {
    <span class="keyword">char</span>[] firstValue = firstNumberText.text;
    <span class="keyword">char</span>[] secondValue = secondNumberText.text;
    num1 = atoi(firstValue);
    num2 = atoi(secondValue);
  }

  <span class="keyword">private</span> TextBox firstNumberText;
  <span class="keyword">private</span> TextBox secondNumberText;
  <span class="keyword">private</span> TextBox resultNumberText;
  <span class="keyword">private</span> Button  plusButton;
  <span class="keyword">private</span> Button  minusButton;
  <span class="keyword">private</span> <span class="keyword">long</span>    num1;
  <span class="keyword">private</span> <span class="keyword">long</span>    num2;
  <span class="keyword">private</span> <span class="keyword">long</span>    result;
}

<span class="keyword">int</span> main()
{
  Application.run(<span class="keyword">new</span> MiniCalcForm);
    
  <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex136">Resizable Dialog</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates
DialogApp that adjusts the position and size of several controls when
the overall application window is resized. (Caveat: DFL newbie so this
may not be best way to accomplish)</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// To compile:</span>
<span class="comment">// dmd DflTest dfl.lib -L/exet:nt/su:windows:4.0</span>

<span class="keyword">private</span> <span class="keyword">import</span> std.string;

<span class="keyword">private</span> <span class="keyword">import</span> dfl.form, dfl.event, dfl.drawing, dfl.application;
<span class="keyword">private</span> <span class="keyword">import</span> dfl.button, dfl.textbox, dfl.treeview;

<span class="keyword">class</span> ResizableForm: Form
{
<span class="keyword">this</span>()
{
  text = <span class="string">"DflResizeTest"</span>;

  CreateControls();
}

<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_LEFT          = <span class="number">2</span>;
<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_TOP           = <span class="number">2</span>;
<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_HEIGHT_ADJUST = <span class="number">45</span>;
<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_WIDTH_ADJUST  = <span class="number">10</span>;
<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_RIGHT         = <span class="number">504</span>;
<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_BOTTOM        = <span class="number">404</span>;
<span class="keyword">const</span> <span class="keyword">int</span> CHAPTREE_WIDTH        = <span class="number">122</span>;
<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_BUTTON_HEIGHT = <span class="number">25</span>;
<span class="keyword">const</span> <span class="keyword">int</span> DEFAULT_BUTTON_WIDTH  = ((CHAPTREE_WIDTH / <span class="number">2</span>) - <span class="number">3</span>);
<span class="keyword">const</span> <span class="keyword">int</span> SEARCHBUTTON_HEIGHT   = DEFAULT_BUTTON_HEIGHT;
<span class="keyword">const</span> <span class="keyword">int</span> BOOKSBUTTON_WIDTH     = DEFAULT_BUTTON_WIDTH;
<span class="keyword">const</span> <span class="keyword">int</span> HELPBUTTON_WIDTH      = DEFAULT_BUTTON_WIDTH;
<span class="keyword">const</span> <span class="keyword">int</span> HELPBUTTON_LEFT       = (DEFAULT_RIGHT 
                                  - (DEFAULT_BUTTON_WIDTH + <span class="number">5</span>));
<span class="keyword">const</span> <span class="keyword">int</span> SEARCHBUTTON_WIDTH    = DEFAULT_BUTTON_WIDTH;
<span class="keyword">const</span> <span class="keyword">int</span> SEARCHBUTTON_LEFT     = (DEFAULT_BUTTON_WIDTH + <span class="number">4</span>);
<span class="keyword">const</span> <span class="keyword">int</span> SEARCHWORDS_LEFT      = (CHAPTREE_WIDTH + <span class="number">0);</span>
<span class="keyword">const</span> <span class="keyword">int</span> CHAPTREE_HEIGHT       = (DEFAULT_BOTTOM 
                                  - (DEFAULT_BUTTON_HEIGHT 
                                  + DEFAULT_HEIGHT_ADJUST));
<span class="keyword">const</span> <span class="keyword">int</span> CHAPTREE_TOP          = (DEFAULT_BUTTON_HEIGHT + <span class="number">4</span>);
<span class="keyword">const</span> <span class="keyword">int</span> OPTIONSBUTTON_WIDTH   = <span class="number">60</span>;
<span class="keyword">const</span> <span class="keyword">int</span> OPTIONSBUTTON_LEFT    = (DEFAULT_RIGHT 
                                  - (OPTIONSBUTTON_WIDTH 
                                  + DEFAULT_BUTTON_WIDTH + <span class="number">8</span>));
<span class="keyword">const</span> <span class="keyword">int</span> TEXTVIEWER_WIDTH      = (DEFAULT_RIGHT 
                                  - (CHAPTREE_WIDTH + <span class="number">3</span>));
<span class="keyword">const</span> <span class="keyword">int</span> SEARCHWORDS_WIDTH     = (DEFAULT_RIGHT 
                                  - (CHAPTREE_WIDTH 
                                  + OPTIONSBUTTON_WIDTH 
                                  + DEFAULT_BUTTON_WIDTH + <span class="number">8</span>));

<span class="keyword">private</span> <span class="keyword">void</span> CreateControls()
{
  size = Size((DEFAULT_RIGHT - DEFAULT_LEFT) + DEFAULT_WIDTH_ADJUST, 
              DEFAULT_BOTTOM - DEFAULT_TOP);  <span class="comment">// Overall form size</span>
  resize ~= &amp;ResizeForm;

  booksButton = <span class="keyword">new</span> Button;
  booksButton.parent = <span class="keyword">this</span>;
  booksButton.text = <span class="string">"Books"</span>;
  booksButton.location = Point(DEFAULT_LEFT, DEFAULT_TOP);
  booksButton.size = Size(DEFAULT_BUTTON_WIDTH, 
                          DEFAULT_BUTTON_HEIGHT);

  helpButton = <span class="keyword">new</span> Button;
  helpButton.parent = <span class="keyword">this</span>;
  helpButton.text = <span class="string">"Help"</span>;
  helpButton.size = Size(DEFAULT_BUTTON_WIDTH, 
                         DEFAULT_BUTTON_HEIGHT);

  optionsButton = <span class="keyword">new</span> Button;
  optionsButton.parent = <span class="keyword">this</span>;
  optionsButton.text = <span class="string">"Options"</span>;
  optionsButton.size = Size(DEFAULT_BUTTON_WIDTH, 
                            DEFAULT_BUTTON_HEIGHT);

  searchButton = <span class="keyword">new</span> Button;
  searchButton.parent = <span class="keyword">this</span>;
  searchButton.text = <span class="string">"Search"</span>;
  searchButton.location = Point(SEARCHBUTTON_LEFT, DEFAULT_TOP);
  searchButton.size = Size(DEFAULT_BUTTON_WIDTH, 
                           DEFAULT_BUTTON_HEIGHT);

  searchWordsTextBox = <span class="keyword">new</span> TextBox;
  searchWordsTextBox.parent = <span class="keyword">this</span>;
  searchWordsTextBox.text = <span class="string">"searchWordsTextBox"</span>;
  searchWordsTextBox.location = Point(SEARCHWORDS_LEFT, 
                                      DEFAULT_TOP);
  searchWordsTextBox.multiline = <span class="keyword">false</span>;
  searchWordsTextBox.readOnly = <span class="keyword">false</span>;

  viewerTextBox = <span class="keyword">new</span> TextBox;
  viewerTextBox.parent = <span class="keyword">this</span>;
  viewerTextBox.text = <span class="string">"viewerTextBox"</span>;
  viewerTextBox.location = Point(CHAPTREE_WIDTH, CHAPTREE_TOP);
  viewerTextBox.multiline = <span class="keyword">true</span>;
  viewerTextBox.readOnly = <span class="keyword">true</span>;
  viewerTextBox.wordWrap = <span class="keyword">true</span>;

  chapSelectorTree = <span class="keyword">new</span> TreeView;
  chapSelectorTree.parent = <span class="keyword">this</span>;
  chapSelectorTree.location = Point(DEFAULT_LEFT, CHAPTREE_TOP);

  ResizeForm(<span class="keyword">null</span>, <span class="keyword">null</span>);
}
  
<span class="keyword">private</span> <span class="keyword">void</span> ResizeForm(Object sender, EventArgs ea)
{
  Size formClientSize = clientSize();
  Rect formBounds     = bounds();
  <span class="keyword">int</span>  formHeight     = formClientSize.height;
  <span class="keyword">int</span>  formWidth      = formClientSize.width;
   
  <span class="keyword">int</span> helpButtonLeft    = (formWidth  - (DEFAULT_BUTTON_WIDTH + <span class="number">5</span>));
  <span class="keyword">int</span> chapTreeHeight    = (formHeight - (DEFAULT_BUTTON_HEIGHT + <span class="number">10</span>));
  <span class="keyword">int</span> optionsButtonLeft = (formWidth  - (OPTIONSBUTTON_WIDTH 
                           + DEFAULT_BUTTON_WIDTH + <span class="number">8</span>));
  <span class="keyword">int</span> textViewerWidth   = (formWidth  - (CHAPTREE_WIDTH + <span class="number">3</span>));
  <span class="keyword">int</span> searchWordsWidth  = (formWidth  - (CHAPTREE_WIDTH 
                           + OPTIONSBUTTON_WIDTH 
                           + DEFAULT_BUTTON_WIDTH + <span class="number">8</span>));

  searchWordsTextBox.size = Size(searchWordsWidth, 
                                 DEFAULT_BUTTON_HEIGHT);
  viewerTextBox.size = Size(textViewerWidth, chapTreeHeight);
  chapSelectorTree.size = Size(CHAPTREE_WIDTH, chapTreeHeight);

  optionsButton.location = Point(optionsButtonLeft, DEFAULT_TOP);
  helpButton.location = Point(helpButtonLeft, DEFAULT_TOP);
}

<span class="keyword">private</span> Button    booksButton;
<span class="keyword">private</span> Button    helpButton;
<span class="keyword">private</span> Button    optionsButton;
<span class="keyword">private</span> Button    searchButton;

<span class="keyword">private</span> TreeView  chapSelectorTree;
<span class="keyword">private</span> TextBox   searchWordsTextBox;
<span class="keyword">private</span> TextBox   viewerTextBox;
}

<span class="keyword">int</span> main()
{
  Application.run(<span class="keyword">new</span> ResizableForm);
  
  <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex137">MiniCalcWithRmb</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Extension
of MiniCalc with 'Plus' button having ContextMenu when RMB (right mouse
button) clicked. There is a common handler for all 3 RMB menu-items,
and argument "sender" is used to determine which menu-item was clicked.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// To compile:</span>
<span class="comment">// dmd DflTest dfl.lib -L/exet:nt/su:windows:4.0</span>

<span class="keyword">private</span> <span class="keyword">import</span> std.string;

<span class="keyword">private</span> <span class="keyword">import</span> dfl.form, dfl.event, dfl.drawing, dfl.application;
<span class="keyword">private</span> <span class="keyword">import</span> dfl.button, dfl.textbox, dfl.menu, dfl.control;

<span class="keyword">class</span> MiniCalcForm: Form
{
  <span class="keyword">this</span>()
  {
    text = <span class="string">"DflMiniCalc"</span>;

    CreateOtherControls();    

    CreatePlusButtonWithRmbMenu();    

    acceptButton = _plusButton;
  }
  
  <span class="keyword">private</span> <span class="keyword">void</span> CreateOtherControls()
  {
    size = Size(<span class="number">120</span>, <span class="number">150</span>);  <span class="comment">// Overall form size</span>

    _minusButton = <span class="keyword">new</span> Button;
    _minusButton.parent = <span class="keyword">this</span>;
    _minusButton.text = <span class="string">"Minus"</span>;
    _minusButton.left = <span class="number">60</span>;
    _minusButton.size = Size(<span class="number">50</span>, <span class="number">25</span>);
    _minusButton.click ~= &amp;onMinusClick;

    _firstNumberText = <span class="keyword">new</span> TextBox;
    _firstNumberText.parent = <span class="keyword">this</span>;
    _firstNumberText.text = <span class="string">"170"</span>;
    _firstNumberText.location = Point(<span class="number">10</span>, <span class="number">30</span>);
    _firstNumberText.size = Size(<span class="number">100</span>, <span class="number">20</span>);

    _secondNumberText = <span class="keyword">new</span> TextBox;
    _secondNumberText.parent = <span class="keyword">this</span>;
    _secondNumberText.text = <span class="string">"252"</span>;
    _secondNumberText.location = Point(<span class="number">10</span>, <span class="number">55</span>);
    _secondNumberText.size = Size(<span class="number">100</span>, <span class="number">20</span>);

    _resultNumberText = <span class="keyword">new</span> TextBox;
    _resultNumberText.parent = <span class="keyword">this</span>;
    _resultNumberText.text = <span class="string">""</span>;
    _resultNumberText.location = Point(<span class="number">10</span>, <span class="number">80</span>);
    _resultNumberText.size = Size(<span class="number">100</span>, <span class="number">20</span>);
  }
  
  <span class="keyword">private</span> <span class="keyword">void</span> CreatePlusButtonWithRmbMenu()
  {
    _plusButton = <span class="keyword">new</span> Button;
    _plusButton.parent = <span class="keyword">this</span>;
    _plusButton.text = <span class="string">"Plus"</span>;
    _plusButton.left = <span class="number">10</span>;
    _plusButton.size = Size(<span class="number">50</span>, <span class="number">25</span>);
    _plusButton.click ~= &amp;onPlusClick;

    _plusButton.contextMenu = <span class="keyword">new</span> ContextMenu;

    MenuItem miDouble = <span class="keyword">new</span> MenuItem;
    miDouble.text = <span class="string">"Double"</span>;
    miDouble.click ~= &amp;onPbcmHandler;
    miDouble.index = <span class="number">0;
</span>
    _plusButton.contextMenu.menuItems.add(miDouble);

    MenuItem miTriple = <span class="keyword">new</span> MenuItem;
    miTriple.text = <span class="string">"Triple"</span>;
    miTriple.click ~= &amp;onPbcmHandler;
    miTriple.index = <span class="number">1</span>;
    _plusButton.contextMenu.menuItems.add(miTriple);

    MenuItem miSeparator = <span class="keyword">new</span> MenuItem;
    miSeparator.text = <span class="string">"-"</span>;
    miSeparator.index = <span class="number">2</span>;
    _plusButton.contextMenu.menuItems.add(miSeparator);

    MenuItem miHalf = <span class="keyword">new</span> MenuItem;
    miHalf.text = <span class="string">"Half"</span>;
    miHalf.click ~= &amp;onPbcmHandler;
    miHalf.index = <span class="number">3</span>;
    _plusButton.contextMenu.menuItems.add(miHalf);
  }
  
  <span class="keyword">void</span> onPbcmHandler(Object sender, EventArgs ea)
  {
    GetNumbers();

    MenuItem mi = <span class="keyword">cast</span>(MenuItem)sender;
    <span class="keyword">char</span>[] label = mi.text;
    <span class="keyword">debug</span> <span class="keyword">char</span>* _dbgLabel = label;

    <span class="keyword">switch</span> (label) 
    {
      <span class="keyword">case</span> <span class="string">"Double"</span>:
           _num1 += _num1;
           <span class="keyword">break</span>;
      
      <span class="keyword">case</span> <span class="string">"Triple"</span>:
           _num1 += (_num1 + _num1);
           <span class="keyword">break</span>;
      
      <span class="keyword">case</span> <span class="string">"Half"</span>:
           _num1 /= <span class="number">2</span>;
           <span class="keyword">break</span>;
    }
    _firstNumberText.text = std.string.toString(_num1);
  }
    
  <span class="keyword">private</span> <span class="keyword">void</span> onPlusClick(Object sender, EventArgs ea)
  {
    GetNumbers();
    _result = _num1 + _num2;
    _resultNumberText.text = std.string.toString(_result);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> onMinusClick(Object sender, EventArgs ea)
  {
    GetNumbers();
    _result = _num1 - _num2;
    _resultNumberText.text = std.string.toString(_result);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> GetNumbers()
  {
    <span class="keyword">char</span>[] firstValue = _firstNumberText.text;
    <span class="keyword">char</span>[] secondValue = _secondNumberText.text;
    _num1 = atoi(firstValue);
    _num2 = atoi(secondValue);
  }

  <span class="keyword">private</span> TextBox _firstNumberText;
  <span class="keyword">private</span> TextBox _secondNumberText;
  <span class="keyword">private</span> TextBox _resultNumberText;
  <span class="keyword">private</span> Button  _plusButton;
  <span class="keyword">private</span> Button  _minusButton;
  <span class="keyword">private</span> <span class="keyword">long</span>    _num1;
  <span class="keyword">private</span> <span class="keyword">long</span>    _num2;
  <span class="keyword">private</span> <span class="keyword">long</span>    _result;
}

<span class="keyword">int</span> main()
{
  Application.run(<span class="keyword">new</span> MiniCalcForm);
  
  <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex138">DflTextBox with Selection reverse video</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates
how to find and select text in single-line and multi-line TextBox's
such that the found characters are highlighted in reverse video. For
the multi-line TextBox, the selected chars aren't visible, so
scrollToCaret is used to bring it into vi</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.stdio, std.string;
<span class="keyword">import</span> dfl.form, dfl.textbox, dfl.button, dfl.event, dfl.application, dfl.drawing;

<span class="keyword">class</span> MainForm: Form 
{ 
  TextBox single, multi; 
  <span class="keyword">this</span>() 
  { 
    Button sbtn; 
    <span class="keyword">with</span>(sbtn = <span class="keyword">new</span> Button) 
    { 
      text = <span class="string">"&amp;Find 'ment for'"</span>; 
      parent = <span class="keyword">this</span>; 
      click ~= &amp;sbtn_click; 
    } 
    
    <span class="keyword">with</span>(single = <span class="keyword">new</span> TextBox) 
    { 
      left = sbtn.right + <span class="number">4</span>; 
      text = <span class="string">"Open Source Development for D Open Source Development for D"</span>; 
      hideSelection = <span class="keyword">false</span>; 
      parent = <span class="keyword">this</span>; 
    } 
    
    Button mbtn; 
    <span class="keyword">with</span>(mbtn = <span class="keyword">new</span> Button) 
    { 
      top = <span class="number">40</span>; 
      text = <span class="string">"&amp;Find 'for D 6'"</span>; 
      parent = <span class="keyword">this</span>; 
      click ~= &amp;mbtn_click; 
    } 
    
    <span class="keyword">with</span>(multi = <span class="keyword">new</span> TextBox) 
    { 
      text = <span class="string">"Line 1 Open Source Development for D 111\r\n"</span>
             <span class="string">"Line 2 Open Source Development for D 222\r\n"</span>
             <span class="string">"Line 3 Open Source Development for D 333\r\n"</span>
             <span class="string">"Line 4 Open Source Development for D 444\r\n"</span>
             <span class="string">"Line 5 Open Source Development for D 555\r\n"</span>
             <span class="string">"Line 6 Open Source Development for D 666\r\n"</span>
             <span class="string">"Line 7 Open Source Development for D 777\r\n"</span>
             <span class="string">"Line 8 Open Source Development for D 888\r\n"</span>
             <span class="string">"Line 9 Open Source Development for D 999"</span>; 
      hideSelection = <span class="keyword">false</span>; 
      bounds = Rect(mbtn.right + <span class="number">4</span>, mbtn.top, <span class="number">200</span>, <span class="number">60</span>); 
      multiline = <span class="keyword">true</span>; 
      acceptsReturn = <span class="keyword">true</span>; 
      parent = <span class="keyword">this</span>; 
    } 
  } 
  <span class="keyword">private</span> <span class="keyword">void</span> sbtn_click(Object sender, EventArgs ea) 
  { 
    <span class="keyword">int</span> foundOffset = std.string.rfind(single.text, <span class="string">"ment for"</span>); 
    <span class="keyword">if</span>(foundOffset != -<span class="number">1</span>) { 
      single.select(foundOffset, <span class="number">8</span>);  <span class="comment">// 8 is len of 'ment for'</span>
    } 
  } 
  <span class="keyword">private</span> <span class="keyword">void</span> mbtn_click(Object sender, EventArgs ea) 
  { 
    <span class="keyword">int</span> foundOffset = std.string.rfind(multi.text, <span class="string">"for D 6"</span>); 
    <span class="keyword">if</span>(foundOffset != -<span class="number">1</span>) { 
      multi.select(foundOffset, <span class="number">7</span>); <span class="comment">// 7 is len of 'for D 6' </span>
      multi.scrollToCaret(); 
    } 
  } 
}

<span class="keyword">void</span> main()
{
  Application.run(<span class="keyword">new</span> MainForm);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex139">ToolTips and ListBox having Object entries</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>ListBox
comprised of objects (rather than text strings). When onHover handler
reached, the selected object from the ListBox is determined and its
toString confirms which entry has the mouse over it.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.string;
<span class="keyword">import</span> dfl.all;

<span class="keyword">class</span> Birthday: Object
{
  <span class="keyword">private</span> <span class="keyword">int</span> _year, _month, _day;

  <span class="keyword">this</span>(<span class="keyword">int</span> y, <span class="keyword">int</span> m, <span class="keyword">int</span> d) {
    _year = y;
    _month = m;
    _day = d;
  }
  <span class="keyword">char</span>[] toString() {
    <span class="keyword">return</span> (monthNames[_month] 
            ~ <span class="string">" "</span> ~ std.string.toString(_day)
            ~ <span class="string">","</span> ~ std.string.toString(_year));
  }
  <span class="keyword">const</span> <span class="keyword">char</span>[][] monthNames = [<span class="string">""</span>, <span class="string">"January"</span>, <span class="string">"February"</span>, <span class="string">"March"</span>, 
          <span class="string">"April"</span>, <span class="string">"May"</span>, <span class="string">"June"</span>, <span class="string">"July"</span>, <span class="string">"August"</span>, <span class="string">"September"</span>, 
          <span class="string">"October"</span>, <span class="string">"November"</span>, <span class="string">"December"</span>];
}

<span class="keyword">class</span> MainForm: Form 
{ 
  ToolTip _ttip; 
  ListBox _myList; 
   
  <span class="keyword">this</span>() 
  { 
    <span class="keyword">if</span>(!Control.supportsMouseTracking) {
      MessageBox.show(<span class="string">"Please install Internet Explorer 5.5 or higher."</span>); 
    }
    size = Size(<span class="number">350</span>, <span class="number">200</span>);
    _ttip = <span class="keyword">new</span> ToolTip; 
    
    _myList = <span class="keyword">new</span> ListBox; 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1776</span>,  <span class="number">7</span>,  <span class="number">4</span>)); 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1926</span>,  <span class="number">5</span>, <span class="number">16</span>)); 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1927</span>, <span class="number">12</span>, <span class="number">31</span>)); 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1951</span>,  <span class="number">5</span>, <span class="number">19</span>)); 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1952</span>, <span class="number">10</span>, <span class="number">18</span>)); 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1952</span>,  <span class="number">7</span>, <span class="number">24</span>)); 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1967</span>,  <span class="number">2</span>, <span class="number">16</span>)); 
    _myList.items.add(<span class="keyword">new</span> Birthday(<span class="number">1977</span>, <span class="number">11</span>, <span class="number">14</span>)); 
    _myList.parent = <span class="keyword">this</span>; 
    _myList.mouseHover ~= &amp;myList_hover; 
  } 
   
  <span class="keyword">void</span> myList_hover(Object sender, MouseEventArgs ea) 
  { 
    <span class="keyword">int</span> index = _myList.indexFromPoint(ea.x, ea.y); 
    <span class="keyword">if</span>(index != -<span class="number">1</span>) {
      Object o = _myList.items.opIndex(index);
      Birthday bd = <span class="keyword">cast</span>(Birthday)o;
      text = <span class="string">"Hovering over item: "</span> ~ bd.toString(); 
      _ttip.setToolTip(_myList, <span class="string">"Item: "</span> ~ bd.toString()); 
      _ttip.active = <span class="keyword">true</span>; <span class="comment">// Show the tip now. </span>
    } 
    <span class="keyword">else</span> { 
      _ttip.setToolTip(_myList, <span class="keyword">null</span>); 
    } 
  } 
}

<span class="keyword">void</span> main()
{
  Application.run(<span class="keyword">new</span> MainForm);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex134">Checkboxes</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates getting and setting the state of the checkboxes.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">

<p>This program requires Vathix's <a href="http://www.dprogramming.com/dfl.php">DFL</a>. I've tested it with DFL 0.7 and DMD 0.106.</p>

<h2>Batch file:</h2>
<tt>@echo off<br>
dmd checkboxes.d -L/exet:nt/su:windows:4.0 ..\dfl.lib -I..<br>
checkboxes.exe<br>
pause<br></tt>

<pre><code class="example"><span class="keyword">import</span> dfl.all;


<span class="comment">/* Program constants */</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] defaultPath = <span class="string">"C:\\Program Files\\jcc7"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] pgmName = <span class="string">"Checkbox Example"</span>;


<span class="keyword">int</span> main()
{
    Form frmMain;    
    CheckBox chk1, chk2, chk3, 
      chk4, chk5, chk6, chk7, 
      chk8;      
    TextBox txtPath;
    Label lblInstruct;
    Button btnBrowse, btnInstall, btnCheckAll, btnCheckNone;


    <span class="keyword">void</span> bntInstall_onClick(Object sender, EventArgs ea)
    {
        <span class="keyword">char</span>[] installPath = txtPath.text ~ <span class="string">"\\"</span>;
        MessageBox.show(installPath, <span class="string">"txtPath"</span>);
        
        <span class="keyword">if</span>(chk1.checkState == CheckState.CHECKED)

          MessageBox.show(<span class="string">"Part 1 checked"</span>, pgmName);
        
        <span class="keyword">if</span>(chk2.checkState == CheckState.CHECKED)
          MessageBox.show(<span class="string">"Part 2 checked"</span>, pgmName);

        <span class="keyword">if</span>(chk3.checkState == CheckState.CHECKED)
          MessageBox.show(<span class="string">"Part 3 checked"</span>, pgmName);
        
        <span class="keyword">if</span>(chk4.checkState == CheckState.CHECKED)
          MessageBox.show(<span class="string">"Part 4 checked"</span>, pgmName);
        
        <span class="keyword">if</span>(chk5.checkState == CheckState.CHECKED)
          MessageBox.show(<span class="string">"Part 5 checked"</span>, pgmName);
        
        <span class="keyword">if</span>(chk6.checkState == CheckState.CHECKED)
          MessageBox.show(<span class="string">"Part 6 checked"</span>, pgmName);
        
        <span class="keyword">if</span>(chk7.checkState == CheckState.CHECKED)
          MessageBox.show(<span class="string">"Part 7 checked"</span>, pgmName);
        
        <span class="keyword">if</span>(chk8.checkState == CheckState.CHECKED)
          MessageBox.show(<span class="string">"Part 8 checked"</span>, pgmName);        
    }
    

    <span class="keyword">void</span> bntCheckNone_onClick(Object sender, EventArgs ea)
    {
        chk1.checkState(CheckState.UNCHECKED);
        chk2.checkState(CheckState.UNCHECKED);
        chk3.checkState(CheckState.UNCHECKED);
        chk4.checkState(CheckState.UNCHECKED);
        chk5.checkState(CheckState.UNCHECKED);
        chk6.checkState(CheckState.UNCHECKED);
        chk7.checkState(CheckState.UNCHECKED);
        chk8.checkState(CheckState.UNCHECKED);
    }
    
    <span class="keyword">void</span> bntCheckAll_onClick(Object sender, EventArgs ea)
    {
        chk1.checkState(CheckState.CHECKED);
        chk2.checkState(CheckState.CHECKED);
        chk3.checkState(CheckState.CHECKED);
        chk4.checkState(CheckState.CHECKED);
        chk5.checkState(CheckState.CHECKED);
        chk6.checkState(CheckState.CHECKED);
        chk7.checkState(CheckState.CHECKED);
        chk8.checkState(CheckState.CHECKED);
    }  


    
    <span class="keyword">void</span> bntBrowse_onClick(Object sender, EventArgs ea)
    {
        MessageBox.show(<span class="string">"You clicked on browse."</span>, pgmName);
    }



    frmMain = <span class="keyword">new</span> Form;
    frmMain.text = <span class="string">"Checkboxes"</span>;
    frmMain.size = Size(<span class="number">450</span>, <span class="number">380</span>);
    frmMain.formBorderStyle = FormBorderStyle.FIXED_SINGLE;

    txtPath = <span class="keyword">new</span> TextBox;
    txtPath.size = Size(<span class="number">400</span>, <span class="number">20</span>);
    txtPath.text = defaultPath;
    txtPath.top = <span class="number">15</span>;
    txtPath.left = <span class="number">15</span>;
    txtPath.parent = frmMain;    

    btnBrowse = <span class="keyword">new</span> Button;
    btnBrowse.size = Size(<span class="number">80</span>, <span class="number">20</span>);
    btnBrowse.text = <span class="string">"Browse..."</span>;
    btnBrowse.top = <span class="number">35</span>;
    btnBrowse.left = <span class="number">15</span>;
    btnBrowse.parent = frmMain;
    btnBrowse.click ~= &amp;bntBrowse_onClick;
    
    lblInstruct = <span class="keyword">new</span> Label;
    lblInstruct.size = Size(<span class="number">300</span>, <span class="number">20</span>);
    lblInstruct.text = <span class="string">"Select parts to install: "</span>;
    lblInstruct.top = <span class="number">70</span>; 
    lblInstruct.left = <span class="number">15</span>;
    lblInstruct.parent = frmMain;

    chk1 = <span class="keyword">new</span> CheckBox;
    chk1.text = <span class="string">"Part 1"</span>;
    chk1.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk1.top = <span class="number">85</span>;
    chk1.left = <span class="number">15</span>;
    chk1.parent = frmMain;
    
    chk2 = <span class="keyword">new</span> CheckBox;
    chk2.text = <span class="string">"Part 2"</span>;
    chk2.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk2.top = <span class="number">110</span>;
    chk2.left = <span class="number">15</span>;
    chk2.parent = frmMain;
    
    chk3 = <span class="keyword">new</span> CheckBox;
    chk3.text = <span class="string">"Part 3"</span>;
    chk3.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk3.top = <span class="number">135</span>;
    chk3.left = <span class="number">15</span>;
    chk3.parent = frmMain;
    
    chk4 = <span class="keyword">new</span> CheckBox;
    chk4.text = <span class="string">"Part 4"</span>;
    chk4.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk4.top = <span class="number">160</span>;
    chk4.left = <span class="number">15</span>;
    chk4.parent = frmMain;
    
    chk5 = <span class="keyword">new</span> CheckBox;
    chk5.text = <span class="string">"Part 5"</span>;
    chk5.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk5.top = <span class="number">185</span>;
    chk5.left = <span class="number">15</span>;
    chk5.parent = frmMain;
    
    chk6 = <span class="keyword">new</span> CheckBox;
    chk6.text = <span class="string">"Part 6"</span>;
    chk6.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk6.top = <span class="number">210</span>;
    chk6.left = <span class="number">15</span>;
    chk6.parent = frmMain;
    
    chk7 = <span class="keyword">new</span> CheckBox;
    chk7.text = <span class="string">"Part 7"</span>;
    chk7.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk7.top = <span class="number">235</span>;
    chk7.left = <span class="number">15</span>;
    chk7.parent = frmMain;
    
    chk8 = <span class="keyword">new</span> CheckBox;
    chk8.text = <span class="string">"Part 8"</span>;
    chk8.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    chk8.top = <span class="number">260</span>;
    chk8.left = <span class="number">15</span>;
    chk8.parent = frmMain;

    btnCheckAll = <span class="keyword">new</span> Button;    
    btnCheckAll.text = <span class="string">"Check All"</span>;
    btnCheckAll.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    btnCheckAll.top = <span class="number">230</span>;
    btnCheckAll.left = <span class="number">200</span>;
    btnCheckAll.parent = frmMain;
    btnCheckAll.click ~= &amp;bntCheckAll_onClick;
    
    btnCheckNone = <span class="keyword">new</span> Button;
    btnCheckNone.text = <span class="string">"Uncheck All"</span>;
    btnCheckNone.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    btnCheckNone.top = <span class="number">260</span>;
    btnCheckNone.left = <span class="number">200</span>;
    btnCheckNone.parent = frmMain;
    btnCheckNone.click ~= &amp;bntCheckNone_onClick;
    
    btnInstall = <span class="keyword">new</span> Button;
    btnInstall.text = <span class="string">"Install"</span>;
    btnInstall.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    btnInstall.top = <span class="number">300</span>;
    btnInstall.left = <span class="number">15</span>;
    btnInstall.parent = frmMain;
    btnInstall.click ~= &amp;bntInstall_onClick;

    Application.run(frmMain);
    
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex122">Controls</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to create various controls using the DFL GUI library for Windows.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">

<p>This program requires Vathix's <a href="http://www.dprogramming.com/dfl.php">DFL</a>. I've tested it with DFL 0.4 and DMD 0.104.</p>

<h2>Batch file:</h2>
<tt>@echo off<br>
dmd controls.d -L/exet:nt/su:windows:4.0 ..\dfl.lib -I..<br>
controls.exe<br>
pause<br></tt>

<pre><code class="example"><span class="keyword">import</span> dfl.all;


<span class="keyword">int</span> main()
{
    Form myForm;
    Label myLabel;
    Button myButton, btnExit;
    TextBox myTextBox;
    CheckBox myChkBox;


    <span class="keyword">void</span> fileExitClick(Object sender, EventArgs ea)
    {
        Application.exitThread();
    }
        
        
    <span class="keyword">void</span> myButtonClick(Object sender, EventArgs ea)
    {
        MessageBox.show(<span class="string">"Congratulations! You clicked the Button."</span>, <span class="string">"My Example Program"</span>);
    }
        

    myForm = <span class="keyword">new</span> Form;
    myForm.text = <span class="string">"DFL Example"</span>;
    
    myButton = <span class="keyword">new</span> Button;
    myButton.text = <span class="string">"Button"</span>;
    myButton.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    myButton.parent = myForm;    
    myButton.click ~= &amp;myButtonClick;

    myTextBox = <span class="keyword">new</span> TextBox;
    myTextBox.text = <span class="string">"TextBox"</span>;
    myTextBox.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    myTextBox.left = <span class="number">150</span>;
    myTextBox.parent = myForm;
        
    myLabel = <span class="keyword">new</span> Label;
    myLabel.text = <span class="string">"Label"</span>;
    myLabel.size = Size(<span class="number">100</span>, <span class="number">14</span>);
    myLabel.top = <span class="number">50</span>;
    myLabel.parent = myForm;
        
    myChkBox = <span class="keyword">new</span> CheckBox;
    myChkBox.text = <span class="string">"CheckBox"</span>;
    myChkBox.size = Size(<span class="number">100</span>, <span class="number">20</span>);
    myChkBox.top = <span class="number">80</span>;
    myChkBox.parent = myForm;

    btnExit = <span class="keyword">new</span> Button;
    btnExit.text = <span class="string">"Exit"</span>;
    btnExit.top = <span class="number">150</span>;
    btnExit.size = Size(<span class="number">100</span>, <span class="number">25</span>);
    btnExit.parent = myForm;    
    btnExit.click ~= &amp;fileExitClick;    

    Application.run(myForm);
    
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Mango</h3><h4 id="ex113">I/O with Mango</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows you how to use the Mango library for I/O.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> mango.io.stdio;

<span class="keyword">int</span> main()
{
    Stdout &lt;&lt; <span class="string">"MANGO I/O EXAMPLE 1\n\n"</span>;
    
    <span class="keyword">char</span>[] name;

    Stdout &lt;&lt; <span class="string">"NAME: "</span>;
    Stdin &gt;&gt; name;

    Stdout &lt;&lt; <span class="string">"\n\nHello, "</span> &lt;&lt; name &lt;&lt; <span class="string">", how are you?\n"</span>;

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Standard Library</h3><h4 id="ex120">String usage: split and splitlines</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Exercises std.string.splitlines and std.string.split. 
(Note: has simulatedFile to be 'self-contained'. Use commented out lines for real file, assumed to be named tutorial.d)</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.stdio;
<span class="keyword">import</span> std.string;

<span class="comment">//import std.file;</span>
<span class="comment">//char[] actualFile = cast(char[])std.file.read("tutorial.d");</span>

<span class="keyword">const</span> <span class="keyword">char</span>[] simulatedFile = 
  <span class="string">"Line 1 one\n"</span>
  <span class="string">"Line 2 two\n"</span>
  <span class="string">"Line 3 three"</span>;

<span class="keyword">void</span> main ()
{
  <span class="keyword">char</span>[][] allLines = splitlines(simulatedFile);

  <span class="keyword">foreach</span> (<span class="keyword">char</span>[] curLine; allLines) {
    writef(curLine, <span class="string">" = "</span>);
    <span class="keyword">char</span>[][] allWordsInCurLine = split(curLine);
    <span class="keyword">foreach</span> (<span class="keyword">char</span>[] curWord; allWordsInCurLine) {
      writef(<span class="string">'['</span>, curWord, <span class="string">']'</span>, <span class="string">' '</span>);
    }
    writefln();
  }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex87">I/O on stdin and stdout streams</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td> A very simple example of I/O on stdin and stdout.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>egon</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* A very simple example of I/O on stdin and stdout.
 * It uses streams instead of stc.c.stdio calls.
 */</span>

<span class="keyword">import</span> std.stream;
<span class="keyword">import</span> std.string;

<span class="keyword">int</span> main()
{
    <span class="keyword">char</span>[] input;
    <span class="keyword">char</span>[] output;

    <span class="comment">// Ask for a string</span>
    std.stream.stdout.writeLine(<span class="string">"Converts a lowercase string to uppercase."</span>);
    std.stream.stdout.writeLine(<span class="string">"Please enter a string:"</span>);
    input = std.stream.stdin.readLine();

    <span class="comment">// Convert to upper and print it</span>
    output = input.toupper();
    std.stream.stdout.writeLine(output);

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex95">httpHEAD</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates Socket and SocketStream. 
</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 * Title: httpHEAD
 * Author: michal wallace (http://withoutane.com/)
 * License: public domain
 * Purpose: demonstrate sockets in D
 *
 * This program makes  an HTTP HEAD
 * request to a server specified on the
 * command line and prints the response.
 *
 */</span>

<span class="keyword">private</span> <span class="keyword">import</span> std.socket;
<span class="keyword">private</span> <span class="keyword">import</span> std.socketstream;
<span class="keyword">private</span> <span class="keyword">import</span> std.string;

<span class="keyword">const</span> <span class="keyword">int</span> WEBPORT=<span class="number">80</span>;

<span class="keyword">void</span> main(<span class="keyword">char</span>[][] args){ 

  <span class="keyword">if</span> (args.length != <span class="number">3</span>) {
    printf(<span class="string">"usage: httpHEAD host path"</span>);
    <span class="keyword">return</span>(<span class="number">1</span>);
  }

  <span class="keyword">char</span>[] host = args[<span class="number">1</span>];
  <span class="keyword">char</span>[] path = args[<span class="number">2</span>];

  <span class="comment">// open a socket:</span>
  InternetHost ih = <span class="keyword">new</span> InternetHost;
  ih.getHostByName(host);
  InternetAddress ia = <span class="keyword">new</span> InternetAddress(ih.addrList[<span class="number">0],</span> WEBPORT);
  TcpSocket sock = <span class="keyword">new</span> TcpSocket();
  sock.connect(ia);

  <span class="comment">// send the HTTP request</span>
  sock.send(<span class="string">"HEAD "</span> ~ path ~ <span class="string">" HTTP/1.0\n\n"</span>);
        
  <span class="comment">// read and print the result:</span>
  <span class="keyword">char</span>[] line;
  SocketStream stream = <span class="keyword">new</span> SocketStream(sock);
  <span class="keyword">while</span> (! stream.eof()) {
    line = stream.readLine();
    <span class="keyword">if</span> (line==<span class="string">""</span>) <span class="keyword">break</span>;
    printf (<span class="string">"%s\n"</span>, toStringz(line));
  }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex119">OutBuffer</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Basic use of std.outbuffer.OutBuffer
Outbuffer avoids reallocation of buffers when the '~' operator is used, and thus should give better performance.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.outbuffer;
<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.stdio;

<span class="keyword">void</span> main ()
{
  <span class="keyword">int</span> areaCode = <span class="number">800</span>, lata = <span class="number">555</span>, lastPart = <span class="number">1212</span>;

  std.outbuffer.OutBuffer buf = <span class="keyword">new</span> OutBuffer;
  buf.write(<span class="string">"Test of building phone number: "</span>);
  buf.write(<span class="string">'('</span>);
  buf.write(toString(areaCode));
  buf.write(<span class="string">") "</span>);
  buf.write(toString(lata));
  buf.write(<span class="string">"-"</span>);
  buf.write(toString(lastPart));
  writefln(<span class="string">"buf: "</span>, buf.toString());

<span class="comment">// instead of:</span>
  writefln(<span class="string">"buf: Test of building phone number: ("</span> 
      ~ toString(areaCode) ~ <span class="string">") "</span> 
      ~ toString(lata) ~ <span class="string">"-"</span> 
      ~ toString(lastPart));
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex125">Win32 Registry api</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Reads int and string from Notepad registry entries. Creates, writes, and reads int and string registry entries for dsource app.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Anonymous</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 *  Copyright (C) 2004 by Digital Mars, www.digitalmars.com
 *  Written by Lynn Allan by adapting code by Walter Bright
 *
 *  This software is provided 'as-is', without any express or implied
 *  warranty. In no event will the authors be held liable for any damages
 *  arising from the use of this software.
 *
 *  Permission is granted to anyone to use this software for any purpose,
 *  including commercial applications, and to alter it and redistribute it
 *  freely, subject to the following restrictions:
 *
 *  o  The origin of this software must not be misrepresented; you must not
 *     claim that you wrote the original software. If you use this software
 *     in a product, an acknowledgment in the product documentation would be
 *     appreciated but is not required.
 *  o  Altered source versions must be plainly marked as such, and must not
 *     be misrepresented as being the original software.
 *  o  This notice may not be removed or altered from any source
 *     distribution.
 */</span>

<span class="comment">/* Compile with:
 * dmd test.d advapi32.lib 
 */</span>

<span class="keyword">import</span> std.stdio;
<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.c.windows.windows;

<span class="keyword">extern</span> (Windows)   <span class="comment">// Not defined in windows.d</span>
{
LONG RegQueryValueExA(HKEY hkey, 
                      LPCTSTR keyName, 
                      LPDWORD reservedNull,
                      LPDWORD type, 
                      <span class="keyword">void</span>*   data,
                      LPDWORD len);
}

<span class="keyword">void</span> main ()
{
  ReadNotepadKeys();
  WriteAppKeys();
}

<span class="keyword">void</span> ReadNotepadKeys()
{
  HKEY hkey;
  LONG result;
  DWORD dwType;
  <span class="keyword">const</span> <span class="keyword">int</span> BUF_SZ = <span class="number">40</span>;
  DWORD dwLen = BUF_SZ;
  <span class="keyword">char</span>[BUF_SZ] regBuf;
  <span class="keyword">int</span> weight;

  result = RegOpenKeyA(HKEY_CURRENT_USER, 
                       <span class="string">"Software\\Microsoft\\Notepad"</span>, &amp;hkey);
  writefln(<span class="string">"OpenKey Result: "</span>, result);
  <span class="keyword">assert</span>(result == std.c.windows.windows.ERROR_SUCCESS);

  result = RegQueryValueExA(hkey, 
                            <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"lfFaceName"</span>, 
                            <span class="keyword">null</span>, 
                            &amp;dwType, 
                            <span class="keyword">cast</span>(<span class="keyword">void</span>*)regBuf, 
                            &amp;dwLen);
  writefln(<span class="string">"Query String Result: "</span>, result, <span class="string">"  Len: "</span>, dwLen);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);
  writefln(<span class="string">"RegBuf: ["</span>, regBuf[<span class="number">0..</span>dwLen-<span class="number">1</span>], <span class="string">"]"</span>);

  dwLen = <span class="number">4</span>;
  result = RegQueryValueExA(hkey, 
                            <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"lfWeight"</span>, 
                            <span class="keyword">null</span>, 
                            &amp;dwType, 
                            <span class="keyword">cast</span>(<span class="keyword">void</span>*)&amp;weight, 
                            &amp;dwLen);
  writefln(<span class="string">"Query DWORD Result: "</span>, result, <span class="string">"  Weight: ["</span>, weight, <span class="string">"]"</span>);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);

  result = RegCloseKey(hkey);
  writefln(<span class="string">"CloseKey Result: "</span>, result);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);
}

<span class="keyword">void</span> WriteAppKeys()
{
  HKEY hkey;
  LONG result;
  DWORD dwType;
  <span class="keyword">const</span> <span class="keyword">int</span> BUF_SZ = <span class="number">4</span>;
  DWORD dwLen = BUF_SZ;
  <span class="keyword">char</span>[BUF_SZ] regBuf;
  DWORD displosition;
  <span class="keyword">int</span> param = <span class="number">0x1001</span>;

  result = RegCreateKeyExA(HKEY_CURRENT_USER, 
                           <span class="string">"Software\\dsource\\Test\\Settings"</span>, 
                           <span class="keyword">cast</span>(<span class="keyword">uint</span>)<span class="keyword">null</span>,
                           <span class="keyword">null</span>,
                           REG_OPTION_NON_VOLATILE,
                           KEY_ALL_ACCESS,
                           <span class="keyword">null</span>,
                           &amp;hkey,
                           &amp;displosition);
  writefln(<span class="string">"CreateKey Result: "</span>, result);
  <span class="keyword">assert</span>(result == std.c.windows.windows.ERROR_SUCCESS);

  dwLen = <span class="number">4</span>;
  result = RegSetValueExA(hkey, 
                          <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"Param"</span>, 
                          <span class="number">0, </span>
                          REG_DWORD, 
                          <span class="keyword">cast</span>(BYTE*)&amp;param, 
                          dwLen);
  writefln(<span class="string">"Set DWORD Result: "</span>, result);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);

  <span class="keyword">char</span>[] regGreeting = <span class="string">"Hello and Goodbye"</span>;
  result = RegSetValueExA(hkey, 
                          <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"Greeting"</span>, 
                          <span class="number">0, </span>
                          REG_SZ, 
                          <span class="keyword">cast</span>(BYTE*)toStringz(regGreeting), 
                          regGreeting.length);
  writefln(<span class="string">"Set DWORD Result: "</span>, result);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);

  result = RegCloseKey(hkey);
  writefln(<span class="string">"CloseKey Result: "</span>, result);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);

  result = RegOpenKeyA(HKEY_CURRENT_USER, 
                       <span class="string">"Software\\dsource\\Test\\Settings"</span>, &amp;hkey);
  writefln(<span class="string">"OpenKey Result: "</span>, result);
  <span class="keyword">assert</span>(result == std.c.windows.windows.ERROR_SUCCESS);

  dwLen = <span class="number">4</span>;
  <span class="keyword">int</span> check;
  result = RegQueryValueExA(hkey, 
                            <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"Param"</span>, 
                            <span class="keyword">null</span>, 
                            &amp;dwType, 
                            <span class="keyword">cast</span>(<span class="keyword">void</span>*)&amp;check, 
                            &amp;dwLen); 
  writefln(<span class="string">"Query DWORD Result: "</span>, result, <span class="string">"  Check: ["</span>, check, <span class="string">"]"</span>);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);
  <span class="keyword">assert</span>(check == param);

  result = RegCloseKey(hkey);
  writefln(<span class="string">"CloseKey Result: "</span>, result);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex144">Using the File's "FileMode" attribute</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Using std.stream methods to create, read from, write to, append to, and delete a file.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>SpottedTiger</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">// streamtest.d</span>
<span class="keyword">private</span> <span class="keyword">import</span> std.stream; 
<span class="keyword">private</span> <span class="keyword">import</span> std.stdio; 

<span class="keyword">void</span> main() 
{ 
   <span class="comment">// FileMode.In     - Read In </span>
   <span class="comment">// FileMode.Out    - Write To </span>
   <span class="comment">// FileMode.OutNew - Create \ Empty Existing </span>
   <span class="comment">// FileMode.Append - Write Appending Data </span>
   File f = <span class="keyword">new</span> File( r<span class="string">"C:\blargh.txt"</span>, FileMode.OutNew ); 
   <span class="keyword">char</span>[] sLine1; 
   <span class="keyword">char</span>[] sLine2; 
    
   <span class="comment">// Creates a file or </span>
   <span class="comment">// Empty the exists file </span>
   <span class="comment">//f.create( r"C:\blargh.txt" ); // same as the .OutNew above </span>
   f.writeLine( <span class="string">"Bleagh!"</span> ); 
   f.close(); 
    
   <span class="comment">// Opens and read from the file </span>
   f.open( r<span class="string">"C:\blargh.txt"</span>, FileMode.In ); 
   sLine1 = f.readLine(); 
   f.close(); 
    
   writefln( <span class="string">"1st.sLine1=\"%s\""</span>, sLine1 ); 
    
   <span class="comment">// Append new data to the end of the file </span>
   f.open( r<span class="string">"C:\blargh.txt"</span>, FileMode.Append ); 
   f.writeLine( <span class="string">"Bleagh2!"</span> ); 
   f.close(); 
  
   f.open( r<span class="string">"C:\blargh.txt"</span>, FileMode.In ); 
   sLine1 = f.readLine(); 
   sLine2 = f.readLine(); 
   f.close(); 
    
   writefln( <span class="string">"2nd.sLine1=\"%s\""</span>, sLine1 ); 
   writefln( <span class="string">"2nd.sLine2=\"%s\""</span>, sLine2 ); 
  
   <span class="comment">// Deletes the file </span>
   f.remove( r<span class="string">"C:\blargh.txt"</span> ); 
} 

Output: 
C:<span class="string">\d</span>md&gt;bin<span class="string">\d</span>md streamtest.d 
C:<span class="string">\d</span>md<span class="string">\b</span><span class="keyword">in</span><span class="string">\.</span>.<span class="string">\.</span>.<span class="string">\d</span>m<span class="string">\b</span><span class="keyword">in</span><span class="string">\l</span>ink.exe streamtest,,,user32+kernel32/noi; 

C:<span class="string">\d</span>md&gt;streamtest 
<span class="number">1</span>st.sLine1=<span class="string">"Bleagh!"</span> 
<span class="number">2</span>nd.sLine1=<span class="string">"Bleagh!"</span> 
<span class="number">2</span>nd.sLine2=<span class="string">"Bleagh2!"</span> 

C:<span class="string">\d</span>md&gt;</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex115">Elapsed Time (uses std.date and std.c.time)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Calculate elapsed time using std.date and std.c.time functions</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.stdio;
<span class="keyword">import</span> std.date;
<span class="keyword">import</span> std.c.time;

<span class="keyword">void</span> main ()
{
  <span class="keyword">const</span> <span class="keyword">int</span> DelayMillis = <span class="number">2000</span>;
  printf(<span class="string">"Test will run for about %d millis\n"</span>, DelayMillis);

  d_time startTime = std.date.getUTCtime();
  d_time curTime = startTime;
  d_time elapsed = <span class="number">0;
</span>

  <span class="comment">// Code to be timed goes here ... just spin with msleep</span>
  <span class="keyword">while</span>(elapsed &lt; DelayMillis) {
    curTime = getUTCtime();
    elapsed = curTime - startTime;
    std.c.time.msleep(<span class="number">100</span>);
  }
  printf(<span class="string">"Ticks/Sec: %u\n"</span>, std.date.TicksPerSecond);
  printf(<span class="string">"Start: %u\n"</span>, startTime);
  printf(<span class="string">"Current: %u\n"</span>, curTime);
  printf(<span class="string">"Elapsed: %u\n"</span>, elapsed);

  <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre> <p>Contributed by <a href="http://www.dsource.org/forums/viewtopic.php?t=319">Lynn</a></p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex81">Base64 Decoding</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to convert base64 text file into a binary file.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

File:   b64_to_bin.d
Author: J C Calvarese (http://jcc_7.tripod.com/d/)
Date:   2004-01-22

*/</span> </code></pre>
<h4>Purpose:</h4>
<p>Converts base64 encoded files found at the <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D">web interface</a> to
the D newsgroup into binary files. (I tested it with post <a href="http://www.digitalmars.com/drn-bin/wwwnews?D/22264">D:22264</a>)</p>

<h4>Instructions:</h4>
<p>Save the page that includes the base64 encoding as something like "wwwwnews.html".
Call this program as "b64_to_bin.exe wwwnews.html".
Rename "wwwnews.html.bin" to whatever the file name should be.</p>

<h4>Limitations:</h4>
<p>This routine only captures the first file if more than one is attached.</p>
<pre><code class="example"><span class="keyword">import</span> std.base64;
<span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.stream;

<span class="keyword">void</span> main(<span class="keyword">char</span>[][] args)
{

    <span class="keyword">if</span> (args.length &gt; <span class="number">1</span>)
    {
        File b64_file = <span class="keyword">new</span> File(args[<span class="number">1</span>]);
        <span class="keyword">char</span>[] line_in;
        printf(<span class="string">"Processing (%.*s)...\n"</span>, args[<span class="number">1</span>]);
        <span class="keyword">while</span> (!b64_file.eof())
        {
            line_in = b64_file.readLine();
            <span class="keyword">if</span> (tolower(line_in) == <span class="string">"content-transfer-encoding: base64&lt;br&gt;"</span>)
            {
                <span class="keyword">char</span>[] content;

                printf(<span class="string">"Base64 content found...\n"</span>);
                line_in = b64_file.readLine();
                line_in = b64_file.readLine();
                line_in = b64_file.readLine();
    
                line_in = line_in[<span class="number">9.</span>.line_in.length];            
                <span class="keyword">while</span>(line_in != <span class="string">"&lt;/pre&gt;"</span>)
                {
                    content ~= line_in;
                    line_in = b64_file.readLine();
                }

                <span class="keyword">char</span>[] decoded_content = decode(content);

                File output = <span class="keyword">new</span> File();
                output.create(args[<span class="number">1</span>] ~ <span class="string">".bin"</span>, FileMode.Out);
                output.writeBlock(decoded_content, decoded_content.length);
                output.close();
                printf(<span class="string">"File saved as %.*s.bin\n\n"</span>, args[<span class="number">1</span>]);
            }
        }
            
    }
    <span class="keyword">else</span>
        printf(<span class="string">"\nb64_to_bin:\nUsage: b64_to_bin [filename to process]\n\n"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex133">Compile all files into a .lib</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This code will create a batch file that will compile files in the current directory into a .lib (designed for Windows).</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

Compile All (compall.d)
Author:  J C Calvarese 
License: Public Domain

With a little effort, it might run on Linux, but I don't currently 
have a Linux machine to try it.

Compiling instructions:

dmd compall.d -unittest
compall.exe
pause


*/</span>

<span class="keyword">import</span> std.recls; <span class="comment">/* for Search */</span>
<span class="keyword">import</span> std.stream; <span class="comment">/* for File */</span>
<span class="keyword">import</span> std.string; <span class="comment">/* for replace */</span>
<span class="keyword">import</span> std.file; <span class="comment">/* for getcwd */</span>


<span class="keyword">unittest</span> <span class="comment">/* requires importation of std.recls and std.file */</span>
{    
    <span class="comment">/* Test the current directory from std.recls against std.file's getcwd. */</span>
    
    Search  searchBase  =   <span class="keyword">new</span> Search(<span class="string">"."</span>, <span class="string">"."</span>, RECLS_FLAG.RECLS_F_DIRECTORIES);
    <span class="keyword">foreach</span>(Entry entry; searchBase)
    {
        <span class="comment">/* I'm only expecting one entry, but I don't know a way to access it without a foreach. */</span>
        <span class="keyword">assert</span>(entry.DirectoryPath() == getcwd ~ <span class="string">"\\"</span>);    
    }
    <span class="keyword">assert</span>(getcwd != <span class="string">""</span>);
    printf(<span class="string">"Unittests successful.\n"</span>);    
}


<span class="keyword">void</span> main()
{   
    <span class="comment">/* Recursively adds each of the files in the current directory to a batch 
    file as a compile command and creates a .lib. */</span>

    <span class="keyword">char</span>[] bufCompile;
    <span class="keyword">char</span>[] bufLib;
    <span class="keyword">char</span>[] relPath;
    <span class="keyword">char</span>[] libName;
    
    <span class="comment">/* TODO: command line argument to allow adjusting this. */</span>
    <span class="keyword">char</span>[] curPath = getcwd;

    <span class="comment">/* TODO: command line argument to allow adjusting this. */</span>
    <span class="keyword">char</span>[] DirBase = curPath ~ <span class="string">"\\"</span>;
        
    <span class="comment">/* TODO: command line argument to allow adjusting this. */</span>
    <span class="keyword">char</span>[] includePath = <span class="string">"-I.."</span>; 
    
    <span class="keyword">int</span> i = rfind(curPath, <span class="string">"\\"</span>);
    <span class="keyword">if</span>(i&gt;-<span class="number">1</span>)
        libName = curPath[i + <span class="number">1</span> .. curPath.length];
    <span class="keyword">else</span>
        libName = <span class="string">"mylib"</span>;

    bufLib = <span class="string">"lib -c "</span> ~ libName ~ <span class="string">".lib"</span>;


    Search  search  =   <span class="keyword">new</span> Search(<span class="string">"."</span>, <span class="string">"*.d"</span>, RECLS_FLAG.RECLS_F_RECURSIVE);
    <span class="keyword">foreach</span>(Entry entry; search)
    {        
        <span class="keyword">with</span>(entry)
        { 
            relPath = DirectoryPath();
            
            <span class="comment">/* Make the path relative */</span>
            relPath = replace(relPath, DirBase, <span class="string">""</span>);
            bufCompile ~= <span class="string">"dmd -c "</span> ~ relPath ~ File() ~ <span class="string">" "</span> ~ includePath ~ <span class="string">\r</span><span class="string">\n</span>;
                        
            <span class="comment">/* Change the extention form ".d" to ".obj" and add to the lib command. */</span>
            bufLib ~= <span class="string">" "</span> ~ replace(File(), <span class="string">".d"</span>, <span class="string">".obj"</span>);
        }
    }
    bufLib ~= <span class="string">\r</span><span class="string">\n</span>;
    printf(<span class="string">"%.*s"</span>, bufCompile ~ bufLib);

    File f = <span class="keyword">new</span> File();
    <span class="keyword">with</span>(f)
    {
        f.create(<span class="string">"makelib.bat"</span>);
        f.writeString(bufCompile ~ bufLib ~ <span class="string">"pause\r\nerase *.obj\r\n"</span>);
        f.close();    
    }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex105">writef</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Since DMD 0.95, writef is available as a replacement for printf. (Access Violations can become a thing of the past.)</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"> <p>Find more details in the <a href="http://www.digitalmars.com/d/std_format.html#format-string">official docs</a>.</p><pre><code class="example"><span class="keyword">import</span> std.stdio;

<span class="keyword">void</span> main()
{
    <span class="comment">/* Integers */</span>
    
    <span class="keyword">int</span> i=<span class="number">123</span>;

    writef(i, <span class="string">\n</span>);         <span class="comment">/* prints "123" */</span>
    writef(<span class="string">"%s"</span>, i, <span class="string">\n</span>);   <span class="comment">/* prints "123" */</span>
    writef(<span class="string">\n</span>);
    
    writef(<span class="string">"Leading zeros\n"</span>);
    
    <span class="comment">/* prints "123" (would have a leading zero or zeros if necessary) */</span>
    writef(<span class="string">"%02s"</span>, i, <span class="string">\n</span>); 

    <span class="comment">/* prints "123" (would have a leading zero or zeros if necessary) */</span>
    writef(<span class="string">"%03s"</span>, i, <span class="string">\n</span>); 

    <span class="comment">/* prints "0123" (leading zero) */</span>
    writef(<span class="string">"%04s"</span>, i, <span class="string">\n</span>); 

    <span class="comment">/* prints "00123" (leading zeros) */</span>
    writef(<span class="string">"%05s"</span>, i, <span class="string">\n</span>); 


    <span class="comment">/* Reals */</span>

    <span class="keyword">real</span> x = <span class="number">1.0</span>;
    writef(x, <span class="string">\n</span>);
    writef(<span class="string">"%f"</span>, x, <span class="string">\n</span>);

    <span class="comment">/* from digitalmars.D.bugs:894 */</span>
    printf( <span class="string">"%Lf\n"</span>, x ); 



    x = <span class="number">2.345</span>;
    writef(x, <span class="string">\n</span>);
    writef(<span class="string">"%f"</span>, x, <span class="string">\n</span>);

    <span class="comment">/* from digitalmars.D.bugs:894 */</span>
    printf( <span class="string">"%Lf\n"</span>, x ); 
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex118">std.perf</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Use the HighPerformanceCounter object in std.perf to find out how long it takes to execute some code.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.stdio;
<span class="keyword">import</span> std.c.time;
<span class="keyword">import</span> std.perf;

<span class="keyword">void</span> main ()
{
  HighPerformanceCounter hpc = <span class="keyword">new</span> HighPerformanceCounter();
  hpc.start();

  <span class="comment">/* Code to be timed goes here ... just msleep for 1.2 seconds */</span>
  std.c.time.msleep(<span class="number">1200</span>);

  hpc.stop();
  writefln(<span class="string">"hpc ms: "</span>, hpc.microseconds(),
              <span class="string">"  Seconds: "</span>, hpc.microseconds() / <span class="number">1000000.0</span>);
}</code></pre> 

<p>Contributed by Lynn in the <a href="http://www.dsource.org/forums/viewtopic.php?p=2278#2278">forum</a>.</p> 
</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex131">Make all.html</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Creates an HTML file that lists all of the other files in the directory.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

File:       make_all_html.d
Author:     J C Calvarese
License:    Public Domain
Date:       2004-10-27
Purpose:    Creates an HTML file that lists all of 
            the other files in the directory.

*/</span>

<span class="keyword">import</span> std.recls;
<span class="keyword">import</span> std.file;


<span class="keyword">void</span> main()
{   
    Search  search  =   <span class="keyword">new</span> Search(getcwd(), <span class="string">"*.html"</span>, RECLS_FLAG.RECLS_F_FILES);
    printf(<span class="string">`&lt;html&gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;body&gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;head&gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"&gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;title&gt;All Topics&lt;/title&gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;link rel="stylesheet" type="text/css" href="style.css" &gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;/head&gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;body&gt;`</span> ~ <span class="string">"\n"</span> ~ 
      <span class="string">`&lt;h1&gt;All Files&lt;/h1&gt;&lt;ul&gt;`</span>);

    <span class="keyword">foreach</span>(Entry entry; search)
    {
        <span class="keyword">with</span>(entry)
        { 
            <span class="keyword">if</span>(File() != <span class="string">"all.html"</span>)
                printf(<span class="string">`&lt;li&gt;&lt;a href="%.*s"&gt;%.*s&lt;/a&gt;&lt;/li&gt;`</span> ~ <span class="string">"\n"</span>, File(), File());
        }
    }
    printf(<span class="string">"&lt;/ul&gt;\n&lt;/body&gt;\n&lt;/html&gt;"</span>);
}</code></pre>

<p><b>Sample Batch File:</b></p>
<tt>@echo off<br>
dmd make_all_html.d<br>
make_all_html.exe &gt; all.html<br>
pause</tt>

</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex28">File Input</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Read in data from a file.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* 

File:      file_io.d
Author:    Justin C. Calvarese, http://jcc_7.tripod.com/d/
License:   Public Domain

Purpose:   Demonstrates getting input from a text file.
*/</span> </code></pre>
<p>Find out more about std.stream in the <a href="http://www.digitalmars.com/d/phobos.html#stream">D Specification</a>.</p>
<pre><code class="example"><span class="keyword">import</span> std.stream;

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    <span class="keyword">char</span>[] c;
    <span class="keyword">char</span>[] fn;
    

    File f = <span class="keyword">new</span> File(<span class="string">"file_io.html"</span>);
    <span class="keyword">while</span> (!f.eof())
    {
        c = f.readLine();
        printf(<span class="string">"%.*s\n"</span>, c);
    }
    
    f.close();    

    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex27">recls</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Recursive directory analysis</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"> <p>In
the future (or maybe in the present now - I haven't checked recently),
recls will be compiled directly into the D runtime library.
As of this writing (DMD 0.79), the recls library has to be made and
"recls.lib" must included in the commands sent to the linker by the
compiler.</p>

<ol><li>Make recls.lib using a command line like this...
<tt>D:\DMD\SRC\PHOBOS\ETC\C\RECLS&gt;make -fwin32.mak</tt>

</li><li>Then put recls.lib in the a lib path (probably either \dm\lib or \dmd\lib).</li></ol>

<p>Here's the batch file I used to compile and test my recls sample:</p>

<p><tt>@echo off<br>
dmd recls.d recls.lib<br>
pause<br>
cd \<br>
\pgm\d\testing\phobos\recls.exe<br>
pause</tt></p>


<p>You might also want to read the recls <a href="http://synesis.com.au/software/recls/faq.html">FAQ</a>.</p><pre><code class="example"><span class="comment">/* 

File:       recls.d
Author:     J C Calvarese
License:    Public Domain
Date:       2004-01-23
Purpose:    Demonstrate the fundamentals of using the recls library in D.

*/</span>

<span class="keyword">import</span> std.recls;

<span class="keyword">void</span> main()
{   
    Search  search  =   <span class="keyword">new</span> Search(<span class="string">"."</span>, <span class="string">"*.*"</span>, RECLS_FLAG.RECLS_F_RECURSIVE);
    <span class="keyword">foreach</span>(Entry entry; search)
    {
        <span class="keyword">with</span>(entry)
        { 
            <span class="keyword">if</span>(!ShortFile())
                printf(<span class="string">"%.*s%.*s\n"</span>, DirectoryPath(), File());
            <span class="keyword">else</span>
                printf(<span class="string">"%.*s%.*s (%.*s)\n"</span>, DirectoryPath(), File(), ShortFile());
        }
    }
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex58">Regular Expressions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates
some simple uses of regular expressions. These examples are a little
contrived as it'd actually be easier to use std.string to do these
tests.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.regexp;
<span class="keyword">import</span> std.c.stdio;

<span class="keyword">bit</span> isalpha(<span class="keyword">char</span>[] c)
{
    RegExp myRegExp;    
    myRegExp = <span class="keyword">new</span> RegExp(<span class="string">"^[a-zA-Z_]+$"</span>, <span class="string">""</span>);    
    <span class="keyword">return</span> <span class="keyword">cast</span>(<span class="keyword">bit</span>) myRegExp.test(c);
}


<span class="keyword">bit</span> isspace(<span class="keyword">char</span>[] c)
{
     <span class="comment">/* true if c is whitespace, false otherwise */</span>

    RegExp myRegExp = <span class="keyword">new</span> RegExp(<span class="string">"^\\s+$"</span>, <span class="string">""</span>);
    <span class="keyword">return</span> <span class="keyword">cast</span>(<span class="keyword">bit</span>) myRegExp.test(c); 
}



<span class="keyword">bit</span> isdigit(<span class="keyword">char</span>[] c)
<span class="comment">/* true if c is a decimal digit, false otherwise */</span>
{
    RegExp myRegExp = <span class="keyword">new</span> RegExp(<span class="string">"^\\d+$"</span>, <span class="string">""</span>);
    <span class="keyword">return</span> <span class="keyword">cast</span>(<span class="keyword">bit</span>) myRegExp.test(c);
}

<span class="keyword">bit</span> ishexdigit(<span class="keyword">char</span>[] c)
<span class="comment">/* true if c is a hexadecimal digit, false otherwise */</span>
{
    RegExp myRegExp = <span class="keyword">new</span> RegExp(<span class="string">"^[0-9A-F]+$"</span>, <span class="string">""</span>);
    <span class="comment">/* If it were D code, "_" would also be valid */</span>

    <span class="keyword">return</span> <span class="keyword">cast</span>(<span class="keyword">bit</span>) myRegExp.test(c);
}

<span class="keyword">bit</span> isoctdigit(<span class="keyword">char</span>[] c)
<span class="comment">/* true if c is an octal digit, false otherwise */</span>
{
    RegExp myRegExp = <span class="keyword">new</span> RegExp(<span class="string">"^[0-7]+$"</span>, <span class="string">""</span>);
    <span class="keyword">return</span> <span class="keyword">cast</span>(<span class="keyword">bit</span>) myRegExp.test(c);
}


<span class="keyword">bit</span> issymbol(<span class="keyword">char</span>[] c)
<span class="comment">/* true if c is legal SQL symbol, false otherwise */</span>
{    
    RegExp myRegExp = <span class="keyword">new</span> RegExp(<span class="string">"^[\\(\\)\\[\\]\\.,;=&lt;&gt;\\+\\-\\*/&amp;\\^]+$"</span>, <span class="string">""</span>);
    <span class="keyword">return</span> <span class="keyword">cast</span>(<span class="keyword">bit</span>) myRegExp.test(c);
}


<span class="keyword">unittest</span>
{
    <span class="comment">/* compile with the -unittest flag to run these tests */</span>

    printf(<span class="string">"Testing functions...\n"</span>);
    
    <span class="keyword">assert</span>(isalpha(<span class="string">"a"</span>) &amp;&amp; isalpha(<span class="string">"A"</span>) &amp;&amp; !isalpha(<span class="string">"9"</span>) &amp;&amp; isalpha(<span class="string">"_"</span>) &amp;&amp; isalpha(<span class="string">"R"</span>) &amp;&amp; !isalpha(<span class="string">"&amp;"</span>));
    
    <span class="keyword">assert</span>(issymbol(<span class="string">"("</span>) &amp;&amp; issymbol(<span class="string">")"</span>) &amp;&amp; issymbol(<span class="string">"["</span>) &amp;&amp; issymbol(<span class="string">"]"</span>) &amp;&amp; issymbol(<span class="string">")"</span>) &amp;&amp; 
      issymbol(<span class="string">"["</span>) &amp;&amp; issymbol(<span class="string">"]"</span>) &amp;&amp; issymbol(<span class="string">"-"</span>) &amp;&amp; issymbol(<span class="string">"/"</span>) &amp;&amp; issymbol(<span class="string">"="</span>) &amp;&amp; issymbol(<span class="string">"*"</span>) &amp;&amp; 
      issymbol(<span class="string">"."</span>) &amp;&amp; !issymbol(<span class="string">"a"</span>) &amp;&amp; !issymbol(<span class="string">"0"</span>) &amp;&amp; !issymbol(<span class="string">"Y"</span>) &amp;&amp; !issymbol(<span class="string">"\\"</span>));
        
    <span class="keyword">assert</span>(isdigit(<span class="string">"0"</span>) &amp;&amp; isdigit(<span class="string">"7"</span>) &amp;&amp; isdigit(<span class="string">"9"</span>) &amp;&amp; !isdigit(<span class="string">"A"</span>)  &amp;&amp; !isdigit(<span class="string">"^"</span>) &amp;&amp; !isdigit(<span class="string">"G"</span>));

    <span class="keyword">assert</span>(ishexdigit(<span class="string">"0"</span>) &amp;&amp; ishexdigit(<span class="string">"7"</span>) &amp;&amp; ishexdigit(<span class="string">"A"</span>)  &amp;&amp; !ishexdigit(<span class="string">"^"</span>) &amp;&amp; !ishexdigit(<span class="string">"G"</span>));

    <span class="keyword">assert</span>(isoctdigit(<span class="string">"0"</span>) &amp;&amp; isoctdigit(<span class="string">"7"</span>) &amp;&amp; !isoctdigit(<span class="string">"8"</span>)  &amp;&amp; !isoctdigit(<span class="string">"A"</span>)  &amp;&amp; !isoctdigit(<span class="string">"^"</span>));

    <span class="keyword">assert</span>(isspace(<span class="string">" "</span>)  &amp;&amp; isspace(<span class="string">"\t"</span>) &amp;&amp; !isspace(<span class="string">"o"</span>)  &amp;&amp; !isspace(<span class="string">"."</span>)  &amp;&amp; !isspace(<span class="string">"5"</span>));

    printf(<span class="string">"Functions tested successfully.\n"</span>);
}

<span class="keyword">void</span> main()
{

    <span class="comment">/* Compile with the -debug flag for this statement to run. */</span>

    <span class="keyword">debug</span> printf(<span class="string">"Main Program.\n"</span>);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex90">std.stream readLine</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Read a file line-by-line.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"> Based on code from <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D.bugs/221">D.bugs:221</a><pre><code class="example"><span class="keyword">import</span> std.c.stdio;
<span class="keyword">import</span> std.stream;

<span class="keyword">int</span> main (<span class="keyword">char</span> [] [] args )
{
 File file = <span class="keyword">new</span> File(<span class="string">"testreadLine.d"</span>);

 <span class="keyword">char</span>[] line;

 <span class="keyword">do</span>
 {
  line = file.readLine();
  printf(<span class="string">"Line: %.*s\n"</span>,line);
 }<span class="keyword">while</span>(!file.eof);


 getch();
 <span class="keyword">return</span> <span class="number">1</span>;
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex56">Threads</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates the use of std.thread with two threads.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

Title:    Threads

Author:   J C Calvarese, http://jcc_7.tripod.com/d/
License:  Public domain
Purpose:  To demonstrate the use of std.thread.


You'll need to adjust these two paths to fit your own computer: 

*/</span>

<span class="keyword">char</span>[] path1 = <span class="string">"c:\\windows\\fonts"</span>; 
<span class="keyword">char</span>[] path2 = <span class="string">"c:\\windows\\temp"</span>; 


<span class="keyword">import</span> std.recls;
<span class="keyword">import</span> std.thread;


<span class="keyword">int</span> run1(<span class="keyword">void</span> *ptr)
{
    printf(<span class="string">"Thread 1 started...\n"</span>);
    Search  search  =   <span class="keyword">new</span> Search(path1, <span class="string">"*.*"</span>, RECLS_FLAG.RECLS_F_RECURSIVE);
    <span class="keyword">foreach</span>(Entry entry; search)
    {
        <span class="keyword">with</span>(entry)
        { 
            <span class="keyword">if</span>(!ShortFile())
                printf(<span class="string">"T1: %.*s%.*s\n"</span>, DirectoryPath(), File());
            <span class="keyword">else</span>
                printf(<span class="string">"T1: %.*s%.*s (%.*s)\n"</span>, DirectoryPath(), File(), ShortFile());
        }
    }     
    printf(<span class="string">"Thread 1 finished.\n"</span>); 
    <span class="keyword">return</span> <span class="number">0;
</span>

}

<span class="keyword">int</span> run2(<span class="keyword">void</span> *ptr)
{
    printf(<span class="string">"Thread 2 started...\n"</span>);    
    Search  search  =   <span class="keyword">new</span> Search(path2, <span class="string">"*.*"</span>, RECLS_FLAG.RECLS_F_RECURSIVE);
    <span class="keyword">foreach</span>(Entry entry; search)
    {
        <span class="keyword">with</span>(entry)
        { 
            <span class="keyword">if</span>(!ShortFile())
                printf(<span class="string">"T2: %.*s%.*s\n"</span>, DirectoryPath(), File());
            <span class="keyword">else</span>
                printf(<span class="string">"T2: %.*s%.*s (%.*s)\n"</span>, DirectoryPath(), File(), ShortFile());
        }
    }     
    printf(<span class="string">"Thread 2 finished.\n"</span>); 
    <span class="keyword">return</span> <span class="number">0;
</span>

}

<span class="keyword">void</span> main()
{   
    Thread t1 = <span class="keyword">new</span> Thread(&amp;run1, <span class="keyword">null</span>);
    
    Thread t2 = <span class="keyword">new</span> Thread(&amp;run2, <span class="keyword">null</span>);
    
    
    t1.start();
    t2.start();
    
    <span class="keyword">while</span>(t1.getState() == std.thread.Thread.TS.RUNNING)
        Thread.yield ();    
}</code></pre>

<p>You may need to make the recls.lib as <a href="http://jcc_7.tripod.com/d/tutor/library/recls.html">explained here</a>.</p>

<p>Compile instructions:<br>
<tt>@echo off<br>
dmd threads.d recls.lib<br>
pause<br>
threads.exe<br>
pause</tt></p>

<p>Thanks to Burton Radons for his helpful posts on this topic 
(<a href="http://www.digitalmars.com/drn-bin/wwwnews?D/10231">D:10231</a> and
<a href="http://www.digitalmars.com/drn-bin/wwwnews?D/10236">D:10236</a>).</p>

</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex148">Variable Arguments using std.stdarg (and std.stdio)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This demo shows typesafe variadic functions using std.stdarg and std.stdio.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"> 

<p>Based on <a href="http://www.dsource.org/tutorials/index.php?show_example=101">a printf-based example</a>.</p>

<pre><code class="example"><span class="comment">/* To protect against the vagaries of stack layouts on different CPU architectures, 
use std.stdarg to access the variadic arguments: */</span>

<span class="keyword">import</span> std.stdarg; 
<span class="keyword">import</span> std.stdio;

<span class="keyword">class</span> FOO{}

<span class="keyword">void</span> foo(...)
{
    writefln(<span class="string">"%s arguments\n"</span>, _arguments.length);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; _arguments.length; i++)
    {
        writef(<span class="string">"%s"</span>, _arguments[i].toString);

        <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">int</span>))
        {
            <span class="keyword">int</span> j = va_arg!(<span class="keyword">int</span>)(_argptr);
            writefln(<span class="string">"\t%s"</span>, j);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">long</span>))
        {
            <span class="keyword">long</span> j = va_arg!(<span class="keyword">long</span>)(_argptr);
            writefln(<span class="string">"\t%s"</span>, j);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">float</span>))
        {
            <span class="keyword">float</span> f = va_arg!(<span class="keyword">float</span>)(_argptr);
            writefln(<span class="string">"\t%s"</span>, f);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">double</span>))
        {
            <span class="keyword">double</span> d = va_arg!(<span class="keyword">double</span>)(_argptr);
            writefln(<span class="string">"\t%s"</span>, d);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(FOO))
        {
            FOO f = va_arg!(FOO)(_argptr);
            writefln(<span class="string">"\t%s"</span>, f);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">char</span>[]))
        {
            <span class="keyword">char</span>[] c = va_arg!(<span class="keyword">char</span>[])(_argptr);
            writefln(<span class="string">"\t%s"</span>, c);
        }
        <span class="keyword">else</span>
            <span class="keyword">assert</span>(<span class="number">0);</span>
    }
}



<span class="keyword">void</span> main()
{
    FOO f = <span class="keyword">new</span> FOO();
    foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3L</span>, <span class="number">4.5</span>, f, <span class="number">7F</span>, <span class="string">"my str"</span>);
}
    


<span class="comment">/*
which prints:

7 arguments

int     1
int     2
long    3
double  4.5
FOO     FOO
float   7
char[]  my str

*/</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex101">Variadic Functions</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>This demo shows typesafe variadic functions (requires DMD 0.93+). It uses std.stdarg and printf.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">

<p>Pieced together from examples in the <a href="http://www.digitalmars.com/d/function.html#variadic">D Specification.</a></p><p>
</p><p>This functionality was introduced in DMD 0.93.</p>

<pre><code class="example"><span class="comment">/* To protect against the vagaries of stack layouts on different CPU architectures, 
use std.stdarg to access the variadic arguments: */</span>

<span class="keyword">import</span> std.stdarg; 

<span class="keyword">class</span> FOO{}

<span class="keyword">void</span> foo(...)
{
    printf(<span class="string">"%d arguments\n"</span>, _arguments.length);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; _arguments.length; i++)
    {   _arguments[i].print();

        <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">int</span>))
        {
            <span class="keyword">int</span> j = va_arg!(<span class="keyword">int</span>)(_argptr);
            printf(<span class="string">"\t%d\n"</span>, j);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">long</span>))
        {
            <span class="keyword">long</span> j = va_arg!(<span class="keyword">long</span>)(_argptr);
            printf(<span class="string">"\t%lld\n"</span>, j);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">double</span>))
        {
            <span class="keyword">double</span> d = va_arg!(<span class="keyword">double</span>)(_argptr);
            printf(<span class="string">"\t%g\n"</span>, d);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(FOO))
        {
            FOO f = va_arg!(FOO)(_argptr);
            printf(<span class="string">"\t%p\n"</span>, f);
        }
        <span class="keyword">else</span> <span class="keyword">if</span> (_arguments[i] == typeid(<span class="keyword">char</span>[]))
        {
            <span class="keyword">char</span>[] c = va_arg!(<span class="keyword">char</span>[])(_argptr);
            printf(<span class="string">"\t%.*s\n"</span>, c);
        }
        <span class="keyword">else</span>
            <span class="keyword">assert</span>(<span class="number">0);</span>
    }
}



<span class="keyword">void</span> main()
{
    FOO f = <span class="keyword">new</span> FOO();

    printf(<span class="string">"%p\n"</span>, f);
    foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3L</span>, <span class="number">4.5</span>, f, <span class="string">"my str"</span>);
}
    


<span class="comment">/*
which prints:

    00870FD0
    5 arguments
    int
        1
    int
        2
    long
        3
    double
        4.5
    FOO
        00870FD0
*/</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex94">Variable Arguments</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Use std.c.stdarg for variable arguments</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"> <p>The std.c.stdarg module <a href="http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/4490">is now obsolete</a> with the release of DMD 0.93 (use std.stdarg instead).</p><pre><code class="example"><span class="keyword">import</span> std.c.stdarg;

<span class="keyword">int</span> foo(<span class="keyword">char</span> *x, ...)
{
    va_list ap;

    va_start!(<span class="keyword">typeof</span>(x))(ap, x);
    printf(<span class="string">"&amp;x = %p, ap = %p\n"</span>, &amp;x, ap);

    <span class="keyword">int</span> i;
    i = va_arg!(<span class="keyword">typeof</span>(i))(ap);
    printf(<span class="string">"i = %d\n"</span>, i);

    <span class="keyword">long</span> l;
    l = va_arg!(<span class="keyword">typeof</span>(l))(ap);
    printf(<span class="string">"l = %lld\n"</span>, l);

    <span class="keyword">uint</span> k;
    k = va_arg!(<span class="keyword">typeof</span>(k))(ap);
    printf(<span class="string">"k = %u\n"</span>, k);

    va_end(ap);

    <span class="keyword">return</span> i + l + k;
}

<span class="keyword">void</span> main()
{
    <span class="keyword">int</span> j;

    j = foo(<span class="string">"hello"</span>, <span class="number">3</span>, <span class="number">23L</span>, <span class="number">4</span>);
    printf(<span class="string">"j = %d\n"</span>, j);
    <span class="keyword">assert</span>(j == <span class="number">30</span>);
}

<span class="comment">/*
adapted from http://www.digitalmars.com/drn-bin/wwwnews?digitalmars.D/273
*/</span> </code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex25">zip</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Using the zip compression format in D.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">

<p>
D has support for the zip compression format in std.zip. 
This example demonstrates its use. 
You'll need an archive called "test.zip". 
You can download a zip file that I've used: <a href="http://jcc_7.tripod.com/d/tutor/library/zip.html">[ look for test.zip on this page ]</a>
</p>

<p>

Posted by Walter at
<a href="http://www.digitalmars.com/drn-bin/wwwnews?D/20379">D:20379</a>.

</p>

<pre><code class="example"><span class="keyword">import</span> std.file;
<span class="keyword">import</span> std.date;
<span class="keyword">import</span> std.zip;
<span class="keyword">import</span> std.zlib;

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    <span class="keyword">byte</span>[] buffer;
    std.zip.ZipArchive zr;
    <span class="keyword">char</span>[] zipname;
    <span class="keyword">ubyte</span>[] data;

    testzlib();
    <span class="keyword">if</span> (args.length &gt; <span class="number">1</span>) zipname = args[<span class="number">1</span>];
    <span class="keyword">else</span> zipname = <span class="string">"test.zip"</span>;
    buffer = <span class="keyword">cast</span>(<span class="keyword">byte</span>[])std.file.read(zipname);
    zr = <span class="keyword">new</span> std.zip.ZipArchive(<span class="keyword">cast</span>(<span class="keyword">void</span>[])buffer);
    printf(<span class="string">"comment = '%.*s'\n"</span>, zr.comment);
    zr.print();

    <span class="keyword">foreach</span> (ArchiveMember de; zr.directory)
    {
         de.print();
         printf(<span class="string">"date = '%.*s'\n"</span>, std.date.toString(std.date.toDtime(de.time)));
        
         arrayPrint(de.compressedData);
        
         data = zr.expand(de);
         printf(<span class="string">"data = '%.*s'\n"</span>, data);
    }

    printf(<span class="string">"**Success**\n"</span>);

    zr = <span class="keyword">new</span> std.zip.ZipArchive();
    ArchiveMember am = <span class="keyword">new</span> ArchiveMember();
    am.compressionMethod = <span class="number">8</span>;
    am.name = <span class="string">"foo.bar"</span>;
    <span class="comment">//am.extra = cast(ubyte[])"ExTrA";</span>

    am.expandedData = <span class="keyword">cast</span>(<span class="keyword">ubyte</span>[])<span class="string">"We all live in a yellow submarine, a yellow submarine"</span>;
    am.expandedSize = am.expandedData.length;
    zr.addMember(am);
    <span class="keyword">void</span>[] data2 = zr.build();
    std.file.write(<span class="string">"foo.zip"</span>, <span class="keyword">cast</span>(<span class="keyword">byte</span>[])data2);

    <span class="keyword">return</span> <span class="number">0;
</span>

}

<span class="keyword">void</span> arrayPrint(<span class="keyword">ubyte</span>[] array)
{
    <span class="comment">//printf("array %p,%d\n", (void*)array, array.length);</span>

    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0; </span>i &lt; array.length; i++)
    {
        printf(<span class="string">"%02x "</span>, array[i]);
        <span class="keyword">if</span> (((i + <span class="number">1</span>) &amp; <span class="number">15</span>) == <span class="number">0)
</span>

         printf(<span class="string">"\n"</span>);
    }
    printf(<span class="string">"\n\n"</span>);
}

<span class="keyword">void</span> testzlib()
{
    <span class="keyword">ubyte</span>[] src = <span class="keyword">cast</span>(<span class="keyword">ubyte</span>[])
<span class="string">"the quick brown fox jumps over the lazy dog\r
the quick brown fox jumps over the lazy dog\r
"</span>;
    <span class="keyword">ubyte</span>[] dst;

    arrayPrint(src);
    dst = <span class="keyword">cast</span>(<span class="keyword">ubyte</span>[])std.zlib.compress(<span class="keyword">cast</span>(<span class="keyword">void</span>[])src);
    arrayPrint(dst);
    src = <span class="keyword">cast</span>(<span class="keyword">ubyte</span>[])std.zlib.uncompress(<span class="keyword">cast</span>(<span class="keyword">void</span>[])dst);
    arrayPrint(src);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex114">Zlib</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>a
simplified version of the zip example that Walter B. posted. It only
has zlib's compress and uncompress calls to minimize 'distractions'
from using zlib.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="keyword">import</span> std.zlib; 

<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    <span class="keyword">ubyte</span>[] beforeCompression = <span class="keyword">cast</span>(<span class="keyword">ubyte</span>[])
<span class="string">"the quick brown fox jumps over the lazy dog\r
the quick brown fox jumps over the lazy dog\r
"</span>;
    <span class="keyword">ubyte</span>[] compressed;
    <span class="keyword">ubyte</span>[] afterDecompression;

    compressed = <span class="keyword">cast</span>(<span class="keyword">ubyte</span>[])std.zlib.compress(<span class="keyword">cast</span>(<span class="keyword">void</span>[])beforeCompression);
    afterDecompression = <span class="keyword">cast</span>(<span class="keyword">ubyte</span>[])std.zlib.uncompress(<span class="keyword">cast</span>(<span class="keyword">void</span>[])compressed);

    <span class="keyword">assert</span>(beforeCompression == afterDecompression);
    printf(<span class="string">"Success! Uncompressed Size: %d Compressed Size: %d\n"</span>,
      beforeCompression.length, compressed.length);

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre> <p>Contributed by <a href="http://www.dsource.org/forums/viewtopic.php?t=318">Lynn</a></p></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex121">Unzip using std.zip</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Shows how to extract a file from a .zip archive.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">

<p>

Shows how to extract a file from a .zip archive.

Adapted from <a href="http://www.digitalmars.com/drn-bin/wwwnews?D/20379">Walter's zlib example</a> by jcc7.

</p>


<p>You'll need an archive called "test.zip". 
You can download a zip file that I've used: <a href="http://jcc_7.tripod.com/d/tutor/library/zip.html">[ look for test.zip on this page ]</a>
</p>

<pre><code class="example"><span class="keyword">import</span> std.file;
<span class="keyword">import</span> std.date;
<span class="keyword">import</span> std.stream;
<span class="keyword">import</span> std.zip;
<span class="keyword">import</span> std.zlib;


<span class="keyword">int</span> main(<span class="keyword">char</span>[][] args)
{
    File f;
    <span class="keyword">byte</span>[] buffer;
    std.zip.ZipArchive zr;
    <span class="keyword">char</span>[] zipname;


    <span class="keyword">if</span> (args.length &gt; <span class="number">1</span>) zipname = args[<span class="number">1</span>];
    <span class="keyword">else</span> zipname = <span class="string">"test.zip"</span>;

    buffer = <span class="keyword">cast</span>(<span class="keyword">byte</span>[])std.file.read(zipname);
    zr = <span class="keyword">new</span> std.zip.ZipArchive(<span class="keyword">cast</span>(<span class="keyword">void</span>[])buffer);

    <span class="keyword">foreach</span> (ArchiveMember de; zr.directory)
    {
        f = <span class="keyword">new</span> File(de.name, FileMode.Out);

        zr.expand(de);
        f.write(de.expandedData);
    }

    printf(<span class="string">"Success!\n"</span>);

    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Windows GUI</h3><h4 id="ex123">MiniCalc</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Simple
Windows GUI example with additional functionality beyond winsamp.d and
winsamp2.d provided with dmd.zip. Uses Win32 api (no gui framework)
with several TextEdit controls.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/* Compile with:
 *  dmd MiniCalc gdi32.lib MiniCalc.def
 */</span>

<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.c.windows.windows;

<span class="keyword">const</span> <span class="keyword">int</span> IDC_BTN_PLUS = <span class="number">103</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_BTN_MINUS = <span class="number">104</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_EDIT_FIRST_NUMBER = <span class="number">105</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_EDIT_SECOND_NUMBER = <span class="number">106</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_EDIT_RESULT_NUMBER = <span class="number">107</span>;

<span class="keyword">static</span> HINSTANCE ghInstance;
<span class="keyword">static</span> HWND      ghPlusBtn;
<span class="keyword">static</span> HWND      ghMinusBtn;
<span class="keyword">static</span> HWND      ghFirstNumberEdit;
<span class="keyword">static</span> HWND      ghSecondNumberEdit;
<span class="keyword">static</span> HWND      ghResultNumberEdit;
<span class="keyword">static</span> HWND      ghWndMain;

<span class="keyword">void</span> CreateControls()
{
  HWND hChapSelectorTree;
  
  ghPlusBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Plus"</span>, 
                 WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                 <span class="number">5</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, <span class="keyword">cast</span>(HMENU) IDC_BTN_PLUS, 
                 ghInstance, <span class="keyword">null</span>);

  ghMinusBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Minus"</span>, 
                 WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                 <span class="number">60</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_BTN_MINUS, 
                 ghInstance, <span class="keyword">null</span>);

  ghFirstNumberEdit = CreateWindowA(<span class="string">"EDIT"</span>, <span class="string">"0"</span>, 
                 WS_CHILD | WS_VISIBLE | WS_BORDER | ES_LEFT,
                 <span class="number">5</span>, <span class="number">32</span>, <span class="number">110</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_EDIT_FIRST_NUMBER, ghInstance, <span class="keyword">null</span>);

  ghSecondNumberEdit = CreateWindowA(<span class="string">"EDIT"</span>, <span class="string">"20"</span>, 
                 WS_CHILD | WS_VISIBLE | WS_BORDER | ES_LEFT,
                 <span class="number">5</span>, <span class="number">60</span>, <span class="number">110</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_EDIT_SECOND_NUMBER, ghInstance, <span class="keyword">null</span>);
  
  ghResultNumberEdit = CreateWindowA(<span class="string">"EDIT"</span>, <span class="string">""</span>, 
                 WS_CHILD | WS_VISIBLE | WS_BORDER | ES_LEFT,
                 <span class="number">5</span>, <span class="number">87</span>, <span class="number">110</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_EDIT_RESULT_NUMBER, 
                 ghInstance, <span class="keyword">null</span>);
}

<span class="keyword">void</span> DoMessagePump()
{
  MSG msg;
  <span class="keyword">while</span> (GetMessageA(&amp;msg, <span class="keyword">cast</span>(HWND) <span class="keyword">null</span>, <span class="number">0, </span><span class="number">0))</span> {
    TranslateMessage(&amp;msg);
    DispatchMessageA(&amp;msg);
  }
}

<span class="keyword">void</span> CreateMainWindow()
{
  HWND hWnd;
  hWnd = CreateWindowA(<span class="string">"DWndClass"</span>, 
               <span class="string">"MiniCalc"</span>, 
               WS_THICKFRAME | WS_MAXIMIZEBOX 
               | WS_MINIMIZEBOX | WS_SYSMENU | WS_VISIBLE,
               CW_USEDEFAULT, CW_USEDEFAULT, 
               <span class="number">125</span>, <span class="number">150</span>, HWND_DESKTOP,
               <span class="keyword">cast</span>(HMENU) <span class="keyword">null</span>, ghInstance, <span class="keyword">null</span>);
  <span class="keyword">assert</span>(hWnd);
  ghWndMain = hWnd;
}

<span class="keyword">void</span> InitApplication()
{
  WNDCLASS wc;
  wc.lpszClassName = <span class="string">"DWndClass"</span>;
  wc.style = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;
  wc.lpfnWndProc = &amp;WindowProc;
  wc.hInstance = ghInstance;
  wc.hIcon = LoadIconA(<span class="keyword">cast</span>(HINSTANCE) <span class="keyword">null</span>, IDI_APPLICATION);
  wc.hCursor = LoadCursorA(<span class="keyword">cast</span>(HINSTANCE) <span class="keyword">null</span>, IDC_CROSS);
  wc.hbrBackground = <span class="keyword">cast</span>(HBRUSH) (COLOR_WINDOW + <span class="number">1</span>);
  wc.lpszMenuName = <span class="keyword">null</span>;
  wc.cbClsExtra = wc.cbWndExtra = <span class="number">0;
</span>
  <span class="keyword">assert</span>(RegisterClassA(&amp;wc));
}

<span class="keyword">void</span> InitInstance()
{
  ghInstance = GetModuleHandleA(<span class="keyword">null</span>);
  InitApplication();

  CreateMainWindow();

  CreateControls();
}

<span class="comment">/**********************************************************/</span>

<span class="comment">/* Note the similarity of this code to the console D startup
 * code in \dmd\src\phobos\dmain2.d
 * You'll also need a .def file with at least the following in it:
 *  EXETYPE NT
 *  SUBSYSTEM WINDOWS
 */</span>

<span class="keyword">extern</span> (C) <span class="keyword">void</span> gc_init();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> gc_term();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _minit();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _moduleCtor();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _moduleUnitTests();

<span class="keyword">extern</span> (Windows)
<span class="keyword">int</span> WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
            LPSTR lpCmdLine, <span class="keyword">int</span> nCmdShow)
{
  <span class="keyword">int</span> result = <span class="number">1</span>;

  gc_init();      <span class="comment">// initialize garbage collector</span>
  _minit();     <span class="comment">// initialize module constructor table</span>

  <span class="keyword">try</span> {
    _moduleCtor();    <span class="comment">// call module constructors</span>
    _moduleUnitTests(); <span class="comment">// run unit tests (optional)</span>

    InitInstance();
    DoMessagePump();
  }
  <span class="keyword">catch</span> (Object o) {    <span class="comment">// catch any uncaught exceptions</span>
    MessageBoxA(<span class="keyword">null</span>, <span class="keyword">cast</span>(<span class="keyword">char</span> *)o.toString(), <span class="string">"Error"</span>,
                MB_OK | MB_ICONEXCLAMATION);
    result = <span class="number">0; </span>  <span class="comment">// failed</span>
  }
  gc_term();      <span class="comment">// run finalizers; terminate garbage collector</span>
  <span class="keyword">return</span> result;
}

<span class="keyword">extern</span>(Windows)
<span class="keyword">int</span> WindowProc(HWND hWnd, <span class="keyword">uint</span> uMsg, WPARAM wParam, LPARAM lParam)
{
  <span class="keyword">char</span>[<span class="number">8</span>] firstNumber;
  <span class="keyword">char</span>[<span class="number">8</span>] secondNumber;
  <span class="keyword">int</span> count;
  <span class="keyword">long</span> num1;
  <span class="keyword">long</span> num2;

  <span class="keyword">switch</span> (uMsg) {
    <span class="keyword">case</span> WM_COMMAND: {
      <span class="keyword">switch</span> (LOWORD(wParam)) {
        <span class="keyword">case</span> IDC_BTN_PLUS:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            count = SendMessageA(ghFirstNumberEdit, WM_GETTEXT, 
                                 <span class="number">6</span>, <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)firstNumber);
            count = SendMessageA(ghSecondNumberEdit, WM_GETTEXT, 
                                 <span class="number">6</span>, <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)secondNumber);
            num1 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])firstNumber);
            num2 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])secondNumber);
            SendMessageA(ghResultNumberEdit, WM_SETTEXT, 
                         <span class="number">8</span>, <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)toString(num1 + num2));
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_BTN_MINUS:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            count = SendMessageA(ghFirstNumberEdit, 
                                 WM_GETTEXT, <span class="number">8</span>, 
                                 <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)firstNumber);
            count = SendMessageA(ghSecondNumberEdit, 
                                 WM_GETTEXT, <span class="number">8</span>, 
                                 <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)secondNumber);
            num1 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])firstNumber);
            num2 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])secondNumber);
            SendMessageA(ghResultNumberEdit, 
                         WM_SETTEXT, <span class="number">8</span>, 
                         <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)toString(num1 - num2));
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_FIRST_NUMBER:
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_SECOND_NUMBER:
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_RESULT_NUMBER:
          <span class="keyword">break</span>;
      }
      <span class="keyword">break</span>;
    }
    <span class="keyword">case</span> WM_DESTROY:
      PostQuitMessage(<span class="number">0);</span>
      <span class="keyword">break</span>;

    <span class="keyword">case</span> WM_NOTIFY:
      <span class="keyword">break</span>;

    <span class="keyword">default</span>:
      <span class="keyword">break</span>;
  }
  <span class="keyword">return</span> DefWindowProcA(hWnd, uMsg, wParam, lParam);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex124">TreeView</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Demonstrates
basic usage of Win32 TreeView control. Creates very simple tree, and
responds to mouse click selections with confirmation in TextViewer.
Only uses Win32 api calls ... no GUI framework. Buttons created, but
only 'stubbed' functionality. As o</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 *  Copyright (C) 2004 by Digital Mars, www.digitalmars.com
 *  Written by Lynn Allan by adapting code by Walter Bright
 *
 *  This software is provided 'as-is', without any express 
 *  or implied warranty. In no event will the authors be held
 *  liable for any damages arising from the use of this software.
 *
 *  Permission is granted to anyone to use this software for 
 *  any purpose, including commercial applications, and to alter
 *  it and redistribute it freely, subject to the following 
 *  restrictions:
 *
 *  o The origin of this software must not be misrepresented; 
 *    you must not claim that you wrote the original software.
 *    If you use this software in a product, an acknowledgment
 *    in the product documentation would be
 *    appreciated but is not required.
 *  o Altered source versions must be plainly marked as such,
 *    and must not be misrepresented as being the original
 *    software.
 *  o This notice may not be removed or altered from any source
 *    distribution.
 */</span>

<span class="comment">/* Compile with:
 *  dmd -O -release TreeView.d win32.lib gdi32.lib comctl32.lib TreeView.def
 *  or
 *  dmd -g -debug TreeView.d win32d.lib gdi32.lib comctl32.lib TreeView.def
 *
 * TreeView.def should contain:
 * EXETYPE NT
 * SUBSYSTEM WINDOWS
 */</span>

<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.outbuffer;
<span class="keyword">import</span> std.c.windows.windows;
<span class="keyword">import</span> win32.commctrl;

<span class="keyword">const</span> <span class="keyword">int</span> IDC_BTN_BOOKS = <span class="number">103</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_BTN_SEARCH = <span class="number">104</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_EDIT_SEARCH_WORDS = <span class="number">105</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_EDIT_TEXT_VIEWER = <span class="number">106</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_BTN_OPTIONS = <span class="number">107</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_BTN_HELP = <span class="number">108</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_TREE_CHAP_SELECTOR = <span class="number">109</span>;
<span class="keyword">const</span> <span class="keyword">int</span> IDC_LIST_SEARCH_MATCHES_LIST = <span class="number">110</span>;

<span class="keyword">static</span> HINSTANCE ghInstance;
<span class="keyword">static</span> HWND      ghBooksBtn;
<span class="keyword">static</span> HWND      ghChapSelectorTree;
<span class="keyword">static</span> HWND      ghHelpBtn;
<span class="keyword">static</span> HWND      ghOptionsBtn;
<span class="keyword">static</span> HWND      ghSearchBtn;
<span class="keyword">static</span> HWND      ghSearchWordsEdit;
<span class="keyword">static</span> HWND      ghTextViewerEdit;
<span class="keyword">static</span> HWND      ghWndMain;
<span class="keyword">static</span> HTREEITEM gbHcsBook[<span class="number">68</span>];

<span class="keyword">void</span> CreateControls()
{
  HWND hChapSelectorTree;
  
  ghBooksBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Books"</span>, 
                     WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                     <span class="number">5</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, 
                             <span class="keyword">cast</span>(HMENU) IDC_BTN_BOOKS, ghInstance, <span class="keyword">null</span>);
  ghSearchBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Search"</span>, 
                      WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                      <span class="number">58</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, 
                      <span class="keyword">cast</span>(HMENU) IDC_BTN_SEARCH, ghInstance, <span class="keyword">null</span>);

  ghSearchWordsEdit = CreateWindowA(<span class="string">"EDIT"</span>, <span class="string">""</span>, 
                            WS_CHILD | WS_VISIBLE | WS_BORDER | ES_LEFT,
                            <span class="number">115</span>, <span class="number">5</span>, <span class="number">145</span>, <span class="number">25</span>, ghWndMain, 
                            <span class="keyword">cast</span>(HMENU) IDC_EDIT_SEARCH_WORDS, ghInstance, <span class="keyword">null</span>);

  ghOptionsBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Options"</span>, 
                       WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                       <span class="number">265</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, 
                       <span class="keyword">cast</span>(HMENU) IDC_BTN_OPTIONS, ghInstance, <span class="keyword">null</span>);

  ghHelpBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Help"</span>, 
                            WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                            <span class="number">320</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, 
                            <span class="keyword">cast</span>(HMENU) IDC_BTN_HELP, ghInstance, <span class="keyword">null</span>);

  ghTextViewerEdit = CreateWindowA(<span class="string">"EDIT"</span>, <span class="string">""</span>, 
                           WS_CHILD | WS_VISIBLE | WS_BORDER 
                           | ES_AUTOVSCROLL | WS_VSCROLL
                           | ES_LEFT | ES_MULTILINE | ES_NOHIDESEL,
                           <span class="number">115</span>, <span class="number">32</span>, <span class="number">260</span>, <span class="number">300</span>, ghWndMain, 
                           <span class="keyword">cast</span>(HMENU) IDC_EDIT_TEXT_VIEWER, ghInstance, <span class="keyword">null</span>);

  SendMessageA(ghTextViewerEdit, WM_SETTEXT, <span class="number">0, </span>
      <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"Hello\x0D\x0A"</span>
                          <span class="string">"Line 2\x0D\x0A"</span>
                          <span class="string">"Line 3\x0D\x0A"</span>
                          <span class="string">"Long Line 4 to check word wrap aaa bbb ccc ddd eee "</span>
                          <span class="string">"fff ggg hhh iii jjj kkk lll mmm\x0D\x0A"</span>
                          <span class="string">"Line 5\x0D\x0A"</span>
                          <span class="string">"Line 6"</span>);


  InitCommonControls();

  hChapSelectorTree = CreateWindowA(<span class="string">"SYSTREEVIEW32"</span>, <span class="string">""</span>, 
                            WS_CHILD | WS_VISIBLE | WS_BORDER | TVS_HASLINES |
                            WS_CLIPSIBLINGS | TVS_HASBUTTONS | TVS_LINESATROOT,
                            <span class="number">5</span>, <span class="number">32</span>, <span class="number">110</span>, <span class="number">300</span>, ghWndMain, 
                            <span class="keyword">cast</span>(HMENU) IDC_TREE_CHAP_SELECTOR, ghInstance, <span class="keyword">null</span>);
  <span class="keyword">if</span> (hChapSelectorTree == <span class="keyword">null</span>) {
    MessageBoxA(<span class="keyword">null</span>, <span class="keyword">cast</span>(<span class="keyword">char</span> *)(<span class="string">"ChapSelector Tree not created!"</span>), 
                <span class="string">"Error"</span>, MB_OK | MB_ICONEXCLAMATION);
  }
  <span class="keyword">else</span> {
    ghChapSelectorTree = hChapSelectorTree;
  }
}

<span class="keyword">void</span> DoMessagePump()
{
  MSG msg;
  <span class="keyword">while</span> (GetMessageA(&amp;msg, <span class="keyword">cast</span>(HWND) <span class="keyword">null</span>, <span class="number">0, </span><span class="number">0))</span> {
    TranslateMessage(&amp;msg);
    DispatchMessageA(&amp;msg);
  }
}

<span class="keyword">void</span> CreateMainWindow()
{
  HWND hWnd;
  hWnd = CreateWindowA(<span class="string">"DWndClass"</span>, <span class="string">"TreeView Example"</span>, 
               WS_THICKFRAME | WS_MAXIMIZEBOX | WS_MINIMIZEBOX 
               | WS_SYSMENU | WS_VISIBLE,
               CW_USEDEFAULT, CW_USEDEFAULT, <span class="number">385</span>, <span class="number">375</span>, HWND_DESKTOP,
               <span class="keyword">cast</span>(HMENU) <span class="keyword">null</span>, ghInstance, <span class="keyword">null</span>);
  <span class="keyword">assert</span>(hWnd);
  ghWndMain = hWnd;
}

<span class="keyword">void</span> InitApplication()
{
  WNDCLASS wc;
  wc.lpszClassName = <span class="string">"DWndClass"</span>;
  wc.style = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;
  wc.lpfnWndProc = &amp;WindowProc;
  wc.hInstance = ghInstance;
  wc.hIcon = LoadIconA(<span class="keyword">cast</span>(HINSTANCE) <span class="keyword">null</span>, IDI_APPLICATION);
  wc.hCursor = LoadCursorA(<span class="keyword">cast</span>(HINSTANCE) <span class="keyword">null</span>, IDC_CROSS);
  wc.hbrBackground = <span class="keyword">cast</span>(HBRUSH) (COLOR_WINDOW + <span class="number">1</span>);
  wc.lpszMenuName = <span class="keyword">null</span>;
  wc.cbClsExtra = wc.cbWndExtra = <span class="number">0;
</span>
  <span class="keyword">assert</span>(RegisterClassA(&amp;wc));
}

<span class="keyword">void</span> InitInstance()
{
  ghInstance = GetModuleHandleA(<span class="keyword">null</span>);
  InitApplication();

  CreateMainWindow();

  CreateControls();

  LoadChapSelector();
}

<span class="keyword">void</span> LoadChapterText(LPARAM lParam)
{
  LPNM_TREEVIEWA pnmtv = <span class="keyword">cast</span>(LPNM_TREEVIEWA) lParam;
  TV_ITEMA tvI;
  <span class="keyword">char</span> szText[<span class="number">256</span>];

  tvI.mask = TVIF_TEXT | TVIF_PARAM;
  tvI.pszText = szText;
  tvI.cchTextMax = <span class="number">32</span>;
  tvI.hItem = pnmtv.itemNew.hItem;

  SendMessageA(ghChapSelectorTree, TVM_GETITEM, <span class="number">0, </span>
               <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(TV_ITEMA*)&amp;tvI);

  OutBuffer buf = <span class="keyword">new</span> OutBuffer;
  buf.reserve(<span class="number">32</span>);
  buf.write(toString(tvI.pszText));
  buf.write(<span class="string">" = "</span>);
  buf.write(toString(tvI.lParam));

  SendMessageA(ghTextViewerEdit, WM_SETTEXT, <span class="number">0, </span>
               <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)buf.toString());
}

<span class="keyword">void</span> LoadBook(<span class="keyword">int</span> bookNum, <span class="keyword">char</span>[] bookName, 
              <span class="keyword">char</span>[] bookAbbrev, <span class="keyword">int</span> chapCount)
{
  TV_ITEMA tvI;
  TV_INSERTSTRUCTA tvIns;

  tvI.mask = TVIF_TEXT | TVIF_PARAM;
  tvI.pszText = bookName;
  tvI.cchTextMax = <span class="number">10</span>;
  tvI.lParam = bookNum * <span class="number">1000</span>;
  tvIns.item = tvI;
  tvIns.hInsertAfter = <span class="keyword">cast</span>(HTREEITEM)TVI_ROOT;
  tvIns.hParent = <span class="keyword">null</span>;
  gbHcsBook[bookNum] = <span class="keyword">cast</span>(HTREEITEM)SendMessageA(ghChapSelectorTree, 
                                                   TVM_INSERTITEM, <span class="number">0, </span>
                                                   <span class="keyword">cast</span>(<span class="keyword">int</span>)&amp;tvIns);

  tvI.cChildren = <span class="number">0;
</span>
  tvIns.hParent = gbHcsBook[bookNum];
  tvIns.hInsertAfter = <span class="keyword">cast</span>(HTREEITEM)TVI_LAST;

  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= chapCount; ++i) {
    tvI.pszText = bookAbbrev ~ <span class="string">"."</span> ~ toString(i);
    tvI.lParam = bookNum * <span class="number">1000</span> + i;
    tvIns.item = tvI;
    SendMessageA(ghChapSelectorTree, 
                 TVM_INSERTITEM, <span class="number">0, </span>
                 <span class="keyword">cast</span>(<span class="keyword">int</span>)&amp;tvIns);
  }
}

<span class="keyword">void</span> LoadChapSelector()
{
  LoadBook(<span class="number">1</span>, <span class="string">"Genesis"</span>, <span class="string">"Gen"</span>, <span class="number">10</span>);
  LoadBook(<span class="number">2</span>, <span class="string">"Exodus"</span>, <span class="string">"Exo"</span>, <span class="number">8</span>);
  LoadBook(<span class="number">3</span>, <span class="string">"Leviticus"</span>, <span class="string">"Lev"</span>, <span class="number">4</span>);
  LoadBook(<span class="number">4</span>, <span class="string">"Numbers"</span>, <span class="string">"Num"</span>, <span class="number">6</span>);
}

<span class="comment">/**********************************************************/</span>

<span class="comment">/* Note the similarity of this code to the console D startup
 * code in \dmd\src\phobos\dmain2.d
 * You'll also need a .def file with at least the following in it:
 *  EXETYPE NT
 *  SUBSYSTEM WINDOWS
 */</span>

<span class="keyword">extern</span> (C) <span class="keyword">void</span> gc_init();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> gc_term();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _minit();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _moduleCtor();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _moduleUnitTests();

<span class="keyword">extern</span> (Windows)
<span class="keyword">int</span> WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
            LPSTR lpCmdLine, <span class="keyword">int</span> nCmdShow)
{
  <span class="keyword">int</span> result = <span class="number">1</span>;

  gc_init();    <span class="comment">// initialize garbage collector</span>
  _minit();     <span class="comment">// initialize module constructor table</span>

  <span class="keyword">try</span> {
    _moduleCtor();      <span class="comment">// call module constructors</span>
    _moduleUnitTests(); <span class="comment">// run unit tests (optional)</span>

    InitInstance();
  DoMessagePump();
  }
  <span class="keyword">catch</span> (Object o) {    <span class="comment">// catch any uncaught exceptions</span>
    MessageBoxA(<span class="keyword">null</span>, <span class="keyword">cast</span>(<span class="keyword">char</span> *)o.toString(), <span class="string">"Error"</span>,
                MB_OK | MB_ICONEXCLAMATION);
    result = <span class="number">0; </span>  <span class="comment">// failed</span>
  }
  gc_term();      <span class="comment">// run finalizers; terminate garbage collector</span>
  <span class="keyword">return</span> result;
}

<span class="keyword">extern</span>(Windows)
<span class="keyword">int</span> WindowProc(HWND hWnd, <span class="keyword">uint</span> uMsg, WPARAM wParam, LPARAM lParam)
{
  LPNMHDR  pnmhdr;

  <span class="keyword">switch</span> (uMsg) {
    <span class="keyword">case</span> WM_COMMAND: {
      <span class="keyword">switch</span> (LOWORD(wParam)) {
        <span class="keyword">case</span> IDC_BTN_BOOKS:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            MessageBoxA(hWnd, <span class="string">"Clicked"</span>, <span class="string">"Books"</span>,
                        MB_OK | MB_ICONINFORMATION);
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_BTN_SEARCH:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            MessageBoxA(hWnd, <span class="string">"Clicked"</span>, <span class="string">"Search"</span>,
                        MB_OK | MB_ICONEXCLAMATION);
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_BTN_OPTIONS:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            MessageBoxA(hWnd, <span class="string">"Clicked"</span>, <span class="string">"Options"</span>,
                        MB_OK | MB_ICONEXCLAMATION);
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_BTN_HELP:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            MessageBoxA(hWnd, <span class="string">"Clicked"</span>, <span class="string">"Help"</span>,
                        MB_OK | MB_ICONEXCLAMATION);
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_SEARCH_WORDS:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            MessageBoxA(hWnd, <span class="string">"Clicked"</span>, <span class="string">"Search Words"</span>,
                        MB_OK | MB_ICONEXCLAMATION);
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_TEXT_VIEWER:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            MessageBoxA(hWnd, <span class="string">"Clicked"</span>, <span class="string">"Text Viewer"</span>,
                        MB_OK | MB_ICONEXCLAMATION);
          }
          <span class="keyword">break</span>;
      }
      <span class="keyword">break</span>;
    }
    <span class="keyword">case</span> WM_DESTROY:
      PostQuitMessage(<span class="number">0);</span>
      <span class="keyword">break</span>;

    <span class="keyword">case</span> WM_NOTIFY:
      pnmhdr = <span class="keyword">cast</span>(LPNMHDR)lParam;
      <span class="keyword">if</span> (pnmhdr.hwndFrom == <span class="keyword">cast</span>(HANDLE)ghChapSelectorTree) {
        UINT code = pnmhdr.code;
        <span class="keyword">if</span> (code == TVN_SELCHANGED || code == TVN_KEYDOWN) {
          LoadChapterText(lParam);
        }
      }
      <span class="keyword">break</span>;

    <span class="keyword">default</span>:
      <span class="keyword">break</span>;
  }
  <span class="keyword">return</span> DefWindowProcA(hWnd, uMsg, wParam, lParam);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex130">MiniCalc - RestorePosition</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Simple
windows app that stores it upper-left coordinates in registry so that
it can remember where it was when the app was closed.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>Lynn</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
 *  Copyright (C) 2004 by Digital Mars, www.digitalmars.com
 *  Written by Lynn Allan
 *  This software is provided 'as-is'. Released to public domain.
 *
 * Compile with:
 *  dmd MiniCalc.d gdi32.lib advapi32.lib MiniCalc.def
 *
 * You'll also need a .def file with at least the following in it:
 *  EXETYPE NT
 *  SUBSYSTEM WINDOWS
 *
 * Current as of dmd ver 0.102. In the basic dmd distribution, there
 *   are missing extern definitions for registry and windowplacement
 *   constants and structures. For now, these have been provided. There
 *   are auxillary files registry.d and win32.commctrl.d that will 
 *   probably eventually be included with the standard phobos distribution.
 */</span>

<span class="keyword">import</span> std.string;
<span class="keyword">import</span> std.c.windows.windows;

<span class="keyword">private</span> <span class="keyword">enum</span> {
IDC_BTN_PLUS = <span class="number">103</span>,
IDC_BTN_MINUS,
IDC_EDIT_FIRST_NUMBER,
IDC_EDIT_SECOND_NUMBER,
IDC_EDIT_RESULT_NUMBER
}

<span class="keyword">private</span> HINSTANCE ghInstance;
<span class="keyword">private</span> HWND      ghPlusBtn;
<span class="keyword">private</span> HWND      ghMinusBtn;
<span class="keyword">private</span> HWND      ghFirstNumberEdit;
<span class="keyword">private</span> HWND      ghSecondNumberEdit;
<span class="keyword">private</span> HWND      ghResultNumberEdit;
<span class="keyword">private</span> HWND      ghWndMain;

<span class="keyword">private</span> <span class="keyword">int</span> gDlgTop;
<span class="keyword">private</span> <span class="keyword">int</span> gDlgLeft;

<span class="keyword">void</span> CreateControls()
{
  HWND hChapSelectorTree;
  
  ghPlusBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Plus"</span>, 
                 WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                 <span class="number">5</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, <span class="keyword">cast</span>(HMENU) IDC_BTN_PLUS, 
                 ghInstance, <span class="keyword">null</span>);

  ghMinusBtn = CreateWindowA(<span class="string">"BUTTON"</span>, <span class="string">"Minus"</span>, 
                 WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT,
                 <span class="number">60</span>, <span class="number">5</span>, <span class="number">53</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_BTN_MINUS, 
                 ghInstance, <span class="keyword">null</span>);

  ghFirstNumberEdit = CreateWindowA(<span class="string">"EDIT"</span>, toString(gDlgLeft), 
                 WS_CHILD | WS_VISIBLE | WS_BORDER | ES_LEFT,
                 <span class="number">5</span>, <span class="number">32</span>, <span class="number">110</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_EDIT_FIRST_NUMBER, ghInstance, <span class="keyword">null</span>);

  ghSecondNumberEdit = CreateWindowA(<span class="string">"EDIT"</span>, toString(gDlgTop), 
                 WS_CHILD | WS_VISIBLE | WS_BORDER | ES_LEFT,
                 <span class="number">5</span>, <span class="number">60</span>, <span class="number">110</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_EDIT_SECOND_NUMBER, ghInstance, <span class="keyword">null</span>);
  
  ghResultNumberEdit = CreateWindowA(<span class="string">"EDIT"</span>, <span class="string">""</span>, 
                 WS_CHILD | WS_VISIBLE | WS_BORDER | ES_LEFT,
                 <span class="number">5</span>, <span class="number">87</span>, <span class="number">110</span>, <span class="number">25</span>, ghWndMain, 
                 <span class="keyword">cast</span>(HMENU) IDC_EDIT_RESULT_NUMBER, 
                 ghInstance, <span class="keyword">null</span>);
}

<span class="keyword">void</span> DoMessagePump()
{
  MSG msg;
  <span class="keyword">while</span> (GetMessageA(&amp;msg, <span class="keyword">cast</span>(HWND) <span class="keyword">null</span>, <span class="number">0, </span><span class="number">0))</span> {
    TranslateMessage(&amp;msg);
    DispatchMessageA(&amp;msg);
  }
}

<span class="keyword">void</span> CreateMainWindow()
{
  HWND hWnd;
  hWnd = CreateWindowA(<span class="string">"DWndClass"</span>, 
               <span class="string">"MiniCalc"</span>, 
               WS_THICKFRAME | WS_MAXIMIZEBOX 
               | WS_MINIMIZEBOX | WS_SYSMENU | WS_VISIBLE,
               gDlgLeft, gDlgTop,
               <span class="number">125</span>, <span class="number">150</span>,       <span class="comment">// width &amp; height</span>
               HWND_DESKTOP,
               <span class="keyword">cast</span>(HMENU) <span class="keyword">null</span>, ghInstance, <span class="keyword">null</span>);
  <span class="keyword">assert</span>(hWnd);
  ghWndMain = hWnd;
}

<span class="keyword">void</span> InitApplication()
{
  WNDCLASS wc;
  wc.lpszClassName = <span class="string">"DWndClass"</span>;
  wc.style = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;
  wc.lpfnWndProc = &amp;WindowProc;
  wc.hInstance = ghInstance;
  wc.hIcon = LoadIconA(<span class="keyword">cast</span>(HINSTANCE) <span class="keyword">null</span>, IDI_APPLICATION);
  wc.hCursor = LoadCursorA(<span class="keyword">cast</span>(HINSTANCE) <span class="keyword">null</span>, IDC_CROSS);
  wc.hbrBackground = <span class="keyword">cast</span>(HBRUSH) (COLOR_WINDOW + <span class="number">1</span>);
  wc.lpszMenuName = <span class="keyword">null</span>;
  wc.cbClsExtra = wc.cbWndExtra = <span class="number">0;
</span>
  <span class="keyword">assert</span>(RegisterClassA(&amp;wc));
}

<span class="keyword">void</span> InitInstance()
{
  ghInstance = GetModuleHandleA(<span class="keyword">null</span>);
  InitApplication();

  InitRegistry();

  CreateMainWindow();

  CreateControls();
}

<span class="keyword">extern</span> (Windows)   <span class="comment">// Not defined in windows.d ... use Core32</span>
{
LONG RegQueryValueExA(HKEY hkey, 
                      LPCTSTR keyName, 
                      LPDWORD reservedNull,
                      LPDWORD type, 
                      <span class="keyword">void</span>*   data,
                      LPDWORD len);

<span class="keyword">struct</span> WINDOWPLACEMENT {
    UINT  length;
    UINT  flags;
    UINT  showCmd;
    POINT ptMinPosition;
    POINT ptMaxPosition;
    RECT  rcNormalPosition;
}
BOOL GetWindowPlacement(HWND hWnd,WINDOWPLACEMENT *lpwndpl);
}

<span class="keyword">private</span> <span class="keyword">void</span> InitRegistry()
{
  HKEY hkey;
  LONG result;
  DWORD dwType;
  <span class="keyword">const</span> <span class="keyword">int</span> BUF_SZ = <span class="number">4</span>;
  DWORD dwLen = BUF_SZ;
  DWORD displosition;

  result = RegCreateKeyExA(HKEY_CURRENT_USER, 
                           <span class="string">"Software\\dSource\\MiniCalc\\Settings"</span>, 
                           <span class="keyword">cast</span>(<span class="keyword">uint</span>)<span class="keyword">null</span>,
                           <span class="keyword">null</span>,
                           REG_OPTION_NON_VOLATILE,
                           KEY_ALL_ACCESS,
                           <span class="keyword">null</span>,
                           &amp;hkey,
                           &amp;displosition);
  <span class="keyword">assert</span>(result == std.c.windows.windows.ERROR_SUCCESS);

  result = RegCloseKey(hkey);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);

  result = RegOpenKeyA(HKEY_CURRENT_USER, 
                       <span class="string">"Software\\dSource\\MiniCalc\\Settings"</span>, &amp;hkey);
  <span class="keyword">assert</span>(result == std.c.windows.windows.ERROR_SUCCESS);

  <span class="keyword">try</span> {
    dwLen = <span class="number">4</span>;
    result = RegQueryValueExA(hkey, 
                              <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"DlgTop"</span>, 
                              <span class="keyword">null</span>, 
                              &amp;dwType, 
                              <span class="keyword">cast</span>(<span class="keyword">void</span>*)&amp;gDlgTop, 
                              &amp;dwLen); 
    <span class="keyword">assert</span>(result == ERROR_SUCCESS);

    result = RegQueryValueExA(hkey, 
                              <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"DlgLeft"</span>, 
                              <span class="keyword">null</span>, 
                              &amp;dwType, 
                              <span class="keyword">cast</span>(<span class="keyword">void</span>*)&amp;gDlgLeft, 
                              &amp;dwLen); 
    <span class="keyword">assert</span>(result == ERROR_SUCCESS);
  }
  <span class="keyword">catch</span>(Object o) {
    gDlgLeft = <span class="number">400</span>;
    gDlgTop  = <span class="number">50</span>;
  }
  result = RegCloseKey(hkey);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);
}

<span class="keyword">private</span> <span class="keyword">void</span> SaveRegistrySettings()
{
  DWORD dwLen;
  HKEY  hkey;
  LONG  result;

  result = RegOpenKeyA(HKEY_CURRENT_USER, 
                       <span class="string">"Software\\dSource\\MiniCalc\\Settings"</span>, 
                       &amp;hkey);
  <span class="keyword">assert</span>(result == std.c.windows.windows.ERROR_SUCCESS);

  dwLen = <span class="number">4</span>;
  result = RegSetValueExA(hkey, 
                          <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"DlgTop"</span>, 
                          <span class="number">0, </span>
                          REG_DWORD, 
                          <span class="keyword">cast</span>(BYTE*)&amp;gDlgTop, 
                          dwLen);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);

  result = RegSetValueExA(hkey, 
                          <span class="keyword">cast</span>(<span class="keyword">char</span>*)<span class="string">"DlgLeft"</span>, 
                          <span class="number">0, </span>
                          REG_DWORD, 
                          <span class="keyword">cast</span>(BYTE*)&amp;gDlgLeft, 
                          dwLen);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);

  result = RegCloseKey(hkey);
  <span class="keyword">assert</span>(result == ERROR_SUCCESS);
}

<span class="keyword">private</span> <span class="keyword">void</span> GetCurrentMainWindowPosition()
<span class="keyword">in</span> { <span class="keyword">assert</span>(ghWndMain != <span class="keyword">null</span>); }
<span class="keyword">body</span> {
  WINDOWPLACEMENT windowPlacement;
  <span class="keyword">int</span> flag  = GetWindowPlacement(ghWndMain, &amp;windowPlacement);
  <span class="keyword">assert</span> (flag != <span class="number">0);</span>

  <span class="keyword">debug</span> { <span class="keyword">int</span> _dbg_left = windowPlacement.rcNormalPosition.left; }
  gDlgLeft = windowPlacement.rcNormalPosition.left;
  gDlgTop  = windowPlacement.rcNormalPosition.top;
}

<span class="comment">/**********************************************************/</span>

<span class="keyword">extern</span> (C) <span class="keyword">void</span> gc_init();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> gc_term();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _minit();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _moduleCtor();
<span class="keyword">extern</span> (C) <span class="keyword">void</span> _moduleUnitTests();

<span class="keyword">extern</span> (Windows)
<span class="keyword">int</span> WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
            LPSTR lpCmdLine, <span class="keyword">int</span> nCmdShow)
{
  <span class="keyword">int</span> result = <span class="number">1</span>;

  gc_init();      <span class="comment">// initialize garbage collector</span>
  _minit();     <span class="comment">// initialize module constructor table</span>

  <span class="keyword">try</span> {
    _moduleCtor();    <span class="comment">// call module constructors</span>
    _moduleUnitTests(); <span class="comment">// run unit tests (optional)</span>

    InitInstance();
    DoMessagePump();
  }
  <span class="keyword">catch</span> (Object o) {    <span class="comment">// catch any uncaught exceptions</span>
    MessageBoxA(<span class="keyword">null</span>, <span class="keyword">cast</span>(<span class="keyword">char</span> *)o.toString(), <span class="string">"Error"</span>,
                MB_OK | MB_ICONEXCLAMATION);
    result = <span class="number">0; </span>  <span class="comment">// failed</span>
  }
  gc_term();      <span class="comment">// run finalizers; terminate garbage collector</span>
  <span class="keyword">return</span> result;
}

<span class="keyword">extern</span>(Windows)
<span class="keyword">int</span> WindowProc(HWND hWnd, <span class="keyword">uint</span> uMsg, WPARAM wParam, LPARAM lParam)
{
  <span class="keyword">char</span>[<span class="number">8</span>] firstNumber;
  <span class="keyword">char</span>[<span class="number">8</span>] secondNumber;
  <span class="keyword">int</span> count;
  <span class="keyword">long</span> num1;
  <span class="keyword">long</span> num2;

  <span class="keyword">switch</span> (uMsg) {
    <span class="keyword">case</span> WM_COMMAND: {
      <span class="keyword">switch</span> (LOWORD(wParam)) {
        <span class="keyword">case</span> IDC_BTN_PLUS:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            count = SendMessageA(ghFirstNumberEdit, WM_GETTEXT, 
                                 <span class="number">6</span>, <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)firstNumber);
            count = SendMessageA(ghSecondNumberEdit, WM_GETTEXT, 
                                 <span class="number">6</span>, <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)secondNumber);
            num1 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])firstNumber);
            num2 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])secondNumber);
            SendMessageA(ghResultNumberEdit, WM_SETTEXT, 
                         <span class="number">8</span>, <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)toString(num1 + num2));
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_BTN_MINUS:
          <span class="keyword">if</span> (HIWORD(wParam) == BN_CLICKED) {
            count = SendMessageA(ghFirstNumberEdit, 
                                 WM_GETTEXT, <span class="number">8</span>, 
                                 <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)firstNumber);
            count = SendMessageA(ghSecondNumberEdit, 
                                 WM_GETTEXT, <span class="number">8</span>, 
                                 <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)secondNumber);
            num1 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])firstNumber);
            num2 = atoi(<span class="keyword">cast</span>(<span class="keyword">char</span>[])secondNumber);
            SendMessageA(ghResultNumberEdit, 
                         WM_SETTEXT, <span class="number">8</span>, 
                         <span class="keyword">cast</span>(<span class="keyword">int</span>)<span class="keyword">cast</span>(<span class="keyword">char</span>*)toString(num1 - num2));
          }
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_FIRST_NUMBER:
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_SECOND_NUMBER:
          <span class="keyword">break</span>;
        <span class="keyword">case</span> IDC_EDIT_RESULT_NUMBER:
          <span class="keyword">break</span>;
      }
      <span class="keyword">break</span>;
    }
    <span class="keyword">case</span> WM_DESTROY:
      GetCurrentMainWindowPosition();
      SaveRegistrySettings();
      PostQuitMessage(<span class="number">0);</span>
      <span class="keyword">break</span>;

    <span class="keyword">case</span> WM_NOTIFY:
      <span class="keyword">break</span>;

    <span class="keyword">default</span>:
      <span class="keyword">break</span>;
  }
  <span class="keyword">return</span> DefWindowProcA(hWnd, uMsg, wParam, lParam);
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Handling Errors</h3><h4 id="ex33">Try/Catch/Finally</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>catch that error (don't let it catch you!)</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">

<p>Try-Finally is also available in <a href="http://www.javaworld.com/javaworld/jw-02-1997/jw-02-hood.html">Java</a> and 
<a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/csref/html/vclrfTheTryfinallyStatementX.asp">C#</a>.</p>

<pre><code class="example"><span class="keyword">import</span> std.asserterror;

<span class="keyword">int</span> main()
{
    
    <span class="keyword">try</span>
    {
        whatever();
    }
    <span class="keyword">catch</span>(AssertError)
    {  
        printf(<span class="string">"Whoa!  Hold on there.  An assertion failed.\n\n"</span>);      
    }
    <span class="keyword">finally</span>
    {
        
        <span class="comment">/* 
            The finally block executes to allow clean-up of items 
            allocated in the try block.
        */</span>
        
        printf(<span class="string">"This would happen after the errors are dealt with (if there are any errors).\n\n"</span>);
    }
    printf(<span class="string">"If something happened, it wasn't enought of a problem to end the program.\n\n"</span>);
    
    <span class="keyword">return</span> <span class="number">0;
</span>

}


<span class="keyword">void</span> whatever()
{  
    <span class="keyword">assert</span>(<span class="number">0);</span> <span class="comment">/* comment out this line to see what happens if no error occurs */</span>
}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h3 class="ex_disp_h3">Switch / Case</h3><h4 id="ex23">Switch-Case Construct</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>The switch-case construct can be a good way to replace a complicated series of if/else if/else if/else.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2">
<table style="border: thin solid red; margin: 0.1em; padding: 0.1em;"><tbody><tr><td style="border: thin solid red; margin: 0.1em; padding: 0.1em;">D</td>
<td style="border: thin solid red; margin: 0.1em; padding: 0.1em;">
<pre><code class="example"><span class="keyword">int</span> main()
{
    <span class="keyword">int</span> i;

    <span class="keyword">switch</span>(i)
    {
        <span class="keyword">case</span> <span class="number">0: </span>
            printf(<span class="string">"i is zero"</span>); 
            <span class="keyword">break</span>;  
            <span class="comment">/* Without each "break", 
               the flow will fall-through. */</span>

        <span class="keyword">case</span> <span class="number">1</span>: 
            printf(<span class="string">"i is one"</span>);  
            <span class="keyword">break</span>;

        <span class="keyword">case</span> <span class="number">2</span>:
            printf(<span class="string">"i is one"</span>);  
            <span class="keyword">break</span>;
    
        <span class="keyword">default</span>: 
            printf(<span class="string">"i is one"</span>);  
            <span class="keyword">break</span>;
    }
    <span class="keyword">return</span> <span class="number">0;
</span>
}</code></pre>
</td>
</tr>
<tr><td style="border: thin solid red; margin: 0.1em; padding: 0.1em;">QuickBASIC</td> 	

<td style="border: thin solid red; margin: 0.1em; padding: 0.1em;"><tt>Dim i%<br>
<br>
Select Case i%<br>
    Case 0: Print "i is zero" <br>
    Case 1: Print "i is one" <br>
    Case 2: Print "i is two" <br>
    Case 3: Print "i is three" <br>
    Case Else: Print "i is something else"<br>
End Select</tt></td></tr>

<tr><td style="border: thin solid red; margin: 0.1em; padding: 0.1em;">Output</td> 	
<td style="border: thin solid red; margin: 0.1em; padding: 0.1em;">i is zero</td></tr>
</tbody></table></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex20">The Twelve Days of Christmas</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Prints the lyrics to the Twelve Days of Christmas</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*

The Twelve Days of Christmas

File:      twelve.d
Author:    Justin C. Calvarese
Website:   http://jcc_7.tripod.com/d/
License:   Public Domain

Produces the lyrics of the 12 Days of Christmas (all twelve verses)

*/</span>


<span class="keyword">const</span> <span class="keyword">char</span>[] I1 = <span class="string">"On the "</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] I2 = <span class="string">" day of Christmas, my true love gave to me:"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D1 = <span class="string">"A Partridge in a Pear Tree."</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D2 = <span class="string">"Two Turtle Doves, and"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D3 = <span class="string">"Three French Hens,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D4 = <span class="string">"Four Calling Birds,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D5 = <span class="string">"Five Golden Rings,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D6 = <span class="string">"Six Geese a Laying,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D7 = <span class="string">"Seven Swans a Swimming,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D8 = <span class="string">"Eight Maids a Milking,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D9 = <span class="string">"Nine Ladies Dancing,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D10 = <span class="string">"Ten Lords a Leaping,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D11 = <span class="string">"Eleven Pipers Piping,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D12 = <span class="string">"Twelve Drummers Drumming,"</span>;



<span class="keyword">void</span> println(<span class="keyword">char</span>[] s)
{
    printf(<span class="keyword">cast</span>(<span class="keyword">char</span>*) (s ~ <span class="string">"\n\0"</span>)); <span class="comment">/* A simple \n\0 (without quotes) is valid in D, but d2html won't handle it */</span>
}



<span class="keyword">int</span> main (<span class="keyword">char</span>[][] args) 
{
    <span class="keyword">char</span>[] s;

    <span class="keyword">for</span> (<span class="keyword">int</span> e=<span class="number">1</span>; e&lt;=<span class="number">12</span>; e++)
    {
        <span class="keyword">for</span> (<span class="keyword">int</span> d=e; d&gt;<span class="number">0; </span>d--)
        {   
            s = <span class="string">""</span>;

            <span class="keyword">if</span> (d==e)
            {
                s = I1;
                
                <span class="keyword">switch</span>(d)
                {
                    <span class="keyword">case</span> <span class="number">1</span>:  s ~= <span class="string">"first"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">2</span>:  s ~= <span class="string">"second"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">3</span>:  s ~= <span class="string">"third"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">4</span>:  s ~= <span class="string">"fourth"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">5</span>:  s ~= <span class="string">"fifth"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">6</span>:  s ~= <span class="string">"sixth"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">7</span>:  s ~= <span class="string">"seventh"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">8</span>:  s ~= <span class="string">"eighth"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">9</span>:  s ~= <span class="string">"ninth"</span>; <span class="keyword">break</span>;
                    <span class="keyword">case</span> <span class="number">10</span>: s ~= <span class="string">"tenth"</span>; <span class="keyword">break</span>;    
                    <span class="keyword">case</span> <span class="number">11</span>: s ~= <span class="string">"eleventh"</span>; <span class="keyword">break</span>;
                    <span class="keyword">default</span>: s ~= <span class="string">"twelveth"</span>; <span class="keyword">break</span>;
                }
                s ~= I2;
                println(s);
            }

            <span class="keyword">switch</span> (d)
            {
                <span class="keyword">case</span> <span class="number">12</span>: println(D12); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">11</span>: println(D11); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">10</span>: println(D10); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">9</span>:  println(D9); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">8</span>:  println(D8); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">7</span>:  println(D7); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">6</span>:  println(D6); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">5</span>:  println(D5); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">4</span>:  println(D4); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">3</span>:  println(D3); <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="number">2</span>:  println(D2); <span class="keyword">break</span>;
                <span class="keyword">default</span>: println(D1); println(<span class="string">""</span>); <span class="keyword">break</span>;
            }
        }
    }
    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr><h4 id="ex84">The Twelve Days of Christmas (Reprise)</h4><div class="axial"><table class="gray" border="0" cellpadding="3" cellspacing="2">		<tbody><tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Description</th><td>Another example that prints the lyrics to the Twelve Days of Christmas.</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Date/Time</th><td>Fri May 20, 2005 12:00 am</td>
		</tr>
		<tr>
		<th style="color: rgb(0, 0, 0); background-color: rgb(239, 239, 239); background-image: none;">Posted by</th><td>jcc7</td>
		</tr></tbody></table><table><tbody><tr><td colspan="2"><pre><code class="example"><span class="comment">/*
The Twelve Days of Christmas
 
File:           twelve_days_2.d
Author:         J C Calvarese, http://jcc_7.tripod.com/d/
Modified by:    Larry Cowan
License:        Public Domain
 
Produces the lyrics of the 12 Days of Christmas (all twelve verses).
It has a few subtle changes such as a break-less switch statement.
*/</span>
 

<span class="keyword">const</span> <span class="keyword">char</span>[] I1 = <span class="string">"On the "</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] I2 = <span class="string">" day of Christmas, my true love gave to me:"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D1 = <span class="string">"A Partridge in a Pear Tree."</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D2 = <span class="string">"Two Turtle Doves, and"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D3 = <span class="string">"Three French Hens,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D4 = <span class="string">"Four Calling Birds,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D5 = <span class="string">"Five Golden Rings,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D6 = <span class="string">"Six Geese a Laying,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D7 = <span class="string">"Seven Swans a Swimming,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D8 = <span class="string">"Eight Maids a Milking,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D9 = <span class="string">"Nine Ladies Dancing,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D10 = <span class="string">"Ten Lords a Leaping,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D11 = <span class="string">"Eleven Pipers Piping,"</span>;
<span class="keyword">const</span> <span class="keyword">char</span>[] D12 = <span class="string">"Twelve Drummers Drumming,"</span>;
 
 
 
<span class="keyword">void</span> println(<span class="keyword">char</span>[] s)
{
    printf(<span class="keyword">cast</span>(<span class="keyword">char</span>*) (s ~ <span class="string">"\n\0"</span>)); <span class="comment">/* A simple \n\0 (without quotes) is valid in D, but d2html won't handle it */</span>
}
 
 
 
<span class="keyword">int</span> main (<span class="keyword">char</span>[][] args)
{
    <span class="keyword">char</span>[] s;
 
    <span class="keyword">for</span> (<span class="keyword">int</span> e=<span class="number">1</span>; e&lt;=<span class="number">12</span>; e++)
    {
        s = I1;
               
        <span class="keyword">switch</span>(e)       <span class="comment">/* ...keeping the cases separate... */</span>
        {
            <span class="keyword">case</span> <span class="number">1</span>:  s ~= <span class="string">"first"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">2</span>:  s ~= <span class="string">"second"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">3</span>:  s ~= <span class="string">"third"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">4</span>:  s ~= <span class="string">"fourth"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">5</span>:  s ~= <span class="string">"fifth"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">6</span>:  s ~= <span class="string">"sixth"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">7</span>:  s ~= <span class="string">"seventh"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">8</span>:  s ~= <span class="string">"eighth"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">9</span>:  s ~= <span class="string">"ninth"</span>; <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">10</span>: s ~= <span class="string">"tenth"</span>; <span class="keyword">break</span>;   
            <span class="keyword">case</span> <span class="number">11</span>: s ~= <span class="string">"eleventh"</span>; <span class="keyword">break</span>;
            <span class="keyword">default</span>: s ~= <span class="string">"twelveth"</span>; <span class="keyword">break</span>;
        }
        s ~= I2;
        println(s);
 
        <span class="keyword">switch</span> (e)     <span class="comment">/* ...and without the break statements... */</span>
        {
            <span class="keyword">case</span> <span class="number">12</span>: println(D12);
            <span class="keyword">case</span> <span class="number">11</span>: println(D11);
            <span class="keyword">case</span> <span class="number">10</span>: println(D10);
            <span class="keyword">case</span> <span class="number">9</span>:  println(D9);
            <span class="keyword">case</span> <span class="number">8</span>:  println(D8);
            <span class="keyword">case</span> <span class="number">7</span>:  println(D7);
            <span class="keyword">case</span> <span class="number">6</span>:  println(D6);
            <span class="keyword">case</span> <span class="number">5</span>:  println(D5);
            <span class="keyword">case</span> <span class="number">4</span>:  println(D4);
            <span class="keyword">case</span> <span class="number">3</span>:  println(D3);
            <span class="keyword">case</span> <span class="number">2</span>:  println(D2);
            <span class="keyword">default</span>: println(D1); println(<span class="string">""</span>); <span class="keyword">break</span>;
        }
    }
    <span class="keyword">return</span> <span class="number">0;
</span>

}</code></pre></td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody></table></div><hr></div><p style="color: rgb(255, 255, 255);">Anonymous(rank = , level = 0)</p>
        </div></td>
    </tr>
</tbody></table>


        <div class="tabs2">
          <p>&nbsp;</p>
          <span style="float: left;"> Copyright 2004-2005 - The Sankaty Group, Inc. All rights reserved.</span>
          <ul style="float: right;">
            <li><a href="http://www.dsource.org/site/privacy.php"><span>Privacy Statement</span></a></li>
            <li><a href="http://www.dsource.org/site/tos.php"><span>Terms of Service</span></a></li>
          </ul>
        </div>


	</body></html>